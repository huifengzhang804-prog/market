(function(t,u){typeof exports=="object"&&typeof module<"u"?module.exports=u(require("vue"),require("decimal.js"),require("element-plus"),require("@/apis/http"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","decimal.js","element-plus","@/apis/http","vue-router"],u):(t=typeof globalThis<"u"?globalThis:t||self,t.PcSeckillList=u(t.PcSeckillListContext.Vue,t.PcSeckillListContext.Decimal,t.PcSeckillListContext.ElementPlus,t.PcSeckillListContext.Request,t.PcSeckillListContext.VueRouter))})(this,function(t,u,p,M,V){"use strict";var dt=Object.defineProperty;var mt=(t,u,p)=>u in t?dt(t,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):t[u]=p;var F=(t,u,p)=>(mt(t,typeof u!="symbol"?u+"":u,p),p);var E=document.createElement("style");E.textContent=`@charset "UTF-8";*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.absolute{position:absolute}.relative,[relative=\"\"]{position:relative}.m-auto,.ma,[m-auto=\"\"],[ma=\"\"]{margin:auto}.block,.display-block,[display-block=\"\"]{display:block}.flex,[flex=\"\"]{display:flex}.inline-flex{display:inline-flex}.flex-shrink{flex-shrink:1}.flex-wrap,[flex-wrap=\"\"]{flex-wrap:wrap}.cursor-pointer,[cursor-pointer=\"\"]{cursor:pointer}.items-center,[items-center=\"\"]{align-items:center}.justify-center,[justify-center=\"\"]{justify-content:center}.justify-between,[justify-between=\"\"]{justify-content:space-between}.text-center,[text-center=\"\"]{text-align:center}.text-left,[text-left=\"\"]{text-align:left}.c-w-1190,[c-w-1190=\"\"]{width:1190px}.c-w-234,[c-w-234=\"\"]{width:234px}.c-w-257,[c-w-257=\"\"]{width:257px}.c-w-290,[c-w-290=\"\"]{width:290px}.c-w-354{width:354px}.c-w-397{width:397px}.c-w-92,[c-w-92=\"\"]{width:92px}.c-w-94,[c-w-94=\"\"]{width:94px}.c-h-234,[c-h-234=\"\"]{height:234px}.c-h-31,[c-h-31=\"\"]{height:31px}.c-h-39,[c-h-39=\"\"]{height:39px}.c-h-432,[c-h-432=\"\"]{height:432px}.c-h-46,[c-h-46=\"\"]{height:46px}.c-h-56,[c-h-56=\"\"]{height:56px}.c-lh-20,[c-lh-20=\"\"]{line-height:20px}.c-lh-31,[c-lh-31=\"\"]{line-height:31px}.c-lh-39,[c-lh-39=\"\"]{line-height:39px}.c-lh-56,[c-lh-56=\"\"]{line-height:56px}.c-fs-13,[c-fs-13=\"\"]{font-size:13px}.c-fs-14,[c-fs-14=\"\"]{font-size:14px}.c-fs-16,[c-fs-16=\"\"]{font-size:16px}.c-fs-20,[c-fs-20=\"\"]{font-size:20px}.c-fs-22,[c-fs-22=\"\"]{font-size:22px}.c-mr-11,[c-mr-11=\"\"]{margin-right:11px}.c-mr-2,[c-mr-2=\"\"]{margin-right:2px}.c-mr-7,[c-mr-7=\"\"]{margin-right:7px}.c-ml-15,[c-ml-15=\"\"]{margin-left:15px}.c-mt-11,[c-mt-11=\"\"]{margin-top:11px}.c-mt-38,[c-mt-38=\"\"]{margin-top:38px}.c-mt-6,[c-mt-6=\"\"]{margin-top:6px}.c-mb-11,[c-mb-11=\"\"]{margin-bottom:11px}.c-mb-18,[c-mb-18=\"\"]{margin-bottom:18px}.c-mb-21,[c-mb-21=\"\"]{margin-bottom:21px}.c-mb-8,[c-mb-8=\"\"]{margin-bottom:8px}.c-pt-27,[c-pt-27=\"\"]{padding-top:27px}.c-ellipsis-2,[c-ellipsis-2=\"\"]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.c-br-16,[c-br-16=\"\"]{border-radius:16px}.c-br-50,[c-br-50=\"\"]{border-radius:50px}.c-gap-10,[c-gap-10=\"\"]{gap:10px}.c-c-101010,[c-c-101010=\"\"]{color:#101010}.c-c-e31436,[c-c-e31436=\"\"]{color:#e31436}.c-c-ff1e32,[c-c-ff1e32=\"\"]{color:#ff1e32}.c-bc-e31436,[c-bc-e31436=\"\"]{border-color:#e31436}.b-1,[b-1=\"\"]{border-style:solid;border-width:1px}.fw-700,[fw-700=\"\"]{font-weight:700}.c-bg-e31436{background-color:#e31436}.c-bg-fde9ed,[c-bg-fde9ed=\"\"]{background-color:#fde9ed}.bg-white,.c-bg-ffffff,[bg-white=\"\"]{background-color:#fff}.e-c-f,[e-c-f=\"\"]{color:#fff}.e-c-3{color:#333}.countdown-view[data-v-a9423760]{display:inline-flex;color:#000}.countdown-view--item[data-v-a9423760]{height:46rpx;line-height:46rpx;width:46rpx;border-radius:50%;font-size:28rpx;text-align:center;color:#fff}.countdown-view--item-pendant[data-v-a9423760]{height:46rpx;line-height:46rpx;margin:0 5rpx;color:#fff}.countdown-view--item-day[data-v-a9423760]{margin-right:5rpx}.time[data-v-a5798f6f]:after{display:block;content:"";width:0;height:0;border-style:solid;border-width:0 0 56px 65px;border-color:transparent transparent #fff;position:absolute;left:-65px;top:0}.activeTime[data-v-a5798f6f]:after{border-color:transparent transparent #e31436}.time[data-v-a5798f6f]:before{display:block;content:"";width:0;height:0;border-style:solid;border-width:56px 65px 0 0;border-color:#fff transparent transparent;position:absolute;right:-64px;top:0}.activeTime[data-v-a5798f6f]:before{border-color:#e31436 transparent transparent}
`,document.head.appendChild(E);const pt="",G={NOT_START:"未开始",IN_PROGRESS:"进行中",FINISHED:"已结束",OFF_SHELF:"已下架",VIOLATION_OFF_SHELF:"违规下架"},N={NOT_START:{color:"#333333",text:"即将开始",soldOut:!1},IN_PROGRESS:{color:"#e31436",text:"立即抢购",soldOut:!1},OFF_SHELF:{color:"#999999",text:"已结束",soldOut:!1},BUY_NOW:{color:"#e31436",text:"立即抢购",soldOut:!1},OUT_OF_STOCK:{color:"#999999",text:"已抢光",soldOut:!0}},I={NOT_START:{text:"距开始"},IN_PROGRESS:{text:"距结束"},FINISHED:{text:"距结束",soldOut:!1},OFF_SHELF:{text:"已下架"},VIOLATION_OFF_SHELF:{text:"违规下架"}};function z(c=0){return c||(c=0),new u(c).div(1e4)}class B{constructor(e=new Date){F(this,"ms");this.ms=e}getY(e=this.ms){return this.unitReturnDate(e).getFullYear()}getM(e=this.ms){const n=this.unitReturnDate(e).getMonth()+1;return this.formatLength(n)}getD(e=this.ms){const n=this.unitReturnDate(e).getDate();return this.formatLength(n)}getH(e=this.ms){const n=this.unitReturnDate(e).getHours();return this.formatLength(n)}getMin(e=this.ms){const n=this.unitReturnDate(e).getMinutes();return this.formatLength(n)}getS(e=this.ms){const n=this.unitReturnDate(e).getSeconds();return this.formatLength(n)}getYMD(e=this.ms){const r=this.unitReturnDate(e),n=r.getFullYear(),o=r.getMonth()+1,s=r.getDate();return[n,o,s].map(this.formatLength).join("/")}getYMDs(e=this.ms){const r=this.unitReturnDate(e),n=r.getFullYear(),o=r.getMonth()+1,s=r.getDate();return[n,o,s].map(this.formatLength).join("-")}getYMs(e=this.ms){const r=this.unitReturnDate(e),n=r.getFullYear(),o=r.getMonth()+1;return[n,o].map(this.formatLength).join("-")}getMDs(e=this.ms){const r=this.unitReturnDate(e),n=r.getMonth()+1,o=r.getDate();return[n,o].map(this.formatLength).join("-")}getHMS(e=this.ms){const r=this.unitReturnDate(e),n=r.getHours(),o=r.getMinutes(),s=r.getSeconds();return[n,o,s].map(this.formatLength).join(":")}getYMDHMS(e=this.ms){return e=this.unitReturnDate(e),this.getYMD(e)+" "+this.getHMS(e)}getYMDHMSs(e=this.ms){return this.getYMDs(e)+" "+this.getHMS(e)}getLastMonth(e=this.ms,r=30){let n=this.getTime(this.unitReturnDate(e));return n=n-3600*1e3*24*r,this.getYMDs(n)}getLastThreeMonth(e=this.ms,r=90){let n=this.getTime(e);return n=n-3600*1e3*24*r,this.getYMDs(n)}getAddDays(e=this.ms,r=0){let n=this.getTime(this.unitReturnDate(e));n=n+r*24*60*60*1e3;const o=this.getY(n),s=this.getM(n),i=this.getD(n);return[o,s,i].map(this.formatLength).join("-")}getSubtracteDays(e=this.ms,r=0){let n=this.getTime(this.unitReturnDate(e));n=n-r*24*60*60*1e3;const o=this.getY(n),s=this.getM(n),i=this.getD(n);return[o,s,i].map(this.formatLength).join("-")}getTime(e=this.ms){return e.getTime()}getObj(e=this.ms){const r=e,n=r.getFullYear(),o=r.getMonth()+1,s=r.getDate(),i=r.getHours(),y=r.getMinutes(),h=r.getSeconds();return[n,o,s,i,y,h].map(this.formatLength)}formatLength(e){return String(e)[1]?String(e):"0"+e}unitReturnDate(e){return e instanceof Date?e:new Date(e)}isLeapYear(e){return new Date(Number(e),1,29).getDate()===29}MonthToDay(e,r){const n=new Date(Number(e),Number(r),1,0,0,0);return new Date(n.getTime()-1e3).getDate()}}const P=60*60*1e3-1e3;function Y(c){let e,r=parseInt((c%864e5/36e5).toString()),n=parseInt((c%(1e3*60*60)/(1e3*60)).toString()),o=parseInt((c%(1e3*60)/1e3).toString());return e=(r<10?"0"+r:r)+":"+(n<10?"0"+n:n)+":"+(o<10?"0"+o:o),e}const j=c=>M.post({url:"addon-seckill/seckill/activity/round/page",data:c}),H=c=>M.post({url:"addon-seckill/seckill/activity/round/product/page",data:c}),v={class:"countdown-view"},A={class:"countdown-view--item countdown-view--item-day"},$={class:"countdown-view--item"},q={class:"countdown-view--item"},K={class:"countdown-view--item"},U=t.defineComponent({__name:"Pccountdown",props:{startTime:{type:String,default:""},isStart:{type:Boolean,default:!1}},emits:["end"],setup(c,{expose:e,emit:r}){const n=c,o=r;let s=null;const i=t.ref(["00","00","00"]),y=new B;t.watch(()=>n.startTime,()=>{h()}),h();function h(){s&&clearInterval(s),i.value=["00","00","00"],k(n.isStart)}t.onBeforeUnmount(()=>{s&&clearInterval(s)});function k(g){if(!n.startTime)return;const d=new Date().getTime(),x=y.getTime(new Date(n.startTime));let w=g?x-d:x+P-d;w<0||(s=setInterval(()=>{if(w<1e3){o("end"),s&&clearInterval(s);return}w=w-1e3,i.value=Y(w).split(":")},1e3))}function f(g){const d=new Date,x=(new Date(g).getTime()-d.getTime())/(1e3*3600*24);return Math.floor(x)<0?"":Math.floor(x)}return e({loadCountdown:h}),(g,d)=>(t.openBlock(),t.createElementBlock("view",v,[t.renderSlot(g.$slots,"default",{timeArr:i.value},()=>[f(c.startTime)?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("text",A,t.toDisplayString(f(c.startTime)),1),d[0]||(d[0]=t.createElementVNode("text",{class:"countdown-view--item-pendant"},"天",-1))],64)):t.createCommentVNode("",!0),t.createElementVNode("text",$,t.toDisplayString(i.value[0]),1),d[1]||(d[1]=t.createElementVNode("text",{class:"countdown-view--item-pendant"},":",-1)),t.createElementVNode("text",q,t.toDisplayString(i.value[1]),1),d[2]||(d[2]=t.createElementVNode("text",{class:"countdown-view--item-pendant"},":",-1)),t.createElementVNode("text",K,t.toDisplayString(i.value[2]),1)],!0)]))}}),ht="",L=(c,e)=>{const r=c.__vccOpts||c;for(const[n,o]of e)r[n]=o;return r},Q=L(U,[["__scopeId","data-v-a9423760"]]),W=["src"],X=["onClick"],J={"e-c-f":"","c-mr-2":""},Z={key:1,"c-w-92":"","c-h-31":"","c-lh-31":"","c-c-e31436":"","c-bg-fde9ed":"","b-1":"","c-bc-e31436":"","text-center":"","c-br-16":""},tt={flex:"","items-center":"","flex-wrap":"","c-w-1190":"","m-auto":"","c-gap-10":""},et=["onClick"],nt=["src"],rt={"c-mt-11":"","c-ml-15":"","c-c-ff1e32":"","fw-700":"","c-fs-22":""},ot={"c-mt-6":"","c-ml-15":"","c-ellipsis-2":"","c-w-257":"","c-fs-13":"","c-c-101010":"","c-h-46":"","c-lh-20":""},st={flex:"","justify-between":"","items-center":""},ct={"c-mt-38":"","c-mb-21":"",flex:"","justify-center":"","c-w-1190":"",ma:""},it=t.defineComponent({__name:"PcSeckillList",props:{properties:{type:Object,default:()=>({})}},setup(c){const e=V.useRouter(),r=t.ref(0),n=t.ref([]),o=t.ref(),s=t.ref([]);t.ref("");const i=t.reactive({startTime:"",size:16,current:1,total:1}),y=t.ref(),h=t.ref(!1);t.onMounted(async()=>{await k(),await f()});async function k(){const{code:a,data:l,msg:b}=await j({current:1,size:4});if(a!==200)return p.ElMessage.error(b||"秒杀活动获取失败");n.value=l.records,o.value=l.records[0]}async function f(){var T;if(!((T=o.value)!=null&&T.time.start))return;i.startTime=o.value.time.start;const{code:a,data:l,msg:b}=await H({start:i.startTime,size:i.size,current:i.current});if(a!==200)return p.ElMessage.error(b||"获取商品列表失败");i.total=Number(l.total),s.value=l.records}const g=(a,l)=>{e.push({path:"/detail",query:{productId:a,shopId:l}})},d=a=>{i.current=a,f()};function x(a){return a.split(" ")[1],a.split(" ")[1].substring(0,5)}const w=()=>{p.ElMessageBox.alert("本次秒杀活动结束啦，看看最新的秒杀活动吧~","",{confirmButtonText:"前往查看",center:!0,showClose:!1}).then(async()=>{await k(),await f()})},at=(a,l)=>{o.value=a,f(),r.value=l},S=c,R=t.ref("");setTimeout(()=>{var a,l;return R.value=(l=(a=S==null?void 0:S.properties)==null?void 0:a.otherData)==null?void 0:l.seckillImg},400);const lt=a=>a.status==="NOT_START"?a.time.start:a.time.end;return(a,l)=>{const b=t.resolveComponent("el-carousel-item"),T=t.resolveComponent("el-carousel"),ut=t.resolveComponent("el-pagination");return t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createVNode(T,{height:"482px","c-mb-18":""},{default:t.withCtx(()=>[t.createVNode(b,{style:{"background-color":"#fff"}},{default:t.withCtx(()=>[t.createElementVNode("img",{src:R.value,style:{width:"100%",height:"100%"}},null,8,W)]),_:1})]),_:1}),t.createElementVNode("div",null,[t.createElementVNode("div",{flex:"",ma:"","cursor-pointer":"","c-mb-8":"",class:t.normalizeClass((h.value,"c-w-1190")),style:{padding:"0 65px",overflow:"auto"}},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.value,(m,_)=>{var D,O,C;return t.openBlock(),t.createElementBlock("div",{key:_,"c-h-56":"","c-lh-56":"","c-fs-14":"","fw-700":"",relative:"",flex:"","items-center":"","justify-center":"",style:{width:"350px","flex-shrink":"0"},class:t.normalizeClass([r.value===_?"activeTime c-bg-e31436":"c-bg-ffffff",h.value?"c-w-397":"c-w-354 time"]),onClick:xt=>at(m,_)},[t.createElementVNode("span",{"c-fs-20":"","c-mr-11":"",class:t.normalizeClass(r.value===_?"e-c-f":"e-c-3")},t.toDisplayString(x(m.time.start)),3),r.value===_?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("span",J,t.toDisplayString(((D=o.value)==null?void 0:D.status)&&t.unref(I)[o.value.status].text),1),t.createVNode(Q,{ref_for:!0,ref_key:"countdownRef",ref:y,"start-time":lt(m),"is-start":((O=o.value)==null?void 0:O.status)==="NOT_START"||((C=o.value)==null?void 0:C.status)==="IN_PROGRESS",onEnd:w},null,8,["start-time","is-start"])],64)):(t.openBlock(),t.createElementBlock("div",Z,t.toDisplayString(t.unref(G)[m.status]),1))],10,X)}),128))],2)]),t.createElementVNode("div",tt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(s.value,(m,_)=>(t.openBlock(),t.createElementBlock("div",{key:_,"c-w-290":"","c-h-432":"","bg-white":"","text-left":"","c-pt-27":"","c-mb-11":"",onClick:D=>g(m.productId,m.shopId)},[t.createElementVNode("img",{src:m.productImage,"c-w-234":"","c-h-234":"","m-auto":"","display-block":""},null,8,nt),t.createElementVNode("div",rt,[l[0]||(l[0]=t.createElementVNode("span",{"c-fs-16":""},"￥",-1)),t.createTextVNode(" "+t.toDisplayString(t.unref(z)(m.minPrice)),1)]),t.createElementVNode("div",ot,t.toDisplayString(m.productName),1),t.createElementVNode("div",st,[l[1]||(l[1]=t.createElementVNode("div",null,null,-1)),t.createElementVNode("div",{"c-mr-7":"","c-w-94":"","c-h-39":"","c-lh-39":"","e-c-f":"","text-center":"","c-br-50":"",style:t.normalizeStyle({background:t.unref(N)[o.value.status].color,cursor:"pointer"})},t.toDisplayString(t.unref(N)[o.value.status].text),5)])],8,et))),128))]),t.createElementVNode("div",ct,[t.createVNode(ut,{background:"",layout:"prev, pager, next",total:i.total,"current-page":i.current,"hide-on-single-page":!0,onCurrentChange:d},null,8,["total","current-page"])])],64)}}}),ft="";return L(it,[["__scopeId","data-v-a5798f6f"]])});
