(function(e,ce){typeof exports=="object"&&typeof module<"u"?module.exports=ce(require("vue"),require("@/components/chrome-tab/index.vue"),require("@/components/PageManage.vue"),require("element-plus"),require("decimal.js"),require("@/components/q-icon/q-icon.vue"),require("@/apis/good"),require("@/components/SchemaForm.vue"),require("@/composables/useConvert"),require("@/components/q-choose-goods-popup/q-choose-goods-popup.vue"),require("vue-clipboard3"),require("vue-router"),require("@/utils/date"),require("@element-plus/icons-vue"),require("@/components/qszr-core/packages/q-table/QTable"),require("@/components/qszr-core/packages/q-table/q-table-column.vue"),require("@/apis/http")):typeof define=="function"&&define.amd?define(["vue","@/components/chrome-tab/index.vue","@/components/PageManage.vue","element-plus","decimal.js","@/components/q-icon/q-icon.vue","@/apis/good","@/components/SchemaForm.vue","@/composables/useConvert","@/components/q-choose-goods-popup/q-choose-goods-popup.vue","vue-clipboard3","vue-router","@/utils/date","@element-plus/icons-vue","@/components/qszr-core/packages/q-table/QTable","@/components/qszr-core/packages/q-table/q-table-column.vue","@/apis/http"],ce):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopDistribute=ce(e.ShopDistributeContext.Vue,e.ShopDistributeContext.ChromeTab,e.ShopDistributeContext.PageManageTwo,e.ShopDistributeContext.ElementPlus,e.ShopDistributeContext.Decimal,e.ShopDistributeContext.QIcon,e.ShopDistributeContext.GoodAPI,e.ShopDistributeContext.SchemaForm,e.ShopDistributeContext.UseConvert,e.ShopDistributeContext.QChooseGoodsPopup,e.ShopDistributeContext.VueClipboard3,e.ShopDistributeContext.VueRouter,e.ShopDistributeContext.DateUtil,e.ShopDistributeContext.ElementPlusIconsVue,e.ShopDistributeContext.QTable,e.ShopDistributeContext.QTableColumn,e.ShopDistributeContext.Request))})(this,function(e,ce,he,S,$,me,Te,ge,pe,ke,Se,De,Ie,ye,$e,M,P){"use strict";var Ve=document.createElement("style");Ve.textContent=`@charset "UTF-8";[data-v-d3dc80a1]{font-size:14px}.table-height-fit[data-v-d3dc80a1]{height:calc(100vh - 370px);overflow:auto}.dis[data-v-d3dc80a1]{padding:0}.dis__header[data-v-d3dc80a1]{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}.com[data-v-d3dc80a1]{color:#515151;display:flex}.com__img[data-v-d3dc80a1]{width:68px;height:68px;margin-right:12px}.com__right[data-v-d3dc80a1]{height:68px;text-align:left;display:flex;flex-direction:column;justify-content:space-between}.com__right--name[data-v-d3dc80a1]{line-height:normal;width:217px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.dialogCom[data-v-d3dc80a1]{display:flex;justify-content:center;align-items:center}.dialogCom__img[data-v-d3dc80a1]{width:60px;height:60px;margin-right:12px;border-radius:10px}.dialogCom__right--name[data-v-d3dc80a1]{width:210px;font-size:14px;color:#333;line-height:20px}.tableCom__img[data-v-d3dc80a1]{width:36px;height:36px;margin-right:12px;border-radius:10px}.color51[data-v-d3dc80a1]{color:#515151}.colorRed[data-v-d3dc80a1]{color:#fd0505}.color33[data-v-d3dc80a1]{color:#333}.column[data-v-d3dc80a1]{display:flex;flex-direction:column;align-items:start;justify-content:center}.column button[data-v-d3dc80a1]{margin:0}.flex[data-v-d3dc80a1]{display:flex;justify-content:flex-start;align-items:center}.amount[data-v-d3dc80a1]:before{content:"￥";display:inline-block}.percentage[data-v-d3dc80a1]:after{content:"%";display:inline-block}.tiShi[data-v-d3dc80a1]{color:#fd0505;font-size:12px;margin:10px 0 20px}[data-v-d3dc80a1] .el-button.is-link{padding:0}[data-v-d3dc80a1] .el-button+.el-button{margin-left:10px}.head[data-v-9192335f]{width:1256px;display:flex;align-items:center;background-color:#f7f8fa;height:52px;padding-left:16px;color:#333}.head div[data-v-9192335f]:after{content:"|";padding:0 8px;position:relative;top:-1px;color:#333!important}.head .last[data-v-9192335f]:after{content:""}.content[data-v-9192335f]{display:flex}.content__right1[data-v-9192335f]{border:1px solid #ebeef5;display:flex;align-items:center;justify-content:space-around;line-height:26px;width:470px;flex-shrink:0;padding-left:10px}.content__right1--item[data-v-9192335f]{display:flex;flex-direction:column}.content__right1--item span[data-v-9192335f]{line-height:18px}.content__right2[data-v-9192335f]{width:157px;flex-shrink:0;font-size:13px;text-align:center;line-height:26px}.content__right2--item[data-v-9192335f]{height:100px;line-height:100px;border:1px solid #ebeef5}.content__right3[data-v-9192335f]{width:196px;flex-shrink:0;font-size:13px;border:1px solid #ebeef5;display:flex;flex-wrap:wrap;justify-content:center;flex-direction:column;padding-left:5px;line-height:26px}.content__right3--item[data-v-9192335f]{padding:0 10px}.goods[data-v-9192335f]{width:410px;height:68px;display:flex}.goods__pic[data-v-9192335f]{margin-right:10px;width:60px;height:50px;position:relative}.goods__pic--state[data-v-9192335f]{background:#7f83f7;position:absolute;width:40px;height:40px;border-radius:50%;top:5px;left:10px;color:#fff;line-height:40px;text-align:center;font-size:10px}.goods__info[data-v-9192335f]{display:flex;flex-direction:column;justify-content:space-between;margin-left:10px}.goods__info-flex[data-v-9192335f]{width:310px;display:flex;align-items:center;justify-content:space-between}.goods__info-flex--name[data-v-9192335f]{width:220px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;margin-right:10px}.goods__info-flex--price[data-v-9192335f]{font-size:12px}.goods__info-flex--specs[data-v-9192335f]{color:#999;width:220px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.goods__info-flex--num[data-v-9192335f]{position:relative;top:7px;font-size:12px}[data-v-9192335f] .el-table thead{display:none}.amount[data-v-9192335f]:before{content:"￥";display:inline-block}.percentage[data-v-9192335f]:after{content:"%";display:inline-block}.ellipsis[data-v-9192335f]{max-width:125px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.buyer[data-v-9192335f]{max-width:100px;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.buyer-container[data-v-9192335f]{display:flex;justify-content:flex-start;align-items:center}.name[data-v-9192335f]{width:109px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#555cfd}.description__content[data-v-8f738c26]{margin-bottom:15px;line-height:22px;color:#101010}[data-v-8f738c26] .el-table thead tr .el-table__cell{height:30px;background:#bebebe!important}.distribution_order_table_container[data-v-524b46c9]{overflow:auto;position:relative;border-left:16px solid transparent;border-right:16px solid transparent}.distribution_order_table_container .tbhead[data-v-524b46c9]{background-color:#f2f2f2;position:sticky;top:0;z-index:100}.count[data-v-524b46c9]{height:48px;line-height:48px}.count span[data-v-524b46c9]{margin-right:16px}.count span text[data-v-524b46c9]{font-weight:700}.tbhead[data-v-524b46c9]{width:1256px;display:flex;align-items:center;height:48px;font-weight:700;background-color:#f7f8fa}.tbhead__goods[data-v-524b46c9]{margin-left:16%}.tbhead__state[data-v-524b46c9]{margin-left:23%}.tbhead__detail[data-v-524b46c9]{margin-left:29%}.tbhead__total[data-v-524b46c9]{margin-left:8%}.ml[data-v-524b46c9]{margin-left:30px}[data-v-3fee21d5]{font-size:14px!important}.tool[data-v-3fee21d5]{width:100%;height:56px;background:#fff;position:relative}.tool__btn[data-v-3fee21d5]{position:absolute;left:0}.tool__btn--drop[data-v-3fee21d5]{width:120px}.tool__input[data-v-3fee21d5]{width:250px;font-size:14px;position:absolute;right:0;top:50%;margin-top:-24px}.q-table[data-v-3fee21d5]{width:100%;overflow:auto}.color51[data-v-3fee21d5]{color:#515151;display:flex;flex-direction:column;justify-content:space-around}.color58[data-v-3fee21d5]{color:#586884}.color33[data-v-3fee21d5]{color:#333}.column[data-v-3fee21d5]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.column button[data-v-3fee21d5]{margin:0}.ellipsis[data-v-3fee21d5]{width:135px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ml[data-v-3fee21d5]{margin-left:30px}
`,document.head.appendChild(Ve);const Be={class:"q_plugin_container"},Fe=e.defineComponent({__name:"ShopDistribute",setup(r){const g={distributionCom:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Nt)),distributionOrder:e.defineAsyncComponent(()=>Promise.resolve().then(()=>To)),wholeSaler:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Ro))},N=[{label:"分销商品",name:"distributionCom"},{label:"分销订单",name:"distributionOrder"},{label:"分销商",name:"wholeSaler"}],m=e.ref("distributionCom"),s=e.computed(()=>g[m.value]),h=x=>{x&&(m.value=x)};return(x,b)=>(e.openBlock(),e.createElementBlock("div",Be,[e.createVNode(ce,{tabList:N,value:m.value,onHandleTabs:h},null,8,["value"]),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(s.value),{ref:"componentRef"},null,512))]))}}),Oe=r=>P.post({url:"addon-distribute/distribute/product",data:r}),Ue=(r,g)=>P.put({url:`addon-distribute/distribute/product/${r}`,data:g}),Le=r=>P.post({url:"addon-distribute/distribute/product/page",data:r}),Ae=r=>P.del({url:`addon-distribute/distribute/product/${r.join(",")}`}),Ce=r=>P.put({url:`addon-distribute/distribute/product/cancel/${r.join(",")}`}),ze=r=>P.put({url:`addon-distribute/distribute/product/again/${r}`}),Re=()=>P.get({url:"addon-distribute/distribute/config"}),Pe=r=>P.get({url:"addon-distribute/distribute/order",params:r}),qe=r=>P.get({url:"addon-distribute/distribute/distributor",params:r}),je=r=>P.get({url:"addon-distribute/distribute/distributor/team",params:r}),He=r=>P.get({url:"addon-distribute/distribute/distributor/rank",params:r}),Xe=r=>P.post({url:"addon-distribute/distribute/order/export",data:r}),We={class:"handle_container"},Ge={class:"table_container"},Me={class:"com f12 color51"},Ye={class:"com__right"},Je={class:"com__right--name"},Ke={key:0,class:"virtual_product"},Ze={key:1,class:"com__right--name"},Qe={key:0,class:"virtual_product"},ve={key:2},et={key:3},tt={class:"f12 color51"},ot={class:"f12 color51 column"},nt={class:"f12 color51"},lt={key:0,class:"f12 color51"},at={key:1,class:"f12 color51"},rt={style:{display:"flex"}},st={key:0,placement:"bottom",effect:"light",class:"colorRed"},dt={key:1,class:"f12 colorRed"},it={class:"f12 color51"},ct={style:{display:"flex",gap:"20px"}},mt={class:"flex"},pt={class:"tableCom flex"},ft={class:"f12 color51"},ht={key:0,class:"f12 colorRed"},ut={key:1,class:"f12 colorRed"},bt={key:0,class:"f12 colorRed"},xt={key:1,class:"f12 colorRed"},_t=["onClick"],gt=e.defineComponent({__name:"DistributionCom",setup(r){const g=e.ref(),N=e.reactive({list:[],current:1,pages:1,total:0,size:10,productName:"",distributionStatus:"ALL"}),{mulTenThousand:m,divTenThousand:s,divHundred:h}=pe(),x=e.ref("add"),b=e.ref(!1),u=e.ref("ONE"),d=e.ref({}),f=e.ref(),E=e.computed(()=>x.value==="add"?"新增":x.value==="edit"?"编辑":"查看"),T=e.reactive({pages:1,current:1,list:[],total:0,size:10,name:"",loading:!1,excludeProductIds:[]}),c=e.reactive({shareType:"UNIFIED",one:"0",two:"0",three:"0",productIds:[],listId:""}),D=e.reactive({one:[{required:!0,validator:Q,trigger:"blur"}],two:[{required:!0,validator:v,trigger:"blur"}],three:[{required:!0,validator:ee,trigger:"blur"}]}),y=e.ref([]),C=e.ref([]);e.ref([]);const w=[{label:"商品名称",prop:"productName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称"}}];O(),be();const X=()=>{x.value="add",b.value=!0},ne=()=>{if(x.value==="see"){b.value=!1;return}f.value&&f.value.validate(async l=>{if(l){const t=JSON.parse(JSON.stringify(c));t.shareType==="RATE"||t.shareType==="FIXED_AMOUNT"?(t.one=String(m(t.one)),t.two=String(m(t.two)),t.three=String(m(t.three))):(t.shareType=d.value.shareType,(d.value.shareType==="RATE"||d.value.shareType==="FIXED_AMOUNT")&&(t.one=String(m(d.value.one)),t.two=String(m(d.value.two)),t.three=String(m(d.value.three))));const{code:o,msg:i}=x.value==="add"?await Oe(J(t)):await Ue(t.listId,J(t));o===200?(S.ElMessage.success(x.value==="add"?"新增成功":"修改成功"),b.value=!1,O()):S.ElMessage.error(i||(x.value==="add"?"新增失败":"修改失败"))}})},z=()=>{de.value=!0,a()},q=l=>{N.current=l,O()},H=l=>{N.size=l,O()},K=()=>{j()},I=()=>{N.current=1,O()},k=l=>{y.value=l},A=async l=>{if((l.status==="SELL_ON"||l.status==="UNUSABLE")&&l.distributionStatus==="CANCEL_DISTRIBUTION"){const{code:t,success:o}=await ze(l.id);t===200&&o?(S.ElMessage.success("重新分销成功"),O()):S.ElMessage.error("重新分销失败"),O()}},Z=e.ref(""),W=async l=>{x.value="edit",c.productIds=[l.productId],c.shareType=l.shareType,c.listId=l.id,(l.one||l.two||l.three)&&(c.one=(l.shareType==="FIXED_AMOUNT",String(s(l.one))),c.two=(l.shareType==="FIXED_AMOUNT",String(s(l.two))),c.three=(l.shareType==="FIXED_AMOUNT",String(s(l.three)))),b.value=!0,Z.value=l.distributionStatus},L=l=>{S.ElMessageBox.confirm("请确认是否取消分销，确定后商品将从停止分销！！！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{code:t,success:o}=await Ce([l]);t===200&&o?(S.ElMessage.success("取消分销成功"),O()):S.ElMessage.error("取消分销失败")})},Y=l=>{console.log(l),S.ElMessageBox.confirm("请确认是否移除商品，确定后商品将从该列表中移除！！！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{code:t,success:o}=await Ae([l]);t===200&&o?(S.ElMessage.success("商品移除成功"),O()):S.ElMessage.error("商品移除失败")})},V=()=>{if(!y.value.length)return S.ElMessage.warning("请选中商品");S.ElMessageBox.confirm("请确认是否取消分销，确定后商品将从该列表中移除！！！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const l=y.value.map(i=>i.id),{code:t,success:o}=await Ce(l);t===200&&o?(S.ElMessage.success("取消分销成功"),O()):S.ElMessage.error("取消分销失败")})};e.ref("");async function a(){T.loading=!0;const{code:l,data:t}=await Te.doGetRetrieveProduct({current:T.current,size:T.size,excludeProductIds:T.excludeProductIds});l===200?(T.list=t.list,T.size=t.pageSize,T.current=t.pageNum,T.total=t.total):S.ElMessage.error("获取商品失败"),T.loading=!1}function j(){var l;c.productIds=[],c.shareType="UNIFIED",c.one="0",c.two="0",c.three="0",T.excludeProductIds=[],C.value=[],(l=g.value)!=null&&l.tempGoods&&(g.value.tempGoods=[])}function G(l){C.value.forEach((t,o,i)=>{t.productId===l&&i.splice(o,1)}),T.excludeProductIds.forEach((t,o,i)=>{t===l&&i.splice(o,1)}),c.productIds.forEach((t,o,i)=>{t===l&&i.splice(o,1)})}function Q(l,t,o){const i=c.shareType;if(i==="UNIFIED")return o();const p=Number(t);if(p<=0)return o(new Error("一级佣金应大于等于零"));if(u.value!=="ONE"&&c.two&&p<=Number(c.two))return o(new Error("一级佣金值应大于二级佣金"));if(i==="RATE"&&(p>100||p<0))return o(new Error("一级佣金比例应设置在0-100之间"));if(i==="FIXED_AMOUNT"&&(p>9e3||p<0))return o(new Error("一级佣金应设置在0-9000之间"));o()}function v(l,t,o){const i=c.shareType;if(i==="UNIFIED"||u.value==="ONE")return o();const p=Number(t);if(i==="RATE"&&(p>100||p<0))return o(new Error("一级佣金比例应设置在0-100之间"));if(i==="FIXED_AMOUNT"&&(p>9e3||p<0))return o(new Error("一级佣金应设置在0-9000之间"));if(c.one&&p>=Number(c.one))return o(new Error("二级佣金应小于一级佣金"));if(u.value==="THREE"&&c.three&&p<=Number(c.three))return o(new Error("二级佣金应大于三级佣金"));o()}function ee(l,t,o){const i=c.shareType;if(i==="UNIFIED"||u.value!=="THREE")return o();const p=Number(t);if(i==="RATE"&&(p>100||p<0))return o(new Error("一级佣金比例应设置在0-100之间"));if(i==="FIXED_AMOUNT"&&(p>9e3||p<0))return o(new Error("一级佣金应设置在0-9000之间"));if(c.two&&p>=Number(c.two))return o(new Error("三级佣金应小于二级佣金"));o()}function R(l,t){return l==="UNIFIED"&&d.value.shareType==="RATE",s(t)}function J(l){return u.value==="ONE"?(delete l.two,delete l.three):u.value==="TWO"&&delete l.three,l}async function O(){const{code:l,data:t}=await Le({size:N.size,current:N.current,productName:N.productName,distributionStatus:N.distributionStatus==="ALL"?null:N.distributionStatus});l===200&&t?(N.list=t.records.map(o=>({...o,originSalePrices:[...new Set(o.salePrices)].sort()})),N.total=t.total,console.log(t)):S.ElMessage.error("获取分销商品列表失败")}const B=()=>{N.productName="",O()};function ae(l){if(l)return l==="IN_DISTRIBUTION"?"分销中":"取消分销"}function ue(l){if(l)return l==="REFUSE"?"已拒绝":l==="UNDER_REVIEW"?"审核中":l==="SELL_OFF"?"下架":l==="SELL_ON"?"上架":l==="SELL_OUT"?"已售完":l==="PLATFORM_SELL_OFF"?"违规下架":"店铺不可用"}async function be(){const{code:l,data:t}=await Re();l===200?(u.value=t.level,(t.one||t.two||t.three)&&(t.one=t.shareType==="FIXED_AMOUNT"?String(s(t.one)):String(h(t.one)),t.two=t.shareType==="FIXED_AMOUNT"?String(s(t.two)):String(h(t.two)),t.three=t.shareType==="FIXED_AMOUNT"?String(s(t.three)):String(h(t.three)),d.value=t)):S.ElMessage.error("获取分销配置失败")}const re=l=>c.shareType!=="UNIFIED"?c.shareType==="RATE"?u.value==="ONE"?l.mul(h(c.one)).toFixed(2):u.value==="TWO"?l.mul(h(c.one)).add(l.mul(h(c.two))).toFixed(2):l.mul(h(c.one)).add(l.mul(h(c.two))).add(l.mul(h(c.three))).toFixed(2):u.value==="ONE"?new $(c.one).toFixed(2):u.value==="TWO"?new $(c.one).add(c.two).toFixed(2):new $(c.one).add(c.two).add(c.three).toFixed(2):d.value.shareType==="RATE"?u.value==="ONE"?l.mul(h(d.value.one)).toFixed(2):u.value==="TWO"?l.mul(h(d.value.one)).add(l.mul(h(d.value.two))).toFixed(2):l.mul(h(d.value.one)).add(l.mul(h(d.value.two))).add(l.mul(h(d.value.three))).toFixed(2):u.value==="ONE"?new $(d.value.one).toFixed(2):u.value==="TWO"?new $(d.value.one).add(d.value.two).toFixed(2):new $(d.value.one).add(d.value.two).add(d.value.three).toFixed(2),se=(l,t)=>t.shareType!=="UNIFIED"?t.shareType==="RATE"?u.value==="ONE"?l.mul(s(h(t.one))).toFixed(2):u.value==="TWO"?l.mul(s(h(t.one))).add(l.mul(h(h(t.two)))).toFixed(2):l.mul(s(h(t.one))).add(l.mul(s(h(t.two)))).add(l.mul(s(h(t.three)))).toFixed(2):u.value==="ONE"?s(t.one).toFixed(2):u.value==="TWO"?s(t.one).add(s(t.two)).toFixed(2):s(t.one).add(s(t.two)).add(s(t.three)).toFixed(2):d.value.shareType==="RATE"?u.value==="ONE"?l.mul(h(d.value.one)).toFixed(2):u.value==="TWO"?l.mul(h(d.value.one)).add(l.mul(h(d.value.two))).toFixed(2):l.mul(h(d.value.one)).add(l.mul(h(d.value.two))).add(l.mul(h(d.value.three))).toFixed(2):u.value==="ONE"?new $(d.value.one).toFixed(2):u.value==="TWO"?new $(d.value.one).add(d.value.two).toFixed(2):new $(d.value.one).add(d.value.two).add(d.value.three).toFixed(2);function xe(l,t,o,i,p,_){if(l==="FIXED_AMOUNT"){i=+s(i),p=+s(p),_=+s(_);const U=(i+p+_).toFixed(2);return`${i} + ${p} + ${_} = ${U}`}else if(t=+s(t),o=+s(o),i=+h(s(i)),p=+h(s(p)),_=+h(s(_)),_)if(p){const U=(o*i+o*p+o*_).toFixed(2),F=(t*i+t*p+t*_).toFixed(2);return t===o?`${t} * ${i} + ${t} * ${p} + ${t} * ${_} = ${F}`:`${t} * ${i} + ${t} * ${p} + ${t} * ${_} = ${F} </br> ${o} * ${i} + ${o} * ${p} + ${o} * ${_} = ${U}`}else{const U=(o*i).toFixed(2),F=(t*i).toFixed(2);return t===o?t+" * "+i+"   = "+F:`${t} * ${i} = ${F} </br> ${o} * ${i} = ${U}`}else{const U=(o*i+o*p).toFixed(2),F=(t*i+t*p).toFixed(2);return t===o?`${t} * ${i} + ${t} * ${p} = ${F}`:`${t} * ${i} + ${t} * ${p} = ${F} </br> ${o} * ${i} + ${o} * ${p} = ${U}`}}e.computed(()=>(l,t,o,i,p,_)=>{if(l==="FIXED_AMOUNT"){const U=+i+ +p+ +_;return`${i} + ${p} + ${_} = ${U}`}else if(t=+s(t),o=+s(o),(c.shareType==="RATE"||c.shareType==="UNIFIED"&&d.value.shareType!=="FIXED_AMOUNT")&&(i=+h(i),p=+h(p),_=+h(_)),_)if(p){const U=+(o*i+o*p+o*_).toFixed(2),F=+(t*i+t*p+t*_).toFixed(2);return t===o?`${t} * ${i} + ${t} * ${p} + ${t} * ${_} = ${F}`:`${t} * ${i} + ${t} * ${p} + ${t} * ${_} = ${F} </br> ${o} * ${i} + ${o} * ${p} + ${o} * ${_} = ${U}`}else{const U=(o*i).toFixed(2),F=(t*i).toFixed(2);return t===o?`${t} * ${i} = ${F}`:`${t} * ${i} = ${F} </br> ${o} * ${i} = ${U}`}else{const U=(o*i+o*p).toFixed(2),F=(t*i+t*p).toFixed(2);return t===o?`${t} * ${i} + ${t} * ${p} = ${F}`:`${t} * ${i} + ${t} * ${p} = ${F} </br> ${o} * ${i} + ${o} * ${p} = ${U}`}});const de=e.ref(!1),_e=l=>{console.log(l),C.value=l.tempGoods;const t=l.tempGoods.map(o=>o.productId);c.productIds=[...c.productIds,...t]};return(l,t)=>{const o=e.resolveComponent("el-tab-pane"),i=e.resolveComponent("el-tabs"),p=e.resolveComponent("el-button"),_=e.resolveComponent("el-table-column"),U=e.resolveComponent("el-image"),F=e.resolveComponent("el-tooltip"),Ee=e.resolveComponent("el-table"),Ne=e.resolveComponent("el-radio"),Po=e.resolveComponent("el-radio-group"),te=e.resolveComponent("el-form-item"),ie=e.resolveComponent("el-input"),qo=e.resolveComponent("el-form"),jo=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ge,{modelValue:N,"onUpdate:modelValue":t[0]||(t[0]=n=>N=n),columns:w,onSearchHandle:O,onHandleReset:B},null,8,["modelValue"]),e.createVNode(i,{modelValue:N.distributionStatus,"onUpdate:modelValue":t[1]||(t[1]=n=>N.distributionStatus=n),class:"tab_container",onTabChange:I},{default:e.withCtx(()=>[e.createVNode(o,{label:"全部",name:"ALL"}),e.createVNode(o,{label:"分销中",name:"IN_DISTRIBUTION"}),e.createVNode(o,{label:"取消分销",name:"CANCEL_DISTRIBUTION"})]),_:1},8,["modelValue"]),e.createElementVNode("div",We,[e.createVNode(p,{type:"primary",onClick:X},{default:e.withCtx(()=>t[12]||(t[12]=[e.createTextVNode("新增商品")])),_:1}),e.withDirectives(e.createVNode(p,{onClick:V},{default:e.withCtx(()=>t[13]||(t[13]=[e.createTextVNode("批量取消分销")])),_:1},512),[[e.vShow,N.distributionStatus!=="CANCEL_DISTRIBUTION"]])]),e.createElementVNode("div",Ge,[e.createVNode(Ee,{data:N.list,"header-cell-style":{color:"#333",fontSize:"14px",background:"#F6F8FA",height:"48px"},class:"table-height-fit",onSelectionChange:k},{default:e.withCtx(()=>[e.createVNode(_,{type:"selection",width:"55"}),e.createVNode(_,{label:"商品信息",width:"400"},{default:e.withCtx(n=>[e.createElementVNode("div",Me,[e.createVNode(U,{class:"com__img",src:n.row.pic},null,8,["src"]),e.createElementVNode("div",Ye,[n.row.name.length>19?(e.openBlock(),e.createBlock(F,{key:0,effect:"dark",content:n.row.name,placement:"top"},{default:e.withCtx(()=>[e.createElementVNode("div",Je,[n.row.productType==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",Ke,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.row.name),1)])]),_:2},1032,["content"])):(e.openBlock(),e.createElementBlock("div",Ze,[n.row.productType==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",Qe,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.row.name),1)])),n.row.originSalePrices.length>1?(e.openBlock(),e.createElementBlock("div",ve," ￥"+e.toDisplayString(e.unref(s)(n.row.salePrices[0]).toFixed(2))+" ~ ￥"+e.toDisplayString(e.unref(s)(n.row.salePrices[n.row.salePrices.length-1]).toFixed(2)),1)):(e.openBlock(),e.createElementBlock("div",et,"￥"+e.toDisplayString(e.unref(s)(n.row.salePrices[0]).toFixed(2)),1))])])]),_:1}),e.createVNode(_,{label:"库存",width:"140"},{header:e.withCtx(()=>t[14]||(t[14]=[e.createElementVNode("div",null,[e.createElementVNode("span",null,"库存")],-1)])),default:e.withCtx(n=>[e.createElementVNode("span",tt,e.toDisplayString(n.row.stock),1)]),_:1}),e.createVNode(_,{label:"分佣参数",width:"140"},{default:e.withCtx(n=>[e.createElementVNode("div",ot,[e.createElementVNode("div",nt,[t[15]||(t[15]=e.createTextVNode(" 一级:")),e.createElementVNode("span",{class:e.normalizeClass([n.row.shareType==="UNIFIED"?d.value.shareType==="FIXED_AMOUNT"?"amount":"percentage":n.row.shareType==="FIXED_AMOUNT"?"amount":"percentage"])},e.toDisplayString(R(n.row.shareType,n.row.one)),3)]),u.value!=="ONE"&&n.row.two?(e.openBlock(),e.createElementBlock("div",lt,[t[16]||(t[16]=e.createTextVNode(" 二级:")),e.createElementVNode("span",{class:e.normalizeClass([n.row.shareType==="UNIFIED"?d.value.shareType==="FIXED_AMOUNT"?"amount":"percentage":n.row.shareType==="FIXED_AMOUNT"?"amount":"percentage"])},e.toDisplayString(R(n.row.shareType,n.row.two)),3)])):e.createCommentVNode("",!0),u.value==="THREE"&&n.row.three?(e.openBlock(),e.createElementBlock("div",at,[t[17]||(t[17]=e.createTextVNode(" 三级:")),e.createElementVNode("span",{class:e.normalizeClass([n.row.shareType==="UNIFIED"?d.value.shareType==="FIXED_AMOUNT"?"amount":"percentage":n.row.shareType==="FIXED_AMOUNT"?"amount":"percentage"])},e.toDisplayString(R(n.row.shareType,n.row.three)),3)])):e.createCommentVNode("",!0)])]),_:1}),e.createVNode(_,{label:"商品状态",width:"140"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",{class:"f12",style:e.normalizeStyle({color:["SELL_ON"].includes(n.status)?"#333":["SELL_OFF"].includes(n.status)?"#999":"#F54319"})},e.toDisplayString(ue(n.status)),5)]),_:1}),e.createVNode(_,{label:"分销状态",width:"140"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",{class:"f12",style:e.normalizeStyle({color:["IN_DISTRIBUTION"].includes(n.distributionStatus)?"#333":"#999"})},e.toDisplayString(ae(n.distributionStatus)),5)]),_:1}),e.createVNode(_,{label:"分销佣金",width:"210"},{default:e.withCtx(n=>{var le,we;return[e.createElementVNode("div",rt,[n.row.salePrices[0]!==n.row.salePrices[n.row.salePrices.length-1]&&n.row.salePrices.length>1?(e.openBlock(),e.createElementBlock("div",st,[e.createElementVNode("span",null,"￥"+e.toDisplayString(se(e.unref(s)(n.row.salePrices[0]),n.row)),1),t[18]||(t[18]=e.createTextVNode(" ~ ")),e.createElementVNode("span",null,"￥"+e.toDisplayString(se(e.unref(s)(n.row.salePrices[n.row.salePrices.length-1]),n.row)),1)])):(e.openBlock(),e.createElementBlock("div",dt,"￥"+e.toDisplayString(se(e.unref(s)(n.row.salePrices[0]),n.row)),1)),e.createVNode(F,{"raw-content":!0,content:xe(n.row.shareType,n.row.salePrices[0],n.row.salePrices[n.row.salePrices.length-1],n.row.one,(le=n.row)==null?void 0:le.two,(we=n.row)==null?void 0:we.three),placement:"bottom",effect:"light"},{default:e.withCtx(()=>[e.createVNode(me,{class:"cup",name:"icon-wenhao",size:"18px",style:{cursor:"pointer","margin-left":"5px"},color:"rgba(77, 77, 77, 0.32)"})]),_:2},1032,["content"])])]}),_:1}),e.createVNode(_,{label:"加入分销时间",width:"160"},{header:e.withCtx(()=>t[19]||(t[19]=[e.createElementVNode("div",null,[e.createElementVNode("span",null,"加入分销时间")],-1)])),default:e.withCtx(n=>[e.createElementVNode("span",it,e.toDisplayString(n.row.createTime),1)]),_:1}),e.createVNode(_,{label:"操作",width:"180",fixed:"right",align:"right"},{default:e.withCtx(({row:n})=>[n.status!=="FORBIDDEN"&&n.canEdit?(e.openBlock(),e.createBlock(p,{key:0,link:"",type:"primary",class:"f12",onClick:le=>W(n)},{default:e.withCtx(()=>t[20]||(t[20]=[e.createTextVNode("编辑")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),(n.status==="SELL_ON"||n.status==="UNUSABLE")&&n.distributionStatus==="CANCEL_DISTRIBUTION"?(e.openBlock(),e.createBlock(p,{key:1,link:"",disabled:n.stock===0,type:"primary",class:"f12",onClick:le=>A(n)},{default:e.withCtx(()=>t[21]||(t[21]=[e.createTextVNode("重新分销")])),_:2},1032,["disabled","onClick"])):e.createCommentVNode("",!0),n.distributionStatus==="IN_DISTRIBUTION"&&n.status==="SELL_ON"?(e.openBlock(),e.createBlock(p,{key:2,link:"",type:"primary",class:"f12 colorRed",onClick:le=>L(n.id)},{default:e.withCtx(()=>t[22]||(t[22]=[e.createTextVNode("取消分销")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),(n.status==="SELL_OFF"||n.status==="PLATFORM_SELL_OFF"||n.status==="SELL_OUT"||n.status==="UNUSABLE")&&n.distributionStatus==="CANCEL_DISTRIBUTION"||n.distributionStatus==="CANCEL_DISTRIBUTION"?(e.openBlock(),e.createBlock(p,{key:3,style:{color:"red"},link:"",type:"primary",class:"f12",onClick:le=>Y(n.id)},{default:e.withCtx(()=>t[23]||(t[23]=[e.createTextVNode("移除")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0)]),_:1})]),_:1},8,["data"])]),e.createVNode(he,{"page-size":N.size,"page-num":N.current,total:N.total,onHandleCurrentChange:q,onHandleSizeChange:H},null,8,["page-size","page-num","total"]),e.createVNode(jo,{modelValue:b.value,"onUpdate:modelValue":t[10]||(t[10]=n=>b.value=n),title:E.value,width:"900px",onClose:K},{footer:e.withCtx(()=>[e.createVNode(p,{onClick:t[9]||(t[9]=n=>b.value=!1)},{default:e.withCtx(()=>t[32]||(t[32]=[e.createTextVNode("取消")])),_:1}),e.createVNode(p,{type:"primary",onClick:ne},{default:e.withCtx(()=>t[33]||(t[33]=[e.createTextVNode("确定")])),_:1})]),default:e.withCtx(()=>[e.createVNode(qo,{ref_key:"formRef",ref:f,model:c,rules:D},{default:e.withCtx(()=>[e.createVNode(te,{label:"分销类型",style:{position:"relative"}},{default:e.withCtx(()=>[e.createVNode(Po,{modelValue:c.shareType,"onUpdate:modelValue":t[2]||(t[2]=n=>c.shareType=n)},{default:e.withCtx(()=>[e.createVNode(Ne,{value:"UNIFIED",disabled:x.value==="see"},{default:e.withCtx(()=>t[24]||(t[24]=[e.createTextVNode("与平台一致")])),_:1},8,["disabled"]),e.createVNode(Ne,{value:"FIXED_AMOUNT",disabled:x.value==="see"},{default:e.withCtx(()=>t[25]||(t[25]=[e.createTextVNode("固定金额")])),_:1},8,["disabled"]),e.createVNode(Ne,{value:"RATE",disabled:x.value==="see"},{default:e.withCtx(()=>t[26]||(t[26]=[e.createTextVNode("百分比")])),_:1},8,["disabled"])]),_:1},8,["modelValue"]),e.createVNode(F,{class:"box-item",effect:"dark",placement:"top"},{content:e.withCtx(()=>t[27]||(t[27]=[e.createElementVNode("div",null,[e.createTextVNode(" 1、一级佣金 > 二级佣金 > 三级佣金；且 一级佣金 >= 0 "),e.createElementVNode("br"),e.createTextVNode(" 2、按百分比：佣金 = 商品实付金额 * 购买商品数 * 百分比"),e.createElementVNode("br"),e.createTextVNode(" 3、按固定金额：佣金 = 固定金额 * 购买商品数"),e.createElementVNode("br"),e.createTextVNode(" 4、风险提示：请谨慎使用固定金额分佣，可能存在资金损失风险 ")],-1)])),default:e.withCtx(()=>[t[28]||(t[28]=e.createElementVNode("i",{class:"iconfont icon-wenhao",style:{color:"#999","font-size":"16px",cursor:"pointer",position:"absolute",right:"0px"}},null,-1))]),_:1})]),_:1}),e.createElementVNode("div",ct,[c.shareType!=="UNIFIED"?(e.openBlock(),e.createBlock(te,{key:0,label:"一级佣金",prop:"one"},{default:e.withCtx(()=>[e.createVNode(ie,{modelValue:c.one,"onUpdate:modelValue":t[3]||(t[3]=n=>c.one=n),min:.01,max:c.shareType==="FIXED_AMOUNT"?1e4:100,type:"number",style:{width:"200px"},disabled:x.value==="see"},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue","max","disabled"])]),_:1})):e.createCommentVNode("",!0),c.shareType!=="UNIFIED"&&(u.value==="TWO"||u.value==="THREE")?(e.openBlock(),e.createBlock(te,{key:1,label:"二级佣金",prop:"two"},{default:e.withCtx(()=>[e.createVNode(ie,{modelValue:c.two,"onUpdate:modelValue":t[4]||(t[4]=n=>c.two=n),type:"number",style:{width:"200px"},disabled:x.value==="see"},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue","disabled"])]),_:1})):e.createCommentVNode("",!0),c.shareType!=="UNIFIED"&&u.value==="THREE"?(e.openBlock(),e.createBlock(te,{key:2,label:"三级佣金",prop:"three"},{default:e.withCtx(()=>[e.createVNode(ie,{modelValue:c.three,"onUpdate:modelValue":t[5]||(t[5]=n=>c.three=n),type:"number",style:{width:"200px"},disabled:x.value==="see"},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue","disabled"])]),_:1})):e.createCommentVNode("",!0),c.shareType==="UNIFIED"?(e.openBlock(),e.createBlock(te,{key:3,label:"一级佣金",prop:"one"},{default:e.withCtx(()=>[e.createVNode(ie,{modelValue:d.value.one,"onUpdate:modelValue":t[6]||(t[6]=n=>d.value.one=n),min:.01,max:d.value.shareType==="FIXED_AMOUNT"?1e4:100,type:"number",style:{width:"200px"},disabled:!0},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.value.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue","max"])]),_:1})):e.createCommentVNode("",!0),c.shareType==="UNIFIED"&&(u.value==="TWO"||u.value==="THREE")?(e.openBlock(),e.createBlock(te,{key:4,label:"二级佣金",prop:"two"},{default:e.withCtx(()=>[e.createVNode(ie,{modelValue:d.value.two,"onUpdate:modelValue":t[7]||(t[7]=n=>d.value.two=n),type:"number",style:{width:"200px"},disabled:!0},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.value.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0),c.shareType==="UNIFIED"&&u.value==="THREE"?(e.openBlock(),e.createBlock(te,{key:5,label:"三级佣金",prop:"three"},{default:e.withCtx(()=>[e.createVNode(ie,{modelValue:d.value.three,"onUpdate:modelValue":t[8]||(t[8]=n=>d.value.three=n),type:"number",style:{width:"200px"},disabled:!0},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.value.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0)]),x.value!=="edit"?(e.openBlock(),e.createBlock(te,{key:0,label:"关联商品",prop:"productId"},{default:e.withCtx(()=>[e.createVNode(p,{type:"primary",round:"",onClick:z},{default:e.withCtx(()=>t[29]||(t[29]=[e.createTextVNode("选择商品")])),_:1})]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["model","rules"]),x.value!=="edit"?(e.openBlock(),e.createBlock(Ee,{key:0,height:"370",data:C.value},{default:e.withCtx(()=>[e.createVNode(_,{label:"商品信息"},{default:e.withCtx(({row:n})=>[e.createElementVNode("div",mt,[e.createElementVNode("div",pt,[e.createVNode(U,{class:"tableCom__img",src:n.pic,fit:"cover",style:{width:"50px",height:"50px"}},null,8,["src"]),e.createElementVNode("div",null,[e.createElementVNode("div",ft,e.toDisplayString(n.productName),1),n.salePrices[0]!==n.salePrices[n.salePrices.length-1]&&n.salePrices.length>1?(e.openBlock(),e.createElementBlock("div",ht,[e.createElementVNode("span",null,"￥"+e.toDisplayString(e.unref(s)(n.salePrices[0])),1),t[30]||(t[30]=e.createTextVNode(" ~ ")),e.createElementVNode("span",null,"￥"+e.toDisplayString(e.unref(s)(n.salePrices[n.salePrices.length-1])),1)])):(e.openBlock(),e.createElementBlock("div",ut,"￥"+e.toDisplayString(e.unref(s)(n.salePrices[0])),1))])])])]),_:1}),e.createVNode(_,{label:"分销佣金",align:"center",width:"200"},{default:e.withCtx(({row:n})=>[n.salePrices[0]!==n.salePrices[n.salePrices.length-1]&&n.salePrices.length>1?(e.openBlock(),e.createElementBlock("div",bt,[e.createElementVNode("span",null,"￥"+e.toDisplayString(re(e.unref(s)(n.salePrices[0]))),1),t[31]||(t[31]=e.createTextVNode(" ~ ")),e.createElementVNode("span",null,"￥"+e.toDisplayString(re(e.unref(s)(n.salePrices[n.salePrices.length-1]))),1)])):(e.openBlock(),e.createElementBlock("div",xt,"￥"+e.toDisplayString(re(e.unref(s)(n.salePrices[0]))),1))]),_:1}),e.createVNode(_,{label:"操作",width:"80"},{default:e.withCtx(({row:n})=>[e.createElementVNode("div",{class:"f12 colorRed",style:{cursor:"pointer"},onClick:le=>G(n.productId)},"移出",8,_t)]),_:1})]),_:1},8,["data"])):e.createCommentVNode("",!0)]),_:1},8,["modelValue","title"]),e.createVNode(ke,{ref_key:"QChooseGoodsPopupRef",ref:g,modelValue:de.value,"onUpdate:modelValue":t[11]||(t[11]=n=>de.value=n),searchConsignmentProduct:!0,distributeProduct:"",pointGoodsList:C.value,onOnConfirm:_e},null,8,["modelValue","pointGoodsList"])],64)}}}),Ho="",fe=(r,g)=>{const N=r.__vccOpts||r;for(const[m,s]of g)N[m]=s;return N},Nt=Object.freeze(Object.defineProperty({__proto__:null,default:fe(gt,[["__scopeId","data-v-d3dc80a1"]])},Symbol.toStringTag,{value:"Module"})),{divTenThousand:oe}=pe(),yt=()=>{const r=(m,s,h,x)=>x.map(b=>{var u,d,f;return`${b==null?void 0:b.num}* ${oe((u=b==null?void 0:b.bonusShare)==null?void 0:u[s])}${((d=b.bonusShare)==null?void 0:d.shareType)==="RATE"?"%":""}${((f=b.bonusShare)==null?void 0:f.shareType)==="RATE"?"*"+oe(b.dealPrice):""}`}).join(" + ").concat(` = ${h}`);function g(m,s,h){let x=new $(0);return"items"in h&&h.items.length&&h.items.forEach(b=>{(s||b[m].userId)&&(x=x.add(oe(b[m].bonus||0)))}),x}return{useSingleCalculationFormula:r,useTotalPrice:m=>{let s=[],h=[],x=[],b=[];return m.items.forEach(f=>{var T,c,D;let E=[];f.orderStatus==="PAID"?E=x:f.orderStatus==="COMPLETED"?E=s:f.orderStatus==="CLOSED"&&(E=h),f.one.bonus&&E.push((T=f==null?void 0:f.one)!=null&&T.userId?oe(f.one.bonus):new $(0)),f.two.bonus&&E.push((c=f==null?void 0:f.two)!=null&&c.userId?oe(f.two.bonus):new $(0)),f.three.bonus&&E.push((D=f==null?void 0:f.two)!=null&&D.userId?oe(f.three.bonus):new $(0)),f.purchase&&f.one.bonus&&E.push(oe(f.one.bonus))}),[m.items[0]].forEach(f=>{var E,T,c,D,y,C,w;f.one.bonus&&b.push((E=f==null?void 0:f.one)!=null&&E.userId?g("one",(T=m.items)==null?void 0:T[0].purchase,m):new $(0)),f.two.bonus&&b.push((c=f==null?void 0:f.two)!=null&&c.userId?g("two",(D=m.items)==null?void 0:D[0].purchase,m):new $(0)),f.three.bonus&&b.push((y=f==null?void 0:f.two)!=null&&y.userId?g("three",(C=m.items)==null?void 0:C[0].purchase,m):new $(0)),f.purchase&&f.one.bonus&&b.push(g("one",(w=m.items)==null?void 0:w[0].purchase,m))}),{completePrice:s.join(" + ")+" = "+s.reduce((f,E)=>f.plus(E),new $(0)),closedPrice:h.join(" + ")+" = "+h.reduce((f,E)=>f.plus(E),new $(0)),toSelledPrice:x.join(" + ")+" = "+x.reduce((f,E)=>f.plus(E),new $(0)),totalPrice:b.join(" + ")+" = "+b.reduce((f,E)=>f.plus(E),new $(0))}}}},Vt={style:{"margin-top":"10px"}},Ct={class:"head"},Et={class:"buyer-container"},wt={class:"buyer"},Tt={style:{color:"#f00"}},kt={key:0,style:{color:"#f54319","margin-left":"5px"}},St={class:"last"},Dt={style:{color:"#f54319"}},It={class:"content"},$t={class:"goods"},Bt={class:"goods__pic"},Ft=["src"],Ot={class:"goods__info"},Ut={class:"goods__info-flex"},Lt={class:"goods__info-flex--name",style:{"line-height":"16px"}},At={key:0,class:"virtual_product"},zt={key:1,class:"goods__info-flex--name",style:{"line-height":"16px"}},Rt={key:0,class:"virtual_product"},Pt={class:"goods__info-flex--num"},qt={class:"goods__info-flex"},jt={class:"goods__info-flex--specs"},Ht={key:1,class:"goods__info-flex--specs"},Xt={class:"goods__info-flex--price"},Wt={class:"content__right1"},Gt={class:"content__right1--item"},Mt={class:"name"},Yt={style:{color:"#f54319"},class:"cup"},Jt={class:"content__right1--item"},Kt={class:"name"},Zt={style:{color:"#f54319"}},Qt={class:"content__right1--item"},vt={class:"name"},eo={style:{color:"#f54319"}},to={class:"content__right2"},oo={class:"content__right3"},no={key:0,class:"content__right3--item"},lo={key:1},ao={key:1,class:"content__right3--item"},ro={key:1},so={key:2,class:"content__right3--item"},io={key:1},co={class:"content__right3--item"},mo=e.defineComponent({__name:"distributionOrderTable",props:{orderInfo:{type:Object,default(){return{id:null,type:null,name:"",url:"",append:""}}},toolsDisabled:{type:Boolean,default:!1},checked:{type:Boolean,default:!1}},emits:["update:checked","change"],setup(r,{emit:g}){const{useSingleCalculationFormula:N,useTotalPrice:m}=yt();Se();const{divTenThousand:s,divHundred:h}=pe(),x=r,b=g,u=D=>{b("update:checked",D),b("change")};function d(D,y){let C=new $(0);return"items"in x.orderInfo&&x.orderInfo.items.length&&x.orderInfo.items.forEach(w=>{(y||w[D].userId)&&(C=C.add(s(w[D].bonus||0)))}),C}function f(D){let y=new $(0);return"items"in x.orderInfo&&x.orderInfo.items.length&&x.orderInfo.items.forEach(C=>{D&&C.orderStatus!==D||(C.one.bonus&&(y=y.add(s(C.one.bonus))),C.two.bonus&&(y=y.add(s(C.two.bonus))),C.three.bonus&&(y=y.add(s(C.three.bonus))),C.purchase&&C.one.userId&&(y=y.add(s(C.one.bonus))))}),y.toNumber()}function E(D){return D==="COMPLETED"?"已赚":D==="CLOSED"?"已失效":"待结算"}const T=De.useRouter(),c=(D,y)=>{const C={orderNo:D},w=y[0],X=w!=null&&w.packageId?w.packageId:"";X&&(C.packageId=X),T.push({name:"detailsIndex",query:C})};return(D,y)=>{var q,H,K,I,k,A,Z,W,L,Y,V,a,j,G,Q,v,ee,R,J,O,B,ae,ue,be,re,se,xe,de,_e,l,t;const C=e.resolveComponent("el-checkbox"),w=e.resolveComponent("el-tooltip"),X=e.resolveComponent("el-button"),ne=e.resolveComponent("el-table-column"),z=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Vt,[e.createElementVNode("div",Ct,[e.createVNode(C,{"model-value":r.checked,disabled:r.toolsDisabled,style:{"margin-right":"12px"},"onUpdate:modelValue":u},null,8,["model-value","disabled"]),e.createElementVNode("div",null,"订单号："+e.toDisplayString(r.orderInfo.orderNo),1),e.createElementVNode("div",null,"下单时间："+e.toDisplayString(r.orderInfo.createTime),1),e.createElementVNode("div",Et,[e.createVNode(w,{disabled:r.toolsDisabled,content:"买家："+r.orderInfo.buyerNickname,"raw-content":!0},{default:e.withCtx(()=>[e.createElementVNode("span",wt,"买家："+e.toDisplayString(r.orderInfo.buyerNickname),1)]),_:1},8,["disabled","content"]),r.orderInfo.items[0].purchase?(e.openBlock(),e.createBlock(w,{key:0,disabled:r.toolsDisabled,"raw-content":!0,content:r.orderInfo.items[0].purchase?e.unref(N)((q=r.orderInfo.items)==null?void 0:q[0],"one",d("one",!0),r.orderInfo.items):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o,i;return[e.createElementVNode("span",null,[y[1]||(y[1]=e.createElementVNode("span",null,"(",-1)),e.createElementVNode("span",Tt,"￥"+e.toDisplayString(r.orderInfo.items[0].one.userId||(o=r.orderInfo.items)!=null&&o[0].purchase?d("one",(i=r.orderInfo.items)==null?void 0:i[0].purchase):0),1),y[2]||(y[2]=e.createElementVNode("span",null,")",-1)),r.orderInfo.items[0].purchase?(e.openBlock(),e.createElementBlock("span",kt,"内购")):e.createCommentVNode("",!0)])]}),_:1},8,["disabled","content"])):e.createCommentVNode("",!0)]),e.createElementVNode("div",St,[y[3]||(y[3]=e.createTextVNode(" 实付款：")),e.createElementVNode("span",Dt,"￥"+e.toDisplayString(e.unref(s)(r.orderInfo.payAmount).toFixed(2)),1)]),e.createVNode(X,{type:"primary",size:"small",text:"",style:{"margin-left":"auto",position:"sticky",right:"0"},onClick:y[0]||(y[0]=o=>c(r.orderInfo.orderNo,r.orderInfo))},{default:e.withCtx(()=>y[4]||(y[4]=[e.createTextVNode(" 查看详情 ")])),_:1})]),e.createElementVNode("div",It,[e.createVNode(z,{data:r.orderInfo.items,border:"",style:{width:"433px","flex-shrink":"0"},"row-style":{height:"100px"}},{default:e.withCtx(()=>[e.createVNode(ne,{prop:"name"},{default:e.withCtx(({row:o})=>[e.createElementVNode("div",$t,[e.createElementVNode("div",Bt,[e.createElementVNode("img",{src:o.image,style:{width:"68px",height:"68px"}},null,8,Ft)]),e.createElementVNode("div",Ot,[e.createElementVNode("div",Ut,[o.productName.length>=32?(e.openBlock(),e.createBlock(w,{key:0,disabled:r.toolsDisabled,class:"box-item",effect:"dark",content:o.productName,placement:"bottom-end"},{default:e.withCtx(()=>[e.createElementVNode("div",Lt,[o.productType==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",At,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.productName),1)])]),_:2},1032,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",zt,[o.productType==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",Rt,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.productName),1)])),e.createElementVNode("div",Pt,"￥"+e.toDisplayString(e.unref(s)(o.dealPrice)),1)]),e.createElementVNode("div",qt,[o.specs.join("、").length>15?(e.openBlock(),e.createBlock(w,{key:0,disabled:r.toolsDisabled,class:"box-item",effect:"dark",content:o.specs.join("、"),placement:"bottom"},{default:e.withCtx(()=>[e.createElementVNode("div",jt,e.toDisplayString(o.specs&&o.specs.join("、")),1)]),_:2},1032,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",Ht,e.toDisplayString(o.specs&&o.specs.join("、")),1)),e.createElementVNode("div",Xt,"x"+e.toDisplayString(o.num),1)])])])]),_:1})]),_:1},8,["data"]),e.createElementVNode("div",Wt,[e.createElementVNode("div",Gt,[e.createElementVNode("span",Mt,e.toDisplayString(r.orderInfo.items[0].one.name),1),e.createElementVNode("span",null,e.toDisplayString(r.orderInfo.items[0].one.mobile),1),e.createElementVNode("span",null,[e.createVNode(w,{disabled:r.toolsDisabled,"raw-content":!0,content:r.orderInfo.items[0].one.userId?e.unref(N)((H=r.orderInfo.items)==null?void 0:H[0],"one",d("one",(K=r.orderInfo.items)==null?void 0:K[0].purchase),r.orderInfo.items):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o;return[e.createElementVNode("span",null,[y[5]||(y[5]=e.createTextVNode(" 一级佣金：")),e.createElementVNode("span",Yt,"￥"+e.toDisplayString(r.orderInfo.items[0].one.userId?d("one",(o=r.orderInfo.items)==null?void 0:o[0].purchase):0),1)])]}),_:1},8,["disabled","content"])])]),e.createElementVNode("div",Jt,[e.createElementVNode("span",Kt,e.toDisplayString(r.orderInfo.items[0].two.name),1),e.createElementVNode("span",null,e.toDisplayString(r.orderInfo.items[0].two.mobile),1),e.createElementVNode("span",null,[e.createVNode(w,{disabled:r.toolsDisabled,"raw-content":!0,content:r.orderInfo.items[0].two.userId?e.unref(N)((I=r.orderInfo.items)==null?void 0:I[0],"two",d("two",(k=r.orderInfo.items)==null?void 0:k[0].purchase),r.orderInfo.items):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o;return[e.createElementVNode("span",null,[y[6]||(y[6]=e.createTextVNode(" 二级佣金：")),e.createElementVNode("span",Zt,"￥"+e.toDisplayString(d("two",(o=r.orderInfo.items)==null?void 0:o[0].purchase)),1)])]}),_:1},8,["disabled","content"])])]),e.createElementVNode("div",Qt,[e.createElementVNode("span",vt,e.toDisplayString(r.orderInfo.items[0].three.name),1),e.createElementVNode("span",null,e.toDisplayString(r.orderInfo.items[0].three.mobile),1),e.createElementVNode("span",null,[e.createVNode(w,{disabled:r.toolsDisabled,"raw-content":!0,content:r.orderInfo.items[0].three.userId?e.unref(N)((A=r.orderInfo.items)==null?void 0:A[0],"three",d("three",(Z=r.orderInfo.items)==null?void 0:Z[0].purchase),r.orderInfo.items):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o;return[e.createElementVNode("span",null,[y[7]||(y[7]=e.createTextVNode(" 三级佣金：")),e.createElementVNode("span",eo,"￥"+e.toDisplayString(d("three",(o=r.orderInfo.items)==null?void 0:o[0].purchase)),1)])]}),_:1},8,["disabled","content"])])])]),e.createElementVNode("div",to,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.orderInfo.items,o=>(e.openBlock(),e.createElementBlock("div",{key:o,class:"content__right2--item",style:e.normalizeStyle({color:E(o.orderStatus)==="待结算"?"#FD9224":E(o.orderStatus)==="已赚"?"#00BB2C":"#999"})},e.toDisplayString(E(o.orderStatus)),5))),128))]),e.createElementVNode("div",oo,[f("PAID")?(e.openBlock(),e.createElementBlock("div",no,[(V=(Y=(L=(W=r.orderInfo)==null?void 0:W.items)==null?void 0:L[0])==null?void 0:Y.one)!=null&&V.bonus&&f("PAID")?(e.openBlock(),e.createBlock(w,{key:0,disabled:r.toolsDisabled,"raw-content":!0,content:e.unref(m)(r.orderInfo).toSelledPrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o,i,p,_;return[e.createTextVNode("待结算："+e.toDisplayString((_=(p=(i=(o=r.orderInfo)==null?void 0:o.items)==null?void 0:i[0])==null?void 0:p.one)!=null&&_.bonus?f("PAID"):0),1)]}),_:1},8,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",lo,"待结算："+e.toDisplayString((Q=(G=(j=(a=r.orderInfo)==null?void 0:a.items)==null?void 0:j[0])==null?void 0:G.one)!=null&&Q.bonus?f("PAID"):0),1))])):e.createCommentVNode("",!0),f("COMPLETED")?(e.openBlock(),e.createElementBlock("div",ao,[(J=(R=(ee=(v=r.orderInfo)==null?void 0:v.items)==null?void 0:ee[0])==null?void 0:R.one)!=null&&J.bonus&&f("COMPLETED")?(e.openBlock(),e.createBlock(w,{key:0,disabled:r.toolsDisabled,"raw-content":!0,content:e.unref(m)(r.orderInfo).completePrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o,i,p,_;return[e.createTextVNode("已赚："+e.toDisplayString((_=(p=(i=(o=r.orderInfo)==null?void 0:o.items)==null?void 0:i[0])==null?void 0:p.one)!=null&&_.bonus?f("COMPLETED"):0),1)]}),_:1},8,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",ro,"已赚："+e.toDisplayString((ue=(ae=(B=(O=r.orderInfo)==null?void 0:O.items)==null?void 0:B[0])==null?void 0:ae.one)!=null&&ue.bonus?f("COMPLETED"):0),1))])):e.createCommentVNode("",!0),f("CLOSED")?(e.openBlock(),e.createElementBlock("div",so,[(xe=(se=(re=(be=r.orderInfo)==null?void 0:be.items)==null?void 0:re[0])==null?void 0:se.one)!=null&&xe.bonus&&f("CLOSED")?(e.openBlock(),e.createBlock(w,{key:0,disabled:r.toolsDisabled,"raw-content":!0,content:e.unref(m)(r.orderInfo).closedPrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o,i,p,_;return[e.createTextVNode("已失效："+e.toDisplayString((_=(p=(i=(o=r.orderInfo)==null?void 0:o.items)==null?void 0:i[0])==null?void 0:p.one)!=null&&_.bonus?f("CLOSED"):0),1)]}),_:1},8,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",io,"已失效："+e.toDisplayString((t=(l=(_e=(de=r.orderInfo)==null?void 0:de.items)==null?void 0:_e[0])==null?void 0:l.one)!=null&&t.bonus?f("CLOSED"):0),1))])):e.createCommentVNode("",!0),e.createElementVNode("div",co,[e.createVNode(w,{disabled:r.toolsDisabled,"raw-content":!0,content:e.unref(m)(r.orderInfo).totalPrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var o,i,p,_;return[e.createTextVNode("佣金合计："+e.toDisplayString((_=(p=(i=(o=r.orderInfo)==null?void 0:o.items)==null?void 0:i[0])==null?void 0:p.one)!=null&&_.bonus?f():0),1)]}),_:1},8,["disabled","content"])])])])])}}}),Go="",po=fe(mo,[["__scopeId","data-v-9192335f"]]),fo={class:"description"},ho=e.defineComponent({__name:"orderIllustration",props:{orderIllustrationShow:{type:Boolean,default:!1}},emits:["update:orderIllustrationShow","Illustration"],setup(r,{emit:g}){const N=r,m=g,s=e.computed({get:()=>N.orderIllustrationShow,set:b=>{m("update:orderIllustrationShow",b)}}),h=[{settlementstatus:"待结算",description:"订单未完结（可能涉及退款退货等），分销佣金暂不计入累计佣金"},{settlementstatus:"已赚",description:"商品没有退款(或退款失败) ，对应佣金统计到【累计佣金】中"},{settlementstatus:"已失效",description:"商品已退款成功，无法获得佣金"}],x=[{commission:"按百分比",description:"一级佣金 = （商品A实付金额 * 一级佣金参数 * 商品数）+（商品B实付金额 * 一级佣金参数 * 商品数）"},{commission:"按固定金额",description:"一级佣金  =  一级佣金 * 商品数"},{commission:"佣金合计",description:"佣金合计  =  一级佣金 + 二级佣金 + 三级佣金 + 内购佣金   "}];return(b,u)=>{const d=e.resolveComponent("ElTableEmpty"),f=e.resolveComponent("el-table-column"),E=e.resolveComponent("el-table"),T=e.resolveComponent("el-dialog");return e.openBlock(),e.createBlock(T,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),title:"分销订单说明",width:"800px",center:"","close-on-click-modal":!1},{default:e.withCtx(()=>[e.createElementVNode("div",fo,[u[1]||(u[1]=e.createElementVNode("div",{class:"description__content"},[e.createTextVNode("    本店铺分销商品产生的分销订单，分销佣金基于剔除营销成本后的实际成交金额计算，分销订单上的价格即为商品的实"),e.createElementVNode("br"),e.createTextVNode(" 际成交价格。内购功能开启后，分销商购买分销商品可获得一级分销佣金。 ")],-1)),e.createVNode(E,{data:h,border:"",style:{width:"600px"},"header-cell-style":{"background-color":"#BEBEBE","font-weight":"normal",color:"#000",fontWeight:"bold"},"cell-style":{color:"#666"}},{empty:e.withCtx(()=>[e.createVNode(d)]),default:e.withCtx(()=>[e.createVNode(f,{prop:"settlementstatus",label:"结算状态",width:"100"}),e.createVNode(f,{prop:"description",label:"说明"})]),_:1}),e.createVNode(E,{data:x,border:"","header-cell-style":{"font-weight":"normal",color:"#000",fontWeight:"bold"},"cell-style":{color:"#666"},style:{marginTop:"15px"}},{empty:e.withCtx(()=>[e.createVNode(d)]),default:e.withCtx(()=>[e.createVNode(f,{prop:"commission",label:"佣金试算",width:"100"}),e.createVNode(f,{prop:"description",label:"说明"})]),_:1})])]),_:1},8,["modelValue"])}}}),Mo="",uo=fe(ho,[["__scopeId","data-v-8f738c26"]]),bo={style:{padding:"0 16px"}},xo={class:"count"},_o={style:{"font-size":"16px"}},go={style:{color:"red"}},No={style:{"font-size":"16px"}},yo={style:{color:"#ccc"}},Vo={style:{"font-size":"16px"}},Co={style:{position:"relative"}},Eo={class:"tbhead"},wo=e.defineComponent({__name:"DistributionOrder",emits:["selection-change"],setup(r,{emit:g}){const{divTenThousand:N}=pe(),m=e.reactive({orderNo:"",productName:"",shopName:"",buyerNickname:"",date:"",startTime:"",endTime:"",status:"",distributorPhone:"",purchase:""}),s=e.reactive({current:1,size:10,total:0}),h=e.ref([]),x=e.ref({total:"",unsettled:"",invalid:""}),b=[{label:"订单号",labelWidth:60,prop:"orderNo",valueType:"copy",fieldProps:{placeholder:"请输入订单号",maxlength:20}},{label:"手机号",prop:"distributorPhone",valueType:"input",fieldProps:{placeholder:"各级分销商手机号",maxlength:11,type:"text","v-model.number":"",oninput:"value=value.replace(/[^\\d]/g,'')",pattern:"^1[3-9]\\d{9}$"}},{label:"买家昵称",prop:"buyerNickname",valueType:"copy",fieldProps:{placeholder:"请输入买家昵称",maxlength:30}},{label:"商品名称",prop:"productName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称",maxlength:30}},{label:"内购",prop:"purchase",valueType:"select",options:[{label:"全部",value:""},{label:"内购",value:"true"},{label:"非内购",value:"false"}],fieldProps:{placeholder:"请选择"}},{label:"下单时间",prop:"date",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"YYYY-MM-DD HH:mm:ss"}}];u();async function u(){const{code:V,data:a,msg:j}=await Pe({current:s.current,size:s.size,...m});V===200&&a?(h.value=a.page.records,x.value=a.statistic,s.total=a.page.total):S.ElMessage.error(j||"获取分销订单失败")}const d=()=>{s.current=1,(m==null?void 0:m.date.length)>0&&(m.startTime=m.date[0],m.endTime=m.date[1]),u()},f=()=>{m.orderNo="",m.productName="",m.shopName="",m.buyerNickname="",m.date="",m.startTime="",m.endTime="",s.current=1,u()},E=async()=>{let V={};if(C().length)V.orderNos=C().map(G=>G.orderNo)||[];else{const{orderNo:G,productName:Q,shopName:v,buyerNickname:ee,startTime:R,endTime:J,status:O}=m;V={orderNo:G,productName:Q,shopName:v,buyerNickname:ee,startTime:R,endTime:J,status:O}}const{code:a,msg:j}=await Xe(V);a===200?S.ElMessage.success({message:j||"导出成功"}):S.ElMessage.error({message:j||"导出失败"})},T=e.ref(!1),c=e.ref(!1),D=V=>{h.value.forEach(a=>{a.checked=V}),c.value=!1},y=()=>{const V=h.value.filter(a=>a.checked).length;T.value=V===h.value.length,c.value=V>0&&V<h.value.length},C=()=>h.value.filter(V=>V.checked),w=g;e.watch(()=>h.value.map(V=>V.checked),()=>{w("selection-change",C())},{deep:!0});const X=V=>{s.current=V,u()},ne=V=>{s.current=1,s.size=V,u()},z=new Ie,q=e.ref(" "),H=e.ref("全部订单"),K=V=>{m.status=V,u()},I=V=>{if(q.value=" ",H.value=V,H.value==="近一个月订单"){const a=z.getLastMonth(new Date);k(a)}else if(H.value==="近三个月订单"){const a=z.getLastThreeMonth(new Date);k(a)}else m.startTime="",m.endTime="",u()},k=async V=>{const a=z.getYMDs(new Date);m.startTime=V,m.endTime=a,u()},A=e.ref(!1),Z=V=>{A.value=V},W=()=>{A.value=!0},L=e.ref(!1),Y=async()=>{L.value=!0,await e.nextTick(),L.value=!1};return(V,a)=>{const j=e.resolveComponent("el-button"),G=e.resolveComponent("el-config-provider"),Q=e.resolveComponent("el-dropdown-item"),v=e.resolveComponent("el-dropdown-menu"),ee=e.resolveComponent("el-dropdown"),R=e.resolveComponent("el-tab-pane"),J=e.resolveComponent("el-tabs"),O=e.resolveComponent("el-checkbox");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(G,{"empty-values":[void 0,null]},{default:e.withCtx(()=>[e.createVNode(ge,{modelValue:m,"onUpdate:modelValue":a[0]||(a[0]=B=>m=B),columns:b,onSearchHandle:d,onHandleReset:f},{otherOperations:e.withCtx(()=>[e.createVNode(j,{type:"primary",onClick:E},{default:e.withCtx(()=>a[4]||(a[4]=[e.createTextVNode("导出")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e.createElementVNode("div",bo,[e.createElementVNode("div",xo,[e.createElementVNode("span",null,[a[6]||(a[6]=e.createTextVNode("累计总佣金： ")),e.createElementVNode("text",null,[a[5]||(a[5]=e.createTextVNode("￥ ")),e.createElementVNode("text",_o,e.toDisplayString(e.unref(N)(x.value.total).toFixed(2)),1)])]),e.createElementVNode("span",null,[a[8]||(a[8]=e.createTextVNode("待结算总佣金： ")),e.createElementVNode("text",go,[a[7]||(a[7]=e.createTextVNode("￥ ")),e.createElementVNode("text",No,e.toDisplayString(e.unref(N)(x.value.unsettled).toFixed(2)),1)])]),e.createElementVNode("span",null,[a[10]||(a[10]=e.createTextVNode("已失效总佣金：")),e.createElementVNode("text",yo,[a[9]||(a[9]=e.createTextVNode("￥ ")),e.createElementVNode("text",Vo,e.toDisplayString(e.unref(N)(x.value.invalid).toFixed(2)),1)])])])]),e.createElementVNode("div",Co,[e.createVNode(J,{modelValue:q.value,"onUpdate:modelValue":a[1]||(a[1]=B=>q.value=B),style:{padding:"0 16px"},onTabChange:K},{default:e.withCtx(()=>[e.createVNode(R,{name:" "},{label:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(H.value),1),e.createVNode(ee,{placement:"bottom-end",trigger:"click",onCommand:I},{dropdown:e.withCtx(()=>[e.createVNode(v,null,{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(["近一个月订单","近三个月订单","全部订单"],B=>e.createVNode(Q,{key:B,command:B},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(B),1)]),_:2},1032,["command"])),64))]),_:1})]),default:e.withCtx(()=>[e.createElementVNode("span",{class:"el-dropdown-link",style:{height:"40px"},onClick:e.withModifiers(()=>{},["stop"])},[e.createVNode(e.unref(S.ElIcon),{class:"el-icon--right",style:{position:"relative",top:"13px"}},{default:e.withCtx(()=>[e.createVNode(e.unref(ye.ArrowDown))]),_:1})]),e.createVNode(e.unref(S.ElIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(ye.ArrowDown))]),_:1})]),_:1})]),_:1}),e.createVNode(R,{label:"已付款",name:"PAID"}),e.createVNode(R,{label:"已完成",name:"COMPLETED"}),e.createVNode(R,{label:"已关闭",name:"CLOSED"})]),_:1},8,["modelValue"]),e.createVNode(me,{name:"icon-wenhao",size:"18px",color:"#666",style:{position:"absolute",right:"16px",top:"12px",cursor:"pointer"},onClick:W})]),e.createElementVNode("div",{class:"distribution_order_table_container",onScroll:Y},[e.createElementVNode("div",Eo,[e.createVNode(O,{modelValue:T.value,"onUpdate:modelValue":a[2]||(a[2]=B=>T.value=B),style:{"margin-left":"16px"},indeterminate:c.value,onChange:D},null,8,["modelValue","indeterminate"]),a[11]||(a[11]=e.createElementVNode("div",{class:"tbhead__goods"},"商品信息",-1)),a[12]||(a[12]=e.createElementVNode("div",{class:"tbhead__detail"},"分佣详情",-1)),a[13]||(a[13]=e.createElementVNode("div",{class:"tbhead__state"},"结算状态",-1)),a[14]||(a[14]=e.createElementVNode("div",{class:"tbhead__total"},"佣金结算",-1))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,B=>(e.openBlock(),e.createBlock(po,{key:B.orderNo,checked:B.checked,"onUpdate:checked":ae=>B.checked=ae,"tools-disabled":L.value,"order-info":B,onChange:y},null,8,["checked","onUpdate:checked","tools-disabled","order-info"]))),128))],32),e.createVNode(he,{"page-num":s.current,"page-size":s.size,total:s.total,onHandleCurrentChange:X,onHandleSizeChange:ne},null,8,["page-num","page-size","total"]),e.createVNode(uo,{"order-illustration-show":A.value,"onUpdate:orderIllustrationShow":a[3]||(a[3]=B=>A.value=B),onIllustration:Z},null,8,["order-illustration-show"])],64)}}}),Yo="",To=Object.freeze(Object.defineProperty({__proto__:null,default:fe(wo,[["__scopeId","data-v-524b46c9"]])},Symbol.toStringTag,{value:"Module"})),ko={class:"tab_container"},So={class:"f12 color51",style:{"margin-left":"6px"}},Do={class:"ellipsis"},Io=["onClick"],$o={key:0},Bo={key:1},Fo={key:2},Oo={style:{display:"flex","align-items":"center"}},Uo=["src"],Lo={style:{"text-align":"left"}},Ao={style:{width:"80px","text-align":"right"}},zo=e.defineComponent({__name:"WholeSaler",setup(r){const g=e.reactive({name:"",mobile:"",date:"",startTime:"",endTime:"",status:"SUCCESS"}),{divTenThousand:N}=pe(),m=e.reactive({current:1,size:10,total:0}),s=e.ref([]),h=e.ref([]),x=e.ref(!1),b=e.reactive({current:1,total:0,size:10,list:[],userId:""}),u=e.ref(!1),d=e.reactive({current:1,total:0,size:10,list:[],userId:"",rank:""}),f=[{label:"姓名",labelWidth:45,prop:"name",valueType:"copy",fieldProps:{placeholder:"请输入姓名",maxlength:20}},{label:"手机号",prop:"mobile",labelWidth:60,valueType:"copy",fieldProps:{placeholder:"请输入手机号",maxlength:30}},{label:"申请时间",prop:"date",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"YYYY-MM-DD HH:mm:ss"}}];z();const E=I=>{m.current=I,z()},T=I=>{m.current=1,m.size=I,z()},c=()=>{m.current=1,g.date.length>0&&(console.log("searchConfig.date",g.date),g.startTime=g.date[0],g.endTime=g.date[1]),z()},D=I=>{g.status==="SUCCESS"&&(x.value=!0,b.userId=I,q(I))},y=()=>{g.status==="SUCCESS"&&(u.value=!0,H())},C=()=>{b.current=1,b.size=10,b.list=[],b.userId=""},w=()=>{d.current=1,d.size=10,d.list=[],d.userId="",d.rank=""},X=I=>{b.current=I,q()},ne=I=>{b.current=1,b.size=I,q()};async function z(){const{code:I,data:k}=await qe({...g,...m});I===200?(s.value=k.records,m.total=k.total):S.ElMessage.error("获取分销商失败")}async function q(I){const{code:k,data:A}=await je({userId:I||b.userId,current:b.current,size:b.size});k&&k===200?(b.list=A.records,b.total=A.total,x.value=!0):(S.ElMessage.error("获取下线失败"),x.value=!1)}async function H(){const{code:I,data:k}=await He({userId:d.userId,current:d.current,size:d.size});I&&I===200?(d.list=k.records,d.total=k.total,d.rank=k.rank,u.value=!0):(S.ElMessage.error("获取排行失败"),u.value=!1)}const K=()=>{m.current=1,g.date="",g.endTime="",g.startTime="",g.mobile="",g.name="",z()};return(I,k)=>{const A=e.resolveComponent("el-image"),Z=e.resolveComponent("el-row"),W=e.resolveComponent("el-link"),L=e.resolveComponent("el-table-column"),Y=e.resolveComponent("el-table"),V=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ge,{modelValue:g,"onUpdate:modelValue":k[0]||(k[0]=a=>g=a),columns:f,onSearchHandle:c,onHandleReset:K},null,8,["modelValue"]),e.createElementVNode("div",ko,[g.status==="SUCCESS"?(e.openBlock(),e.createElementBlock("div",{key:0,style:{color:"#0f40f5",cursor:"pointer",float:"right"},onClick:y},"佣金排行榜")):e.createCommentVNode("",!0)]),e.createVNode(e.unref($e),{"checked-item":h.value,"onUpdate:checkedItem":k[1]||(k[1]=a=>h.value=a),data:s.value,"no-border":"",class:"q-table"},{default:e.withCtx(()=>[e.createVNode(M,{label:"分销商信息",width:"300"},{default:e.withCtx(({row:a})=>[e.createElementVNode("div",null,[e.createVNode(Z,{justify:"space-between"},{default:e.withCtx(()=>[e.createVNode(A,{src:a.avatar,style:{width:"52px",height:"52px"}},null,8,["src"]),e.createElementVNode("div",So,[e.createElementVNode("div",Do,e.toDisplayString(a.name),1),e.createElementVNode("div",null,e.toDisplayString(a.mobile),1)])]),_:2},1024)])]),_:1}),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:0,label:"团队成员",width:"140",align:"left"},{default:e.withCtx(({row:a})=>[e.createElementVNode("div",{class:"column",onClick:j=>D(a.userId)},[e.createVNode(W,{type:"primary",link:""},{default:e.withCtx(()=>[e.createTextVNode("一级："+e.toDisplayString(a.one),1)]),_:2},1024),e.createVNode(W,{type:"primary",link:""},{default:e.withCtx(()=>[e.createTextVNode("二级："+e.toDisplayString(a.two),1)]),_:2},1024),e.createVNode(W,{type:"primary",link:""},{default:e.withCtx(()=>[e.createTextVNode("三级："+e.toDisplayString(a.three),1)]),_:2},1024)],8,Io)]),_:1})):e.createCommentVNode("",!0),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:1,label:"累计佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:a})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(N)(a.total)),1)]),_:1})):e.createCommentVNode("",!0),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:2,label:"待提现佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:a})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(N)(a.undrawn)),1)]),_:1})):e.createCommentVNode("",!0),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:3,label:"待结算佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:a})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(N)(a.unsettled)),1)]),_:1})):e.createCommentVNode("",!0),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:4,label:"已失效佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:a})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(N)(a.invalid)),1)]),_:1})):e.createCommentVNode("",!0),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:5,label:"上级",width:"150"},{default:e.withCtx(({row:a})=>[e.createElementVNode("div",null,e.toDisplayString(a.referrer||"平台"),1)]),_:1})):e.createCommentVNode("",!0),e.createVNode(M,{label:"申请时间",width:"200",align:"left"},{default:e.withCtx(({row:a})=>[e.createElementVNode("span",null,e.toDisplayString(a.createTime),1)]),_:1}),g.status==="SUCCESS"?(e.openBlock(),e.createBlock(M,{key:6,label:"成为分销商时间",width:"200",align:"right"},{default:e.withCtx(({row:a})=>[e.createElementVNode("span",null,e.toDisplayString(a.passTime),1)]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["checked-item","data"]),e.createVNode(he,{"page-num":m.current,"page-size":m.size,total:m.total,onHandleCurrentChange:E,onHandleSizeChange:T},null,8,["page-num","page-size","total"]),e.createVNode(V,{modelValue:x.value,"onUpdate:modelValue":k[2]||(k[2]=a=>x.value=a),width:"554px",title:"团队成员",onClose:C},{default:e.withCtx(()=>[e.createVNode(Y,{data:b.list,"header-cell-style":{background:"#f6f8fa",fontSize:"12px",color:"#909399","font-weight":"bold"},"cell-style":{fontSize:"12px",color:"#333333"},height:"400"},{default:e.withCtx(()=>[e.createVNode(L,{label:"姓名",align:"center"},{default:e.withCtx(({row:a})=>[e.createTextVNode(e.toDisplayString(a.name?a.name:a.nickname),1)]),_:1}),e.createVNode(L,{label:"层级",align:"center"},{default:e.withCtx(({row:a})=>[e.createTextVNode(e.toDisplayString(a.level==="ONE"?"一级":a.level==="TWO"?"二级":"三级"),1)]),_:1}),e.createVNode(L,{label:"累计消费",align:"center",prop:"consumption"},{default:e.withCtx(({row:a})=>[e.createTextVNode(e.toDisplayString(e.unref(N)(a.consumption)),1)]),_:1}),e.createVNode(L,{label:"订单数",align:"center",prop:"orderCount"})]),_:1},8,["data"]),e.createVNode(he,{"page-num":b.current,"page-size":b.size,total:b.total,onHandleCurrentChange:X,onHandleSizeChange:ne},null,8,["page-num","page-size","total"])]),_:1},8,["modelValue"]),e.createVNode(V,{modelValue:u.value,"onUpdate:modelValue":k[3]||(k[3]=a=>u.value=a),width:"717",title:"佣金排行榜",onClose:w},{default:e.withCtx(()=>[e.createVNode(Y,{data:d.list,"header-cell-style":{background:"#F7F8FA",fontSize:"14px",color:"#333","font-weight":"bold",height:"48px"},"cell-style":{color:"#333333"},height:"500"},{default:e.withCtx(()=>[e.createVNode(L,{label:"排名",align:"center",type:"index",width:"120"},{default:e.withCtx(({$index:a})=>[a===0?(e.openBlock(),e.createElementBlock("span",$o,[e.createVNode(me,{svg:"",name:"icon-svg2",style:{width:"34px",height:"27px"}})])):e.createCommentVNode("",!0),a===1?(e.openBlock(),e.createElementBlock("span",Bo,[e.createVNode(me,{svg:"",name:"icon-a-svg1",style:{width:"34px",height:"27px"}})])):e.createCommentVNode("",!0),a===2?(e.openBlock(),e.createElementBlock("span",Fo,[e.createVNode(me,{svg:"",name:"icon-a-svg2",style:{width:"34px",height:"27px"}})])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(L,{label:"用户昵称",prop:"name"},{default:e.withCtx(({row:a})=>[e.createElementVNode("div",Oo,[e.createElementVNode("img",{src:a.avatar,alt:"",style:{"margin-right":"5px",width:"50px",height:"50px","border-radius":"50%"}},null,8,Uo),e.createElementVNode("span",null,e.toDisplayString(a.name),1)])]),_:1}),e.createVNode(L,{label:"累计佣金(元)",prop:"total",width:"160"},{default:e.withCtx(({row:a})=>[e.createElementVNode("div",Lo,[e.createElementVNode("div",Ao,e.toDisplayString(e.unref(N)(a.total)),1)])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}}),Ko="",Ro=Object.freeze(Object.defineProperty({__proto__:null,default:fe(zo,[["__scopeId","data-v-3fee21d5"]])},Symbol.toStringTag,{value:"Module"}));return Fe});
