(function(e,_){typeof exports=="object"&&typeof module<"u"?module.exports=_(require("vue"),require("@/apis/http"),require("@/composables/useConvert"),require("vue-router"),require("@/components/PageManage.vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["vue","@/apis/http","@/composables/useConvert","vue-router","@/components/PageManage.vue","element-plus"],_):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopHelpInfo=_(e.ShopHelpInfoContext.Vue,e.ShopHelpInfoContext.Request,e.ShopHelpInfoContext.UseConvert,e.ShopHelpInfoContext.VueRouter,e.ShopHelpInfoContext.PageManageTwo,e.ShopHelpInfoContext.ElementPlus))})(this,function(e,_,f,b,u,x){"use strict";var h=document.createElement("style");h.textContent=`@charset "UTF-8";.bangain_info_box[data-v-848290a2]{width:956px;border:1px solid #d5d5d5;padding:25px 20px 0;margin-bottom:10px}.bangain_info_box__item[data-v-848290a2]{margin-bottom:25px;font-size:14px;color:#333;width:100%}.bargain_sponsor[data-v-848290a2],.bargain_sponsor__info[data-v-848290a2],.bargain_origin[data-v-83b72414]{display:flex;justify-content:center;align-items:center;justify-content:flex-start}.bargain_origin--name[data-v-83b72414]{width:120px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.bargain_origin--shop_name[data-v-83b72414]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}
`,document.head.appendChild(h);const y="addon-bargain/bargainOrder",V=t=>_.get({url:y+`/detail/${t}`}),C=t=>_.get({url:"addon-bargain/bargainHelpPeople",params:t}),I={BARGAINING:"砍价中",FAILED_TO_BARGAIN:"砍价失败",SUCCESSFUL_BARGAIN:"砍价成功"},D={class:"bangain_info_box"},E={class:"bangain_info_box__item bargain_sponsor"},w={class:"bargain_sponsor__info"},S={class:"bargain_origin--name",style:{"margin-left":"10px","font-size":"14px",color:"#515151"}},T={class:"bangain_info_box__item"},O={class:"bangain_info_box__item"},k={class:"bangain_info_box__item"},B={class:"bangain_info_box__item bargain_sponsor"},P={class:"bargain_sponsor__info"},H={class:"bargain_origin--name",style:{"margin-left":"10px","font-size":"14px",color:"#515151"}},R={class:"bangain_info_box__item"},A={class:"bangain_info_box__item"},q={class:"bangain_info_box__item"},z={key:0,class:"bangain_info_box__item"},$=e.defineComponent({__name:"helpInfoTop",props:{bargainOrderDetail:{type:Object,required:!0}},setup(t){const c=b.useRouter(),{divTenThousand:l}=f(),o=a=>{a&&c.push({name:"detailsIndex",query:{orderNo:a}})};return(a,n)=>{var i;const s=e.resolveComponent("el-image"),d=e.resolveComponent("el-link");return e.openBlock(),e.createElementBlock("div",D,[e.createElementVNode("div",E,[n[1]||(n[1]=e.createTextVNode(" 开团发起人： ")),e.createElementVNode("div",w,[e.createVNode(s,{style:{width:"40px",height:"40px"},fit:"",src:(i=t.bargainOrderDetail)==null?void 0:i.userHeadPortrait},null,8,["src"]),e.createElementVNode("div",S,e.toDisplayString(t.bargainOrderDetail.userNickname),1)])]),e.createElementVNode("p",T,"活动名称："+e.toDisplayString(t.bargainOrderDetail.activityName),1),e.createElementVNode("p",O,[n[2]||(n[2]=e.createTextVNode(" 发起时间：")),e.createElementVNode("time",null,e.toDisplayString(t.bargainOrderDetail.publishBargainingTime),1)]),e.createElementVNode("p",k,"砍价人数："+e.toDisplayString(t.bargainOrderDetail.bargainingPeople),1),e.createElementVNode("div",B,[n[3]||(n[3]=e.createTextVNode(" 砍价商品： ")),e.createElementVNode("div",P,[e.createVNode(s,{style:{width:"40px",height:"40px"},fit:"",src:t.bargainOrderDetail.productPic},null,8,["src"]),e.createElementVNode("div",H,e.toDisplayString(t.bargainOrderDetail.productName),1)])]),e.createElementVNode("p",R,"底价："+e.toDisplayString(t.bargainOrderDetail.floorPrice&&e.unref(l)(t.bargainOrderDetail.floorPrice)),1),e.createElementVNode("p",A,[n[4]||(n[4]=e.createTextVNode(" 结束时间：")),e.createElementVNode("time",null,e.toDisplayString(t.bargainOrderDetail.endTime),1)]),e.createElementVNode("p",q,"砍价状态："+e.toDisplayString(e.unref(I)[t.bargainOrderDetail.bargainStatus]),1),t.bargainOrderDetail.orderNo?(e.openBlock(),e.createElementBlock("p",z,[n[6]||(n[6]=e.createTextVNode(" 订单信息：")),e.createVNode(d,{underline:!1,type:"primary",onClick:n[0]||(n[0]=p=>o(t.bargainOrderDetail.orderNo))},{default:e.withCtx(()=>n[5]||(n[5]=[e.createTextVNode("查看详情")])),_:1})])):e.createCommentVNode("",!0)])}}}),W="",N=(t,c)=>{const l=t.__vccOpts||t;for(const[o,a]of c)l[o]=a;return l},G=N($,[["__scopeId","data-v-848290a2"]]),L={class:"bargain_origin"},j={class:"bargain_origin--name",style:{width:"200px","margin-left":"10px"}},M={style:{"margin-top":"auto"}},U=e.defineComponent({__name:"bargainInfoList",emits:["reload"],setup(t,{expose:c,emit:l}){const o=e.reactive({size:10,current:1,total:0}),a=e.ref([]),n=l,{divTenThousand:s}=f();async function d(i){const{code:p,data:g,msg:m}=await C({...i,...o});if(p!==200){x.ElMessage.error(m||"查询砍价帮砍列表失败");return}o.current=g.current,o.size=g.size,o.total=g.total,a.value=g.records}return c({getBargainHelpPeople:d}),(i,p)=>{const g=e.resolveComponent("el-image"),m=e.resolveComponent("el-table-column"),K=e.resolveComponent("el-table"),Q=e.resolveComponent("el-row");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(K,{ref:"multipleTableRef",data:a.value,"header-row-style":{fontSize:"12px",color:"#909399"},"header-cell-style":{background:"#f6f8fa"},"cell-style":{fontSize:"12px",color:"#333333"}},{default:e.withCtx(()=>[e.createVNode(m,{label:"帮砍人信息"},{default:e.withCtx(({row:r})=>[e.createElementVNode("div",L,[e.createVNode(g,{style:{width:"40px",height:"40px"},fit:"",src:r.userHeadPortrait},null,8,["src"]),e.createElementVNode("div",j,e.toDisplayString(r.userNickName),1)])]),_:1}),e.createVNode(m,{label:"帮砍金额"},{default:e.withCtx(({row:r})=>[e.createElementVNode("span",null,e.toDisplayString(r.helpCutAmount&&e.unref(s)(r.helpCutAmount)),1)]),_:1}),e.createVNode(m,{label:"帮砍时间",width:"200px",align:"center"},{default:e.withCtx(({row:r})=>[e.createElementVNode("time",null,e.toDisplayString(r.helpCutTime),1)]),_:1})]),_:1},8,["data"]),e.createElementVNode("div",M,[e.createVNode(Q,{justify:"end",align:"middle"},{default:e.withCtx(()=>[e.createVNode(u,{modelValue:o,"onUpdate:modelValue":p[0]||(p[0]=r=>o=r),"page-size":o.size,total:o.total,onReload:p[1]||(p[1]=r=>n("reload"))},null,8,["modelValue","page-size","total"])]),_:1})])],64)}}}),X="",F=N(U,[["__scopeId","data-v-83b72414"]]),J={style:{padding:"16px",height:"100%","overflow-y":"scroll"}};return e.defineComponent({__name:"ShopHelpInfo",setup(t){const c=b.useRoute(),l=e.ref(),o=e.ref({activityId:"",activityName:"",bargainStatus:"BARGAINING",bargainingPeople:0,endTime:"",floorPrice:"",id:"",productId:"",productName:"",productPic:"",publishBargainingTime:"",shopId:"",skuId:"",sponsorId:"",userHeadPortrait:"",userNickname:"",salePrice:"",createTime:"",updateTime:""});a();async function a(){if(c.query.id){const{code:s,data:d,msg:i}=await V(c.query.id+"");if(s!==200){x.ElMessage.error(i||"获取砍价订单详情失败");return}if(!d)return;o.value=d,n()}}function n(){var i;const{id:s,activityId:d}=o.value;(i=l.value)==null||i.getBargainHelpPeople({activityId:d,bargainOrderId:s})}return(s,d)=>(e.openBlock(),e.createElementBlock("div",J,[e.createVNode(G,{"bargain-order-detail":o.value},null,8,["bargain-order-detail"]),e.createVNode(F,{ref_key:"bargainListRef",ref:l,onReload:n},null,512)]))}})});
