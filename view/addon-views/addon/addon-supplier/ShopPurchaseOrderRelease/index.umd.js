(function(e,G){typeof exports=="object"&&typeof module<"u"?module.exports=G(require("vue"),require("vue-router"),require("lodash-es"),require("@/composables/useConvert"),require("element-plus"),require("@element-plus/icons-vue"),require("@/components/q-upload/q-upload.vue"),require("@/q-plugin/cityDistribution/CityDistributionCheckbox.vue"),require("@/q-plugin/freight/FreightCheckBox.vue"),require("@/store/modules/shopInfo"),require("@/apis/upload"),require("@/components/element-plus-table-drag/drag-table.vue"),require("vue-draggable-next"),require("@/apis/http"),require("@/components/q-edit/q-edit.vue"),require("@/assets/images/ex_img.png")):typeof define=="function"&&define.amd?define(["vue","vue-router","lodash-es","@/composables/useConvert","element-plus","@element-plus/icons-vue","@/components/q-upload/q-upload.vue","@/q-plugin/cityDistribution/CityDistributionCheckbox.vue","@/q-plugin/freight/FreightCheckBox.vue","@/store/modules/shopInfo","@/apis/upload","@/components/element-plus-table-drag/drag-table.vue","vue-draggable-next","@/apis/http","@/components/q-edit/q-edit.vue","@/assets/images/ex_img.png"],G):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopPurchaseOrderRelease=G(e.ShopPurchaseOrderReleaseContext.Vue,e.ShopPurchaseOrderReleaseContext.VueRouter,e.ShopPurchaseOrderReleaseContext.Lodash,e.ShopPurchaseOrderReleaseContext.UseConvert,e.ShopPurchaseOrderReleaseContext.ElementPlus,e.ShopPurchaseOrderReleaseContext.ElementPlusIconsVue,e.ShopPurchaseOrderReleaseContext.QUpload,e.ShopPurchaseOrderReleaseContext.CityDistributionCheckbox,e.ShopPurchaseOrderReleaseContext.FreightCheckBox,e.ShopPurchaseOrderReleaseContext.ShopInfoStore,e.ShopPurchaseOrderReleaseContext.UploadAPI,e.ShopPurchaseOrderReleaseContext.dragTable,e.ShopPurchaseOrderReleaseContext.VueDraggableNext,e.ShopPurchaseOrderReleaseContext.Request,e.ShopPurchaseOrderReleaseContext.QEdit,e.ShopPurchaseOrderReleaseContext.exampleImg))})(this,function(e,G,le,ae,M,v,ee,he,xe,ie,be,re,de,Y,ye,Ve){"use strict";var ce=document.createElement("style");ce.textContent=`@charset "UTF-8";.navLine[data-v-74e01f4f]{margin:25px 0;height:40px;line-height:40px;background-color:#f8f8f8;padding-left:15px;font-weight:700}.release .scroll[data-v-74e01f4f]{overflow-y:scroll;padding:30px 16px 10px}.release__step[data-v-74e01f4f]{width:100%;margin:0 auto;position:sticky;top:0;padding-top:16px;background:white;z-index:100;padding-bottom:10px}.release__tool[data-v-74e01f4f]{align-items:center;position:sticky;bottom:0;padding:15px 0;display:flex;justify-content:center;box-shadow:0 0 10px #d5d5d5;background-color:#fff;z-index:100;margin-top:auto}[data-v-74e01f4f] .el-step__head.is-process{color:#fff}[data-v-74e01f4f] .el-step__head.is-process .el-step__icon.is-text{background-color:#4b80ff;border-color:#4b80ff}[data-v-74e01f4f] .el-step__title.is-process{font-weight:400}[data-v-74e01f4f] .el-step__title.is-finish{color:var(--el-text-color-primary)}[data-v-74e01f4f] .el-step__head.is-finish{color:#fff}[data-v-74e01f4f] .el-step__head.is-finish .el-step__icon.is-text{background-color:#4b80ff;border-color:#4b80ff}[data-v-74e01f4f] .el-step__head.is-wait{color:#fff}[data-v-74e01f4f] .el-step__head.is-wait .el-step__icon.is-text{background-color:#d7dce4;border-color:#d7dce4}[data-v-74e01f4f] .el-step.is-center .el-step__line{left:65%;right:-30%}.title[data-v-3d615126]{display:flex;justify-content:flex-start;align-items:center}.title__release[data-v-3d615126]{height:20px;color:#333;font-size:16px;line-height:20px;border-left:4px solid #4b80ff;padding-left:8px}[data-v-7bc0f0d2] .el-tag__content{max-width:214px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.norm[data-v-7bc0f0d2]{font-size:14px;margin:20px 0;display:flex;justify-content:"flex-start";align-items:"flex-start"}.norm__title[data-v-7bc0f0d2]{margin:0 20px 0 30px}.norm__item[data-v-7bc0f0d2]{color:#606266}.norm__item__name[data-v-7bc0f0d2]{display:flex}.norm__item__name--del[data-v-7bc0f0d2]{margin-left:10px}.norm__item__value[data-v-7bc0f0d2]{display:flex;justify-content:"flex-start";align-items:center}.norm__item__value--mg34[data-v-7bc0f0d2]{margin-right:34px}.norm__item__value__content[data-v-7bc0f0d2]{display:flex;justify-content:center;align-items:center;margin:20px 0;cursor:move}.specDetail[data-v-7bc0f0d2]{font-size:14px;text-align:center;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table[data-v-7bc0f0d2]{width:800px;display:flex;flex-direction:column;overflow-x:auto;background:#fcfcfc}.specDetail__title[data-v-7bc0f0d2]{margin:0 30px}.specDetail__table__title[data-v-7bc0f0d2]{line-height:50px;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__title--primary[data-v-7bc0f0d2]{flex-shrink:0;width:150px}.specDetail__table__title--custom[data-v-7bc0f0d2]{flex-shrink:0;width:100px}.specDetail__table__title--header[data-v-7bc0f0d2]{display:flex;justify-content:center;align-items:center;flex-shrink:0}.specDetail__table__item[data-v-7bc0f0d2]{display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__item--font[data-v-7bc0f0d2]{flex-shrink:0;width:100px;line-height:70px;color:#606266}.specDetail__table__item--input[data-v-7bc0f0d2]{flex-shrink:0;width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item--input>.el-input[data-v-7bc0f0d2]{width:80%}.specDetail__table__item--input>.el-input__inner[data-v-7bc0f0d2]{width:80%}.specDetail__table__item--upload[data-v-7bc0f0d2]{width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item .el-form-item--small.el-form-item[data-v-7bc0f0d2]{margin:0!important}.batch[data-v-7bc0f0d2]{margin:30px;display:flex;justify-content:flex-start;align-items:center}.batch__list[data-v-7bc0f0d2]{display:flex;justify-content:flex-start;align-items:center;cursor:pointer;color:#409eff;margin-left:20px}.batch__list-item[data-v-7bc0f0d2]{display:flex;justify-content:center;align-items:center;margin-right:10px}.com__input--width[data-v-7bc0f0d2]{width:500px}.serveMsg[data-v-7bc0f0d2]{width:400px;display:flex}.FreightTemplateChoose[data-v-7bc0f0d2]{position:absolute}.inputWidth[data-v-7bc0f0d2]{width:calc(100% - 120px)}.com__attr[data-v-7bc0f0d2]{margin-top:10px;width:620px;padding:20px;border:1px solid #d7d7d7}.com__attr-header[data-v-7bc0f0d2]{display:flex;justify-content:space-between;align-items:center}.com__attr-content[data-v-7bc0f0d2]{display:flex;justify-content:space-between;align-items:center;margin:10px 0}.com__attr-input[data-v-7bc0f0d2]{width:230px}.com__attr-del[data-v-7bc0f0d2]{color:red}.com__imgText[data-v-7bc0f0d2]{position:absolute;right:0;bottom:0;font-size:12px;text-align:center;width:100%;background-color:#0000004d;border-radius:0 0 6px 6px;color:#fff}.goodsType .title[data-v-7bc0f0d2]{font-weight:400;font-size:16px;margin-bottom:20px}.goodsType .is-active .title[data-v-7bc0f0d2]{font-weight:700}.el-link.is-disabled[data-v-7bc0f0d2]{color:#999}.mleft-form-item .el-form-item__content{padding-left:100px}.el-popper.is-effect-tooltip{background-color:#fff;color:#9d9d9d;box-shadow:0 0 10px #00000026}.el-popper.is-effect-tooltip .el-popper__arrow:before{background:#fff;right:0}.goodsType .el-radio-button__original-radio:checked+.el-radio-button__inner{color:#333;background-color:unset}.goodsType .el-radio-button__inner{padding:20px 40px}.avatar-uploader .el-upload{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:var(--el-transition-duration-fast)}.main-uploader .el-upload{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;width:100px;height:100px;transition:var(--el-transition-duration-fast)}.avatar-uploader .el-upload:hover,.main-uploader .el-upload:hover{border-color:var(--el-color-primary)}.el-icon.avatar-uploader-icon{font-size:28px;color:#8c939d;width:250px;height:120px;text-align:center}.el-icon.main-uploader-icon{font-size:28px;color:#8c939d;width:100px;height:100px;text-align:center}.norm__list[data-v-c746f778]{padding-bottom:30px}.el-row[data-v-c746f778]{padding:15px;background-color:#f8f8f8}.norm__item__name--left[data-v-c746f778]{display:flex}.norm__item__name--left>.el-form-item--small.el-form-item[data-v-c746f778]{margin:0!important}.button-new-tag[data-v-c746f778]{margin-left:10px!important;height:32px;line-height:30px;padding-top:0;padding-bottom:0;margin-top:0!important}.el-tag[data-v-c746f778]{margin-bottom:10px}.el-tag+.el-tag[data-v-c746f778]{margin-left:10px}.norm__item__value__content[data-v-c746f778],.el-form-item[data-v-c746f778]{margin:0 9px}.norm__item__value__content[data-v-c746f778]{justify-content:start}.el-button[data-v-c746f778]{margin:10px 9px}.input-new-tag[data-v-c746f778]{width:90px;margin-left:10px;vertical-align:bottom}.avatar-uploader .avatar[data-v-39e77bf7]{width:150px;height:50px;display:block}.avatar-uploader .el-upload[data-v-39e77bf7]{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:var(--el-transition-duration-fast)}.avatar-uploader .el-upload[data-v-39e77bf7]:hover{border-color:var(--el-color-primary)}.el-icon.avatar-uploader-icon[data-v-39e77bf7]{font-size:28px;color:#8c939d;width:50px;height:50px;text-align:center;border:1px dashed #ccc;border-radius:10px}.input-group[data-v-39e77bf7]{display:flex;align-items:center}.input-group__prefix[data-v-39e77bf7]{background-color:#f7f7f7;height:32px;line-height:32px;padding:0 9px;border:1px solid #dcdfe6;border-radius:4px;display:inline-block}.table-container[data-v-39e77bf7]{padding-bottom:30px}[data-v-39e77bf7] .qupload{width:fit-content;margin:0 auto}.spac[data-v-c6052e76]{background-color:#f8f8f8;padding-top:1px}.spac .goodsAttribut[data-v-c6052e76]{background-color:#fff;padding:10px;border-radius:5px;margin-top:20px}.spac .goodsAttribut .title[data-v-c6052e76]{font-weight:700;background-color:#fff;padding:15px;margin:0 -10px}.spac .goodsAttribut .el-button[data-v-c6052e76]{margin:0 20px}.spac .goodsAttribut .line[data-v-c6052e76]{display:flex;align-items:center;margin:20px 0}.spac .goodsAttribut .line .item[data-v-c6052e76]{border:1px solid #bbbbbb;padding:5px;margin-right:7px;border-radius:3px}.spac .goodsAttribut .line .deleteItem[data-v-c6052e76]{cursor:pointer;font-weight:700}.spac .goodsAttribut .el-tag[data-v-c6052e76]{margin:5px}.norm{font-size:14px;margin:20px 0;display:flex;justify-content:"flex-start";align-items:"flex-start"}.norm__title{margin:0 20px 0 30px}.norm__item{color:#606266}.norm__item__name{display:flex}.norm__item__name--del{margin-left:10px}.norm__item__value{display:flex;justify-content:"flex-start";align-items:center}.norm__item__value--mg34{margin-right:34px}.norm__item__value__content{display:flex;justify-content:center;align-items:center;margin:20px 0;cursor:move}.specDetail{font-size:14px;text-align:center;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table{width:800px;display:flex;flex-direction:column;overflow-x:auto;background:#fcfcfc}.specDetail__title{margin:0 30px}.specDetail__table__title{line-height:50px;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__title--primary{flex-shrink:0;width:150px}.specDetail__table__title--custom{flex-shrink:0;width:100px}.specDetail__table__title--header{display:flex;justify-content:center;align-items:center;flex-shrink:0}.specDetail__table__item{display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__item--font{flex-shrink:0;width:100px;line-height:70px;color:#606266}.specDetail__table__item--input{flex-shrink:0;width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item--input>.el-input{width:80%}.specDetail__table__item--input>.el-input__inner{width:80%}.specDetail__table__item--upload{width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item .el-form-item--small.el-form-item{margin:0!important}.batch{margin:30px;display:flex;justify-content:flex-start;align-items:center}.batch__list{display:flex;justify-content:flex-start;align-items:center;cursor:pointer;color:#409eff;margin-left:20px}.batch__list-item{display:flex;justify-content:center;align-items:center;margin-right:10px}.com__input--width{width:500px}.serveMsg{width:400px;display:flex}.inputnumber{position:relative}.inputnumber__icon{width:34px;height:31px;position:absolute;right:1px;top:2px;background:#e6e8eb;color:#909399;text-align:center}.input_number .el-input__inner{text-align:left}.com__input--width{width:100%}.info[data-v-9a512c4c]{display:flex}.info__edit[data-v-9a512c4c]{border:1px solid #ccc;margin-top:18px;z-index:99}.info__edit[data-v-9a512c4c] ::-webkit-scrollbar{display:none}
`,document.head.appendChild(ce);const Ce=(p,I)=>Y.get({url:`addon-supplier/supplier/order/publish/product/${p}`,params:{supplierId:I}}),Ne=(p,I,T=!1)=>Y.get({url:`gruul-mall-storage/storage/shop/${p}/product/${I}?isSupplier=${T}`}),ke=()=>Y.get({url:"gruul-mall-addon-platform/platform/shop/signing/category/choosable/list"}),we=(p,I)=>Y.get({url:"gruul-mall-freight/logistics/template/get/list",params:{current:p,size:I}}),Ie=p=>Y.post({url:"gruul-mall-goods/manager/product/issue",data:p}),pe=p=>Y.get({url:"gruul-mall-goods/manager/feature/list",params:p}),Te=p=>Y.get({url:"gruul-mall-goods/manager/supplier/list",params:p}),Be=p=>Y.get({url:"gruul-mall-goods/goods/product/category",params:p}),Ee=p=>Y.get({url:`gruul-mall-goods/goods/product/label/searchByShopType/${p}`,params:{size:1e3}}),Se={class:"release fdc1 overh"},Pe={class:"release__step"},Le={class:"fdc1 overh scroll"},Ae={class:"release__tool"},De=e.defineComponent({__name:"ShopPurchaseOrderRelease",props:{properties:{type:Object,default:()=>({})}},setup(p){const I=p,T=e.computed(()=>I.properties.VITE_BASE_URL),b=e.ref("NewBasicInfo"),N=G.useRoute(),k=G.useRouter(),{mulTenThousand:z}=ae(),A=e.ref({name:"",saleDescribe:"",platformCategoryId:"",categoryId:"",providerId:"",labelId:"",widePic:"",distributionMode:[],videoUrl:"",albumPics:"",productType:"REAL_PRODUCT",specGroups:[],platformCategory:{one:null,two:null,three:null},shopCategory:{one:null,two:null,three:null},skus:[{id:"",image:"",initSalesVolume:0,limitNum:0,limitType:"UNLIMITED",price:0,productId:"",initStock:0,salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0,specs:[]}],productParameters:[],productAttributes:[],serviceIds:[],detail:"",freightTemplateId:"0",status:"SELL_ON",brandId:"",sellType:"PURCHASE"}),i=e.ref([]),n=e.ref(""),m=e.ref(""),R=e.ref("");e.provide("form",{submitForm:A,commodityImgList:i,copyGoodsJD:R,copyGoodsAL:m,copyGoodsTB:n});const O=e.ref(),D={NewBasicInfo:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Ke)),NewSaleInfo:e.defineAsyncComponent(()=>Promise.resolve().then(()=>ht)),NewProductInfo:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Nt))},_={NewBasicInfo:{prev:"",next:"NewSaleInfo",stepIndex:0},NewSaleInfo:{prev:"NewBasicInfo",next:"NewProductInfo",stepIndex:1},NewProductInfo:{prev:"NewSaleInfo",next:"",stepIndex:2}},l=[];G.onBeforeRouteLeave((d,w,B)=>{["/goods/category","/goods/supplier","/goods/attribute","/freight/logistics","/goods/purchase"].includes(d.path)||(A.value={name:"",saleDescribe:"",platformCategoryId:"",categoryId:"",labelId:"",providerId:"",distributionMode:[],productType:"REAL_PRODUCT",widePic:"",videoUrl:"",albumPics:"",specGroups:[],platformCategory:{one:null,two:null,three:null},shopCategory:{one:null,two:null,three:null},skus:[{id:"",image:"",initSalesVolume:0,limitNum:0,limitType:"UNLIMITED",price:0,productId:"",initStock:0,salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0,specs:[]}],productParameters:[],productAttributes:[],serviceIds:[],detail:"",freightTemplateId:"0",status:"SELL_ON",brandId:"",sellType:"PURCHASE"},i.value=[],R.value="",m.value="",n.value="",b.value="NewBasicInfo"),B()});const o=e.computed(()=>_[b.value]),h=e.computed(()=>o.value.stepIndex),x=e.computed(()=>o.value.prev),y=e.computed(()=>o.value.next),c=()=>{l[h.value]||l.push(O.value)},U=()=>l[h.value]?l[h.value]:O.value,V=()=>{c(),b.value=x.value},r=async()=>{var w,B,W;let d=!0;if(y.value==="NewProductInfo"){const H=(w=U())==null?void 0:w.GoodOnlyRef.handleSpacObj();if(H){const{productAttribute:J,productParameter:E}=H;A.value.productAttributes=J,A.value.productParameters=E}A.value.specGroups.length!==0&&(d=t())}d&&((B=U())!=null&&B.currentFormRef)&&((W=U())==null?void 0:W.currentFormRef).validate(J=>{J&&(c(),b.value=y.value)})};function t(){const d=A.value.skus;if(d.length>0){const w=d.map(B=>B.price<=0?"请修改指导价且大于0":Number(B.salePrice)<=0?"请修改实售价且大于0":Number(B.salePrice)>Number(B.price)?"商品实售价大于指导价":"").filter(Boolean);if(w.length>0)return M.ElMessage.error(w[0]),!1}else return M.ElMessage.error("请完善商品规格信息"),!1;return!0}const s=()=>{k.replace("/goods/purchase")},f=e.ref("SINGLE_SPEC"),C=d=>{f.value=d},q=async()=>{const d=le.cloneDeep(A.value);f.value==="SINGLE_SPEC"&&(d.specGroups=[],d.skus=d.skus.filter((B,W)=>(B.specs=[],W===0))),Array.isArray(d.categoryId)&&(d.categoryId=d.categoryId[2]),Array.isArray(d.platformCategoryId)&&(d.platformCategoryId=d.platformCategoryId[2]),d.skus=d.skus.map(B=>(B.price=z(B.price).toNumber(),B.salePrice=z(B.salePrice).toNumber(),B)),d.specGroups.length===0&&(d.skus[0].image=d.albumPics.split(",")[0]),d.status="SELL_ON",d.supplierId=N.query.supplierId,d.sellType="PURCHASE",d.id=N.query.id,d.productType==="VIRTUAL_PRODUCT"&&(d.distributionMode=["VIRTUAL"]);const{code:w}=await Ie(d);if(w!==200)return M.ElMessage.error("上传商品失败");M.ElMessage.success("上传成功"),l[0].resetServiceAssuranceList(),k.replace("/goods/purchase")};return(d,w)=>{var J,E;const B=e.resolveComponent("el-step"),W=e.resolveComponent("el-steps"),H=e.resolveComponent("el-button");return e.openBlock(),e.createElementBlock("div",Se,[e.createElementVNode("div",Pe,[e.createVNode(W,{active:h.value,"align-center":""},{default:e.withCtx(()=>[e.createVNode(B,{title:"1.编辑基本信息"}),e.createVNode(B,{title:"2.编辑销售信息"}),e.createVNode(B,{title:"3.编辑商品信息"})]),_:1},8,["active"])]),e.createElementVNode("div",Le,[(e.openBlock(),e.createBlock(e.KeepAlive,{exclude:["NewProductInfoAddon"]},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(D[b.value]),{ref_key:"componentRef",ref:O,VITE_BASE_URL:T.value,onChangeSpecificationType:C},null,40,["VITE_BASE_URL"]))],1024))]),e.createElementVNode("div",Ae,[x.value!==""?(e.openBlock(),e.createBlock(H,{key:0,type:"primary",round:"",onClick:V},{default:e.withCtx(()=>w[0]||(w[0]=[e.createTextVNode("上一步")])),_:1})):e.createCommentVNode("",!0),y.value!==""?(e.openBlock(),e.createBlock(H,{key:1,type:"primary",round:"",onClick:r},{default:e.withCtx(()=>w[1]||(w[1]=[e.createTextVNode("下一步")])),_:1})):e.createCommentVNode("",!0),y.value===""&&((J=A.value)==null?void 0:J.status)==="PLATFORM_SELL_OFF"?(e.openBlock(),e.createBlock(H,{key:2,type:"primary",round:"",onClickOnce:s},{default:e.withCtx(()=>w[2]||(w[2]=[e.createTextVNode(" 返回 ")])),_:1})):e.createCommentVNode("",!0),y.value===""&&((E=A.value)==null?void 0:E.status)!=="PLATFORM_SELL_OFF"?(e.openBlock(),e.createBlock(H,{key:3,type:"primary",round:"",onClick:q},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(N).query.id?"更新":"上架"),1)]),_:1})):e.createCommentVNode("",!0)])])}}}),Dt="",Z=(p,I)=>{const T=p.__vccOpts||p;for(const[b,N]of I)T[b]=N;return T},Re=Z(De,[["__scopeId","data-v-74e01f4f"]]),Ue={class:"title"},Me={class:"title__release"},qe=e.defineComponent({__name:"ReleaseTitle",props:{title:{default:""}},setup(p){return(I,T)=>(e.openBlock(),e.createElementBlock("div",Ue,[e.createElementVNode("div",Me,e.toDisplayString(I.title),1),e.renderSlot(I.$slots,"default",{},void 0,!0)]))}}),Rt="",X=Z(qe,[["__scopeId","data-v-3d615126"]]),$e=[{name:"包邮",state:!1,text:"购买该商品无需支付运费",enum:"NO_FREIGHT"},{name:"7天退换",state:!1,text:"商家承诺7天无理由退换货",enum:"SEVEN_END_BACK"},{name:"48小时发货",state:!1,text:"商家承诺订单在48小时内发布",enum:"TWO_DAY_SEND"},{name:"假一赔十",state:!1,text:"若收到商品是假冒品牌，可获得十倍赔偿",enum:"FAKE_COMPENSATE"},{name:"正品保证",state:!1,text:"商家承诺商品正品质量",enum:"ALL_ENSURE"}],Oe=p=>{const I=e.ref($e);function T(){p.value.serviceIds=I.value.filter(k=>k.state).map(k=>k.enum)}function b(){p.value.serviceIds.length&&(I.value=I.value.map(k=>(p.value.serviceIds.includes(k.enum)&&(k.state=!0),k)))}return e.onActivated(()=>b()),{serviceAssuranceList:I,updateserviceIds:T,resetServiceAssuranceList:()=>{for(let k=0;k<I.value.length;k++)I.value[k].state=!1},initServiceAssuranceList:b}},Fe=["src"],je={key:1,class:"com__imgText"},Ge={key:0},ze={class:"serveMsg"},He={style:{width:"120px"}},We={style:{color:"#c6c6c6"}},Je=e.defineComponent({__name:"NewBasicInfo",props:{VITE_BASE_URL:{type:String,default:""}},setup(p,{expose:I}){const T=p,b=G.useRoute(),N=G.useRouter(),k=e.ref(),z=T.VITE_BASE_URL+"gruul-mall-carrier-pigeon/oss/upload",A=e.inject("form"),i=A.submitForm,n=e.ref([]),m=A.commodityImgList,R=e.ref([]),O=e.ref([]),D=e.ref([]),_=e.ref([]),l=e.ref(null),o=e.ref(null),h={expandTrigger:"hover",label:"name",value:"id"},x=e.reactive({name:[{required:!0,message:"请填写商品名称",trigger:"blur"}],categoryId:[{required:!0,message:"请选择店铺分类",trigger:"blur"}],albumPics:[{required:!0,message:"请添加商品主图",trigger:"blur"}],platformCategoryId:[{required:!0,message:"请选择平台分类",trigger:"change"}],distributionMode:[{required:!0,message:"请选择配送方式",trigger:"change",type:"array"}]}),y=ie.useShopInfoStore(),c=e.computed(()=>y.shopInfo.mode!=="O2O");e.onActivated(async()=>{N.options.history.state.forward!=="/freight/logistics?from=releaseGoods"&&await E(),Promise.all([H(),J()]).then(()=>{oe("platformCategory").then(()=>{}),oe("shopCategory").then(()=>{})}),B(),W()}),e.onMounted(()=>{s()}),e.watch(i.value,(u,a)=>{kt()},{immediate:!0});const{serviceAssuranceList:U,updateserviceIds:V,resetServiceAssuranceList:r,initServiceAssuranceList:t}=Oe(i);async function s(){const{code:u,data:a}=await we(1,1e3);if(u!==200)return M.ElMessage.error("获取物流列表失败");n.value=a.records}const f=u=>{const a=["video/mp4"],F=u.size<10485760;return a.includes(u.type)?F?!0:(M.ElMessage.error("上传视频大小不超过10M!"),!1):(M.ElMessage.error("上传视频只能是 mp4 格式!"),!1)},C=(u,a)=>{i.value.videoUrl=u.data},q=(u,a)=>{m.value.push(u),i.value.albumPics=w(m)},d=u=>{m.value.splice(u,1),i.value.albumPics=w(m)};function w(u){return u.value.join(",")}async function B(){const{code:u,data:a}=await Te({current:1,size:1e3,status:"REVIEW"});if(u!==200){M.ElMessage.error("获取供应商失败");return}R.value=a.records}async function W(){const{code:u,data:a}=await Ee(y.shopInfo.shopType);if(u!==200){M.ElMessage.error("获取商品标签失败");return}O.value=a}async function H(){const{code:u,data:a,success:F}=await ke();if(u!==200){M.ElMessage.error("获取平台分类失败");return}D.value=ne(1,a)}async function J(){const{code:u,data:a}=await Be({current:1,size:500});if(u!==200){M.ElMessage.error("获取店铺分类失败");return}_.value=ne(1,a.records)}async function E(){var u,a,F,$;if(b.query.id){const{code:S,data:L}=await Ce(b.query.id,b.query.supplierId);if(S!==200){M.ElMessage.error("获取商品信息失败");return}m.value=(u=L==null?void 0:L.product)==null?void 0:u.albumPics.split(",");const P=(L==null?void 0:L.product)||{};P.freightTemplateId="0",i.value={...i.value,...P,categoryId:i.value.categoryId},t(),i.value.distributionMode.length===0&&(F=(a=L==null?void 0:L.product)==null?void 0:a.distributionMode)!=null&&F.includes("VIRTUAL")&&(i.value.distributionMode=["VIRTUAL"]),se.value=($=i.value.distributionMode)==null?void 0:$.includes("VIRTUAL")}}function ne(u,a){const F=u===3;for(let $=0;$<a.length;){const S=a[$];if(F){S.disabled=!1,$++;continue}const L=S.children||S.secondCategoryVos||S.categoryThirdlyVos;delete S.secondCategoryVos,delete S.categoryThirdlyVos;const P=!L||L.length===0;if(S.disabled=P,P){a.splice($,1);continue}if(ne(u+1,L),L.length===0){a.splice($,1);continue}S.children=L,$++}return a}function kt(){let u=[];i.value.albumPics&&(u=i.value.albumPics.split(",")),m.value=u}const oe=async u=>{const a=u==="platformCategory",F=a?l.value:o.value;if(!F)return;const $=await F.getCheckedNodes();let S=i.value[u];if(!S){const j={one:null,two:null,three:null};i.value[u]=j,S=j}if(!$||$.length===0){S.one=null,S.two=null,S.three=null;return}const L=$[0].pathValues,P=!L||L.length===0;if(a){const j=$[0].pathNodes[0].data.categoryId;S.one=P?null:j}else S.one=P?null:L[0];S.two=P?null:L[1],S.three=P?null:L[2]},se=e.ref(!1),wt=u=>{u.includes("VIRTUAL")&&(i.value.distributionMode=["VIRTUAL"]),se.value=u.includes("VIRTUAL")};I({currentFormRef:k,resetServiceAssuranceList:r});const It=()=>{i.value.albumPics=w(m)},Tt=u=>{i.value.templateId=u};return(u,a)=>{const F=e.resolveComponent("el-option"),$=e.resolveComponent("el-select"),S=e.resolveComponent("el-icon"),L=e.resolveComponent("el-tooltip"),P=e.resolveComponent("el-form-item"),j=e.resolveComponent("el-col"),me=e.resolveComponent("el-input"),fe=e.resolveComponent("el-cascader"),ue=e.resolveComponent("el-link"),te=e.resolveComponent("el-row"),Bt=e.resolveComponent("i-ep-plus"),Et=e.resolveComponent("el-upload"),St=e.resolveComponent("VueDraggableNext"),_e=e.resolveComponent("el-checkbox"),Pt=e.resolveComponent("el-checkbox-group"),Lt=e.resolveComponent("logistics-setting"),At=e.resolveComponent("el-form");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(X,{title:"基本信息"}),e.createVNode(At,{ref_key:"currentFormRef",ref:k,model:e.unref(i),rules:x},{default:e.withCtx(()=>[e.createVNode(te,{gutter:8},{default:e.withCtx(()=>[e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"商品类型","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode($,{modelValue:e.unref(i).productType,"onUpdate:modelValue":a[0]||(a[0]=g=>e.unref(i).productType=g),disabled:e.unref(b).query.type==="ProcurementRelease",class:"inputWidth"},{default:e.withCtx(()=>[e.createVNode(F,{label:"实物商品（快递/同城/自提）",value:"REAL_PRODUCT"}),c.value?(e.openBlock(),e.createBlock(F,{key:0,label:"虚拟商品（无需物流）",value:"VIRTUAL_PRODUCT"})):e.createCommentVNode("",!0)]),_:1},8,["modelValue","disabled"]),e.createVNode(L,{content:"不同的商品类型可编辑的字段内容不同，商品类型一旦发布后将不可更改！",effect:"effect-tooltip",placement:"top"},{default:e.withCtx(()=>[e.createVNode(S,{color:"#999",size:"14px",style:{"margin-left":"24px"}},{default:e.withCtx(()=>[e.createVNode(e.unref(v.QuestionFilled))]),_:1})]),_:1})]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"商品名称","label-width":"100px",prop:"name"},{default:e.withCtx(()=>[e.createVNode(me,{modelValue:e.unref(i).name,"onUpdate:modelValue":a[1]||(a[1]=g=>e.unref(i).name=g),class:"inputWidth",maxlength:"35",placeholder:"请填写商品名称"},null,8,["modelValue"])]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"平台类目","label-width":"100px",prop:"platformCategoryId"},{default:e.withCtx(()=>[e.createVNode(fe,{ref_key:"platformCategoryRef",ref:l,modelValue:e.unref(i).platformCategoryId,"onUpdate:modelValue":a[2]||(a[2]=g=>e.unref(i).platformCategoryId=g),disabled:e.unref(b).query.type==="ProcurementRelease",options:D.value,props:h,class:"inputWidth",clearable:"",placeholder:"请选择平台类目","show-all-levels":"",style:{width:"calc(100% - 120px)"},onChange:a[3]||(a[3]=()=>oe("platformCategory"))},null,8,["modelValue","disabled","options"])]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"卖点描述","label-width":"100px",prop:"saleDescribe"},{default:e.withCtx(()=>[e.createVNode(me,{modelValue:e.unref(i).saleDescribe,"onUpdate:modelValue":a[4]||(a[4]=g=>e.unref(i).saleDescribe=g),class:"inputWidth",maxlength:"13",placeholder:"请填写卖点描述"},null,8,["modelValue"])]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"店铺类目","label-width":"100px",prop:"categoryId"},{default:e.withCtx(()=>[e.createVNode(fe,{ref_key:"shopCategoryRef",ref:o,modelValue:e.unref(i).categoryId,"onUpdate:modelValue":a[5]||(a[5]=g=>e.unref(i).categoryId=g),options:_.value,props:h,class:"inputWidth",clearable:"",placeholder:"请选择店铺类目","show-all-levels":"",style:{width:"calc(100% - 120px)"},onChange:a[6]||(a[6]=()=>oe("shopCategory"))},null,8,["modelValue","options"]),e.createVNode(ue,{underline:!1,style:{"margin-left":"15px"},type:"primary",onClick:a[7]||(a[7]=g=>e.unref(N).push({name:"goodsCategory",query:{from:"releaseGoods"}}))},{default:e.withCtx(()=>a[14]||(a[14]=[e.createTextVNode(" 前往设置 ")])),_:1})]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"自有货源","label-width":"100px",prop:"providerId"},{default:e.withCtx(()=>[e.createVNode($,{modelValue:e.unref(i).providerId,"onUpdate:modelValue":a[8]||(a[8]=g=>e.unref(i).providerId=g),class:"inputWidth",placeholder:"请选择供应商",style:{}},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(R.value,g=>(e.openBlock(),e.createBlock(F,{key:g.id,label:g.name,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.createVNode(ue,{underline:!1,style:{"margin-left":"15px"},type:"primary",onClick:a[9]||(a[9]=g=>e.unref(N).push({name:"goodsSupplier",query:{from:"releaseGoods"}}))},{default:e.withCtx(()=>a[15]||(a[15]=[e.createTextVNode(" 前往设置 ")])),_:1})]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"商品标签","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode($,{modelValue:e.unref(i).labelId,"onUpdate:modelValue":a[10]||(a[10]=g=>e.unref(i).labelId=g),class:"inputWidth",placeholder:"请选择商品标签"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(O.value,g=>(e.openBlock(),e.createBlock(F,{key:g.id,label:g.name,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e.createVNode(te,{gutter:8},{default:e.withCtx(()=>[e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"商品大图","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(te,{style:{width:"100%"}},{default:e.withCtx(()=>[e.createVNode(ee,{src:e.unref(i).widePic,"onUpdate:src":a[11]||(a[11]=g=>e.unref(i).widePic=g),format:{size:1},height:120,width:250},null,8,["src"])]),_:1}),a[16]||(a[16]=e.createElementVNode("div",{style:{color:"#9d9d9d","font-size":"14px"}},"尺寸建议710x460（长方形模式）像素以上，大小1M以下的JPG、PNG格式图片",-1))]),_:1})]),_:1}),e.createVNode(j,{span:12},{default:e.withCtx(()=>[e.createVNode(P,{label:"商品视频","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(te,{style:{width:"100%"}},{default:e.withCtx(()=>[e.createVNode(Et,{action:z,"before-upload":f,"http-request":e.unref(be.elementUploadRequest),"on-success":C,"show-file-list":!1,class:"avatar-uploader"},{default:e.withCtx(()=>[e.unref(i).videoUrl!==""?(e.openBlock(),e.createElementBlock("video",{key:0,src:e.unref(i).videoUrl,controls:"",style:{width:"250px",height:"120px"}},null,8,Fe)):(e.openBlock(),e.createBlock(S,{key:1,class:"avatar-uploader-icon"},{default:e.withCtx(()=>[e.createVNode(Bt)]),_:1}))]),_:1},8,["http-request"])]),_:1}),a[17]||(a[17]=e.createElementVNode("div",{style:{color:"#9d9d9d","font-size":"14px"}},"大小为10M以下",-1))]),_:1})]),_:1})]),_:1}),e.createVNode(P,{label:"商品主图","label-width":"100px",prop:"albumPics"},{default:e.withCtx(()=>[e.createVNode(te,{style:{width:"100%"}},{default:e.withCtx(()=>[e.unref(m).length?(e.openBlock(),e.createBlock(St,{key:0,modelValue:e.unref(m),"onUpdate:modelValue":a[12]||(a[12]=g=>e.isRef(m)?m.value=g:null),style:{display:"flex"},onSort:It},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),(g,Q)=>(e.openBlock(),e.createElementBlock("div",{key:g,style:{position:"relative","margin-right":"20px"}},[e.createVNode(ee,{src:e.unref(m)[Q],"onUpdate:src":ge=>e.unref(m)[Q]=ge,format:{size:1},height:100,width:100},null,8,["src","onUpdate:src"]),g?(e.openBlock(),e.createBlock(S,{key:0,color:"#7f7f7f",size:"20px",style:{position:"absolute",right:"-5px",top:"-5px",background:"#fff","border-radius":"50%"},onClick:ge=>d(Q)},{default:e.withCtx(()=>[e.createVNode(e.unref(v.CircleClose))]),_:2},1032,["onClick"])):e.createCommentVNode("",!0),Q===0?(e.openBlock(),e.createElementBlock("div",je,"封面图")):e.createCommentVNode("",!0)]))),128))]),_:1},8,["modelValue"])):e.createCommentVNode("",!0),e.withDirectives(e.createVNode(ee,{format:{size:1},height:100,width:100,onChange:q},null,512),[[e.vShow,e.unref(m).length<=5]])]),_:1}),a[18]||(a[18]=e.createElementVNode("div",{style:{color:"rgba(69, 64, 60, 0.6)","font-size":"12px"}}," 尺寸建议750x750（正方形模式）像素以上，大小1M以下，最多6张 (可拖拽图片调整顺序 ) ",-1))]),_:1}),e.unref(i).productType==="REAL_PRODUCT"?(e.openBlock(),e.createElementBlock("div",Ge,[e.createVNode(X,{title:"物流信息"}),e.createVNode(P,{label:"配送方式（至少选一种）","label-width":"200px",required:"",style:{margin:"0"}}),e.createVNode(P,{label:"","label-width":"100px",prop:"distributionMode"},{default:e.withCtx(()=>[e.createVNode(Pt,{modelValue:e.unref(i).distributionMode,"onUpdate:modelValue":a[13]||(a[13]=g=>e.unref(i).distributionMode=g),onChange:wt},{default:e.withCtx(()=>[e.createVNode(he),a[20]||(a[20]=e.createElementVNode("br",null,null,-1)),e.createVNode(_e,{value:"SHOP_STORE"},{default:e.withCtx(()=>a[19]||(a[19]=[e.createTextVNode("到店自提")])),_:1}),a[21]||(a[21]=e.createElementVNode("br",null,null,-1)),c.value?(e.openBlock(),e.createBlock(xe,{key:0,disable:se.value,"template-change":Tt,"template-id":e.unref(i).freightTemplateId},null,8,["disable","template-id"])):e.createCommentVNode("",!0)]),_:1},8,["modelValue"]),e.unref(i).freightTemplateId!=="0"?(e.openBlock(),e.createBlock(Lt,{key:0,id:e.unref(i).freightTemplateId,data:n.value},null,8,["id","data"])):e.createCommentVNode("",!0)]),_:1})])):e.createCommentVNode("",!0),e.createVNode(X,{title:"服务保障"}),e.createVNode(P,{class:"mleft-form-item"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(U),g=>(e.openBlock(),e.createElementBlock("div",{key:g.name,style:{display:"flex","flex-direction":"column"}},[e.createVNode(_e,{modelValue:g.state,"onUpdate:modelValue":Q=>g.state=Q,onChange:e.unref(V)},{default:e.withCtx(()=>[e.createElementVNode("div",ze,[e.createElementVNode("span",He,e.toDisplayString(g.name),1),e.createElementVNode("span",We,e.toDisplayString(g.text),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))]),_:1})]),_:1},8,["model","rules"])],64)}}}),Mt="",qt="",Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Z(Je,[["__scopeId","data-v-7bc0f0d2"]])},Symbol.toStringTag,{value:"Module"})),Ye={class:"norm__list"},Xe={class:"spec-container"},Ze=e.defineComponent({__name:"GoodNorms",props:{classArr:{type:Array,default(){return[]}}},emits:["changeClass"],setup(p,{emit:I}){const T=p,b=I,N=G.useRoute(),k=(l,o,h)=>{let x=T.classArr;x[o].children[h].name.indexOf(l)===0&&x[o].children.splice(h,1),b("changeClass",{type:"delSpecValue",list:e.toRaw(x)})},z=l=>{b("changeClass",{type:"sortSpecValue",list:l})},A=l=>{let o=T.classArr;o[l].inputVisble=!0},i=l=>{var o;return!!((o=l.draggedContext.element)!=null&&o.name)},n=l=>{let o=T.classArr;o[l].inputValue&&o[l].children.push({name:o[l].inputValue,children:[],inputValue:"",inputVisble:!1}),o[l].inputVisble=!1,o[l].inputValue="",_(o)?b("changeClass",{type:"addSpecValue",list:e.toRaw(o)}):(o[l].children.pop(),M.ElMessage.warning("规格名称重复"))},m=l=>{let o=T.classArr;_(o)||(M.ElMessage.warning("规格名称重复"),o[l].name="")},R=()=>{if(!T.classArr.every(o=>!!o.name.trim())){M.ElMessage.warning("请输入规格名称");return}T.classArr.push({inputValue:"",inputVisble:!1,children:[],name:"",version:""}),b("changeClass",{type:"addSpec",list:e.toRaw(T.classArr)})},O=l=>{M.ElMessageBox.confirm("确认删除该规格?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let o=T.classArr;o.splice(l,1),b("changeClass",{type:"delSpec",list:e.toRaw(o)}),M.ElMessage.success("删除成功")})},D=()=>{b("changeClass",{type:"sortSpecValue",list:e.toRaw(T.classArr)})};function _(l){const o=l.map(x=>x.name),h=l.reduce((x,y)=>x.concat(y.children.map(c=>c.name)),[]);return o.concat(h).length===Array.from(new Set(o.concat(h))).length}return(l,o)=>{const h=e.resolveComponent("el-button"),x=e.resolveComponent("el-input"),y=e.resolveComponent("el-table-column"),c=e.resolveComponent("el-tag"),U=e.resolveComponent("VueDraggableNext"),V=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Ye,[e.createVNode(h,{type:"primary",disabled:e.unref(N).query.type==="ProcurementRelease",onClick:R},{default:e.withCtx(()=>o[0]||(o[0]=[e.createTextVNode("新增规格")])),_:1},8,["disabled"]),e.createVNode(re,{"limit-pid":!1,onChangeData:z},{default:e.withCtx(()=>[e.createVNode(V,{data:p.classArr,border:""},{default:e.withCtx(()=>[e.createVNode(y,{label:"规格名称",prop:"name",width:"160",fixed:"left"},{default:e.withCtx(({row:r,$index:t})=>[e.createVNode(x,{modelValue:r.name,"onUpdate:modelValue":s=>r.name=s,placeholder:"规格名称",disabled:e.unref(N).query.type==="ProcurementRelease",style:{width:"130px"},maxlength:"20",onBlur:s=>m(t)},null,8,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:1}),e.createVNode(y,{label:"规格值(拖拽可调整顺序)",prop:"children","min-width":"720"},{default:e.withCtx(({row:r,$index:t})=>[e.createElementVNode("div",Xe,[r.children?(e.openBlock(),e.createBlock(U,{key:0,modelValue:r.children,"onUpdate:modelValue":s=>r.children=s,move:i,group:"tag",class:"tag-group",onSort:D},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.children,(s,f)=>(e.openBlock(),e.createBlock(c,{key:f,closable:e.unref(N).query.type!=="ProcurementRelease",effect:"plain",size:"large",type:"info","disable-transitions":!1,onClose:C=>k(s.name,t,f)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.name),1)]),_:2},1032,["closable","onClose"]))),128)),r.inputVisble?(e.openBlock(),e.createBlock(x,{key:0,ref:"saveTagInput",modelValue:r.inputValue,"onUpdate:modelValue":s=>r.inputValue=s,class:"input-new-tag",maxlength:"20",style:{"vertical-align":"middle","margin-bottom":"10px"},disabled:e.unref(N).query.type==="ProcurementRelease",onKeyup:e.withKeys(s=>n(t),["enter"]),onBlur:s=>n(t)},null,8,["modelValue","onUpdate:modelValue","disabled","onKeyup","onBlur"])):(e.openBlock(),e.createBlock(h,{key:1,disabled:e.unref(N).query.type==="ProcurementRelease",class:"button-new-tag spec-container-action",round:"",onClick:s=>A(t)},{default:e.withCtx(()=>o[1]||(o[1]=[e.createTextVNode("添加新规格")])),_:2},1032,["disabled","onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.createCommentVNode("",!0)])]),_:1}),e.createVNode(y,{label:"操作",width:"100",fixed:"right"},{default:e.withCtx(({$index:r})=>[e.createVNode(h,{icon:e.unref(v.Delete),link:"",style:{color:"#ff4d4d","font-size":"22px"},disabled:e.unref(N).query.type==="ProcurementRelease",onClick:t=>O(r)},null,8,["icon","disabled","onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),Ot="",Qe=Z(Ze,[["__scopeId","data-v-c746f778"]]);var K=(p=>(p.划线价="price",p.销售价="salePrice",p.重量="weight",p.限购类型="limitType",p.限购数量="limitNum",p.库存类型="stockType",p.库存="initStock",p.初始销量="initSalesVolume",p))(K||{});const ve={class:"table-container"},et={class:"input-group"},tt={class:"input-group"},ot={class:"table-container"},lt=e.defineComponent({__name:"GoodNormTable",props:{list:{type:Array,default(){return[]}},classArr:{type:Array,default(){return[]}},memoSpecList:{type:Array,default(){return[]}}},emits:["changeNormList"],setup(p,{expose:I,emit:T}){const b=G.useRoute(),N=e.computed(()=>b.name==="releaseCommodityEdit"?["sku图","划线价","销售价","重量","限购类型","限购数量","初始销量"]:b.query.type==="ProcurementRelease"&&A.value.productType==="REAL_PRODUCT"?["sku图","划线价","销售价","重量","限购类型","限购数量","库存","初始销量"]:["sku图","划线价","销售价","重量","限购类型","限购数量","库存类型","库存","初始销量"]),k=p,A=e.inject("form").submitForm;console.log("$Route.query",b.query);const i=T,n=e.computed(()=>{const D=k.memoSpecList;let _=k.list;return D.length>0&&(_=_.map((l,o)=>{const h=D.filter(x=>!!O(l.specs,x.specs));return h.length>0&&(l=h[0]),l})),_}),m=()=>n.value,R=(D,_)=>{i("changeNormList",n.value.map(l=>(l[_]=D,l)))};I({getNormList:m});function O(D,_){if(D.length!==_.length)return!1;for(let l=0;l<D.length;l++)if(D[l]!==_[l])return!1;return!0}return(D,_)=>{const l=e.resolveComponent("el-table-column"),o=e.resolveComponent("el-input-number"),h=e.resolveComponent("el-table"),x=e.resolveComponent("el-option"),y=e.resolveComponent("el-select");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(X,{title:"批量设置"}),e.createElementVNode("div",ve,[e.createVNode(h,{data:[{}]},{default:e.withCtx(()=>[e.createVNode(l,{label:"sku图",align:"center"},{default:e.withCtx(()=>[e.createVNode(ee,{width:50,height:50,"append-to-body":"",format:{types:["image/png","image/jpg","image/gif","image/jpeg","image/avif","image/webp"]},"onUpdate:src":_[0]||(_[0]=c=>R(c,"image"))})]),_:1}),e.createVNode(l,{label:"划线价",align:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",et,[_[7]||(_[7]=e.createElementVNode("div",{class:"input-group__prefix"},"￥",-1)),e.createVNode(o,{max:999999,precision:2,controls:!1,style:{width:"70px"},onChange:_[1]||(_[1]=c=>R(c,"price"))})])]),_:1}),e.createVNode(l,{label:"销售价",align:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",tt,[_[8]||(_[8]=e.createElementVNode("div",{class:"input-group__prefix"},"￥",-1)),e.createVNode(o,{max:999999,precision:2,controls:!1,style:{width:"70px"},onChange:_[2]||(_[2]=c=>R(c,"salePrice"))})])]),_:1}),e.createVNode(l,{label:"库存",align:"center"},{default:e.withCtx(()=>[e.createVNode(o,{precision:0,controls:!1,style:{width:"70px"},onChange:_[3]||(_[3]=c=>R(c,"initStock"))})]),_:1}),e.createVNode(l,{label:"初始销量",align:"center"},{default:e.withCtx(()=>[e.createVNode(o,{precision:0,controls:!1,style:{width:"70px"},onChange:_[4]||(_[4]=c=>R(c,"initSalesVolume"))})]),_:1}),e.createVNode(l,{label:"限购数量",align:"center"},{default:e.withCtx(()=>[e.createVNode(o,{precision:0,controls:!1,style:{width:"70px"},onChange:_[5]||(_[5]=c=>R(c,"limitNum"))})]),_:1}),e.createVNode(l,{label:"重量",align:"center"},{default:e.withCtx(()=>[e.createVNode(o,{precision:0,controls:!1,style:{width:"70px"},onChange:_[6]||(_[6]=c=>R(c,"weight"))}),_[9]||(_[9]=e.createElementVNode("div",{class:"input-group__prefix"},"kg",-1))]),_:1})]),_:1})]),e.createVNode(X,{title:"规格明细"}),e.createElementVNode("div",ot,[e.createVNode(h,{data:n.value},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value.slice(0,1),(c,U)=>(e.openBlock(),e.createBlock(l,{key:U,label:c,width:"150",fixed:"left"},{default:e.withCtx(({row:V})=>[e.createVNode(ee,{src:V.image,"onUpdate:src":r=>V.image=r,width:50,height:50,"append-to-body":"",format:{types:["image/png","image/jpg","image/gif","image/jpeg","image/avif","image/webp"]}},null,8,["src","onUpdate:src"])]),_:2},1032,["label"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.classArr,(c,U)=>(e.openBlock(),e.createBlock(l,{key:U,align:"center",width:"180",label:c.name},{default:e.withCtx(({row:V})=>{var r;return[e.createTextVNode(e.toDisplayString(Array.isArray(V.specs)?(r=V.specs)==null?void 0:r[U]:V.specs.name),1)]}),_:2},1032,["label"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value.slice(1),(c,U)=>(e.openBlock(),e.createBlock(l,{key:U,align:"center",width:"180",label:c},{default:e.withCtx(({row:V})=>[e.unref(K)[c]==="limitType"?(e.openBlock(),e.createBlock(y,{key:0,modelValue:V.limitType,"onUpdate:modelValue":r=>V.limitType=r},{default:e.withCtx(()=>[e.createVNode(x,{label:"规格限购",value:"SKU_LIMITED"}),e.createVNode(x,{label:e.unref(b).query.type==="ProcurementRelease"?"不限购":"无限库存",value:"UNLIMITED"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.unref(K)[c]==="stockType"?(e.openBlock(),e.createBlock(y,{key:1,modelValue:V.stockType,"onUpdate:modelValue":r=>V.stockType=r,disabled:e.unref(b).query.type==="ProcurementRelease"},{default:e.withCtx(()=>[e.createVNode(x,{label:e.unref(b).query.type==="ProcurementRelease"?"有限库存":"限制库存",value:"LIMITED"},null,8,["label"]),e.createVNode(x,{label:e.unref(b).query.type==="ProcurementRelease"?"无限库存":"不限制库存",value:"UNLIMITED"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):e.unref(K)[c]==="limitNum"?(e.openBlock(),e.createBlock(o,{key:2,modelValue:V.limitNum,"onUpdate:modelValue":r=>V.limitNum=r,disabled:V.limitType==="UNLIMITED",precision:0,controls:!1},null,8,["modelValue","onUpdate:modelValue","disabled"])):e.unref(K)[c]==="initStock"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[V.stockType==="UNLIMITED"?(e.openBlock(),e.createBlock(o,{key:0,"model-value":0,disabled:"",precision:0,controls:!1})):(e.openBlock(),e.createBlock(o,{key:1,modelValue:V.initStock,"onUpdate:modelValue":r=>V.initStock=r,precision:0,controls:!1},null,8,["modelValue","onUpdate:modelValue"]))],64)):["price","salePrice"].includes(e.unref(K)[c])?(e.openBlock(),e.createBlock(o,{key:4,modelValue:V[e.unref(K)[c]],"onUpdate:modelValue":r=>V[e.unref(K)[c]]=r,controls:!1,max:999999,min:0,precision:2},null,8,["modelValue","onUpdate:modelValue"])):(e.openBlock(),e.createBlock(o,{key:5,modelValue:V[e.unref(K)[c]],"onUpdate:modelValue":r=>V[e.unref(K)[c]]=r,precision:0,controls:!1},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128))]),_:1},8,["data"])])])}}}),Ft="",at=Z(lt,[["__scopeId","data-v-39e77bf7"]]),rt={style:{"text-align":"center","font-size":"12px"}},nt=e.defineComponent({__name:"GoodOnly",setup(p,{expose:I}){const{divTenThousand:T}=ae(),b=G.useRoute();e.onActivated(()=>{A(),R()}),e.onBeforeMount(()=>{A(),R()});const N=e.inject("form"),k=e.ref([]),z=e.ref([]),A=async()=>{const{data:l}=await pe({featuresType:"ATTRIBUTE",size:100}),{data:o}=await pe({featuresType:"ARGUMENTS",size:100});k.value=l.records,z.value=o.records},i=()=>({featuresType:"",id:"",shopId:"",featuresValue:{featureName:"",isRequired:"",isMultiSelect:"",featureValues:[]}}),n=(l,o,h)=>l===""?"":l?h:o,m=e.ref({productAttribute:[],productParameter:[]}),R=()=>{var l,o,h,x;b.query.id?(m.value.productAttribute=((o=(l=N.submitForm.value.extra)==null?void 0:l.productAttributes)==null?void 0:o.map(y=>({id:y.id,featuresValue:y})))||[],m.value.productParameter=((x=(h=N.submitForm.value.extra)==null?void 0:h.productParameters)==null?void 0:x.map(y=>({id:y.id,featuresValue:y})))||[]):m.value={productAttribute:[],productParameter:[]}},O=(l,o,h)=>{m.value[l][o].featuresValue.featureValues=m.value[l][o].featuresValue.featureValues.filter((x,y)=>y!==h)},D=(l,o)=>{m.value[l]=m.value[l].filter((h,x)=>x!==o)};return I({handleSpacObj:()=>({productAttribute:m.value.productAttribute.map(l=>({...l.featuresValue,id:l.id})),productParameter:m.value.productParameter.map(l=>({...l.featuresValue,id:l.id}))})}),(l,o)=>{const h=e.resolveComponent("el-button"),x=e.resolveComponent("el-option"),y=e.resolveComponent("el-select"),c=e.resolveComponent("el-table-column"),U=e.resolveComponent("el-tag"),V=e.resolveComponent("el-icon"),r=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(X,{title:"商品属性"},{default:e.withCtx(()=>o[4]||(o[4]=[e.createElementVNode("span",{style:{color:"rgba(108, 108, 108, 1)","font-size":"12px","font-weight":"400","margin-left":"50px"}}," 下单时选择诸如甜度、口味、加料等商品属性不同属性值价格不同，可提升商品客单价及用户体验，拖动调整顺序 ",-1)])),_:1}),e.createVNode(h,{type:"primary",style:{margin:"15px 0"},onClick:o[0]||(o[0]=t=>m.value.productAttribute.push(i()))},{default:e.withCtx(()=>o[5]||(o[5]=[e.createTextVNode("添加属性")])),_:1}),e.createVNode(re,{"limit-pid":!1,onChangeData:o[1]||(o[1]=t=>m.value.productAttribute=t)},{default:e.withCtx(()=>[e.createVNode(r,{data:m.value.productAttribute,border:""},{default:e.withCtx(()=>[e.createVNode(c,{label:"属性名称",width:"130"},{default:e.withCtx(({row:t,$index:s})=>[e.createVNode(y,{"model-value":t,"value-key":"id",onChange:f=>m.value.productAttribute[s]=e.unref(le.cloneDeep)(f)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,f=>(e.openBlock(),e.createBlock(x,{key:f.id,disabled:m.value.productAttribute.some(C=>C.id===f.id),label:f.featuresValue.featureName,value:f},null,8,["disabled","label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:1}),e.createVNode(c,{label:"属性类型",width:"100"},{default:e.withCtx(({row:t})=>[e.createElementVNode("div",rt,e.toDisplayString(n(t.featuresValue.isRequired,"必选","选填"))+" ， "+e.toDisplayString(n(t.featuresValue.isMultiSelect,"多选"," 单选")),1)]),_:1}),e.createVNode(c,{label:"属性值"},{default:e.withCtx(({row:t,$index:s})=>[t.featuresValue.featureValues?(e.openBlock(),e.createBlock(e.unref(de.VueDraggableNext),{key:0,modelValue:t.featuresValue.featureValues,"onUpdate:modelValue":f=>t.featuresValue.featureValues=f,group:`arrTag${s}`},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.featuresValue.featureValues,(f,C)=>(e.openBlock(),e.createBlock(U,{key:C,closable:"",effect:"plain",size:"large",type:"info","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px"},onClose:q=>O("productAttribute",s,C)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.firstValue)+" + "+e.toDisplayString(e.unref(T)(f.secondValue))+"元 ",1)]),_:2},1032,["onClose"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(c,{label:"操作",width:"100",fixed:"right"},{default:e.withCtx(({$index:t})=>[e.createVNode(V,{size:"22px",color:"#FF4D4D",onClick:s=>D("productAttribute",t)},{default:e.withCtx(()=>[e.createVNode(e.unref(v.Delete))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e.createVNode(X,{title:"商品参数",style:{"margin-top":"15px"}},{default:e.withCtx(()=>o[6]||(o[6]=[e.createElementVNode("span",{style:{color:"rgba(108, 108, 108, 1)","font-weight":"400","font-size":"12px","margin-left":"50px"}}," 可拖动调整顺序 ",-1)])),_:1}),e.createVNode(h,{type:"primary",style:{margin:"15px 0"},onClick:o[2]||(o[2]=t=>m.value.productParameter.push(i()))},{default:e.withCtx(()=>o[7]||(o[7]=[e.createTextVNode("添加参数")])),_:1}),e.createVNode(re,{"limit-pid":!1,onChangeData:o[3]||(o[3]=t=>m.value.productParameter=t)},{default:e.withCtx(()=>[e.createVNode(r,{data:m.value.productParameter,border:""},{default:e.withCtx(()=>[e.createVNode(c,{label:"参数名称",width:"130"},{default:e.withCtx(({row:t,$index:s})=>[e.createVNode(y,{"model-value":t,"value-key":"id",onChange:f=>m.value.productParameter[s]=e.unref(le.cloneDeep)(f)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(z.value,f=>(e.openBlock(),e.createBlock(x,{key:f.id,disabled:m.value.productParameter.some(C=>C.id===f.id),label:f.featuresValue.featureName,value:f},null,8,["disabled","label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:1}),e.createVNode(c,{label:"参数值"},{default:e.withCtx(({row:t,$index:s})=>[t.featuresValue.featureValues?(e.openBlock(),e.createBlock(e.unref(de.VueDraggableNext),{key:0,modelValue:t.featuresValue.featureValues,"onUpdate:modelValue":f=>t.featuresValue.featureValues=f,group:`goodArrTag${s}`},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.featuresValue.featureValues,(f,C)=>(e.openBlock(),e.createBlock(U,{key:C,closable:"",effect:"plain",size:"large",type:"info","disable-transitions":!1,onClose:q=>O("productParameter",s,C)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.firstValue),1)]),_:2},1032,["onClose"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(c,{label:"操作",width:"100",fixed:"right"},{default:e.withCtx(({$index:t})=>[e.createVNode(V,{size:"22px",color:"#FF4D4D",onClick:s=>D("productParameter",t)},{default:e.withCtx(()=>[e.createVNode(e.unref(v.Delete))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}}),jt="",st=Z(nt,[["__scopeId","data-v-c6052e76"]]),it={key:0},dt={key:1},ct={class:"inputnumber"},pt={class:"inputnumber"},mt={class:"inputnumber"},ft={class:"inputnumber"},ut={class:"inputnumber"},_t={class:"inputnumber"},gt=e.defineComponent({__name:"NewSaleInfo",emits:["changeSpecificationType"],setup(p,{expose:I,emit:T}){const b=T,N=G.useRoute(),{divTenThousand:k}=ae(),z=e.ref(),A=e.ref(),n=e.inject("form").submitForm,m=e.ref([]),R=e.ref(),O=(r,t,s)=>{t<=0?s(new Error("输入数值请大于0")):Number(n.value.skus[0].price)<Number(t)?s(new Error("实售价大于指导价")):s()},D=(r,t,s)=>{t<=0?s(new Error("输入数值请大于0")):Number(n.value.skus[0].salePrice)>Number(t)?s(new Error("实售价大于指导价")):s()},_=e.reactive({"skus[0].price":[{required:!0,validator:D,trigger:"blur"}],"skus[0].salePrice":[{required:!0,validator:O,trigger:"blur"}]});e.onActivated(()=>{c()});const l=async r=>{const{type:t,list:s}=r;if(!s.length){n.value.skus=[{id:"",image:"",initSalesVolume:0,limitNum:0,initStock:0,limitType:"UNLIMITED",price:0,productId:"",salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0}];return}n.value.specGroups=s,t!=="addSpec"&&(n.value.skus=U(s))},o=r=>{n.value.skus=r},h=e.computed(()=>{var r,t;return(t=(r=n.value)==null?void 0:r.specGroups)==null?void 0:t.length}),x=e.ref("SINGLE_SPEC"),y=r=>{b("changeSpecificationType",r),x.value=r};async function c(){var r,t,s,f;if(N.query.id){const C=((r=n.value)==null?void 0:r.sellType)==="CONSIGNMENT"?(t=n.value)==null?void 0:t.supplierId:ie.useShopInfoStore().shopInfo.id,{code:q,data:d}=await Ne(C,N.query.id);if(q!==200){M.ElMessage.error("获取商品sku失败");return}console.log(!((s=n.value.skus)!=null&&s[0].id)),(f=n.value.skus)!=null&&f[0].id||(d.skus.forEach(w=>{w.initStock=0,w.price=Number(k(w.price)),w.salePrice=Number(k(w.salePrice))}),n.value={...n.value,...d}),y(h.value?"MUTI_SPEC":"SINGLE_SPEC")}else y(h.value?"MUTI_SPEC":"SINGLE_SPEC")}function U(r){let t=[];return t=r.map(s=>s.children),t.length<=1?t=t[0]:t=t.reduce((s,f)=>{let C=[];return s.forEach(q=>{f.forEach(d=>{q instanceof Array?C.push([...q,d]):C.push([q,d])})}),C}),t.map(s=>V(s))}function V(r){let t=[];Array.isArray(r)?t=r.map(f=>f.name):t.push(r.name);const s=n.value.skus.find(f=>f.specs.every(C=>t.includes(C)));return s&&(s.specs=t),s||{specs:t,stockType:"LIMITED",initSalesVolume:0,limitType:"UNLIMITED",limitNum:0,image:"",price:0,initStock:0,salePrice:0,weight:"0"}}return I({currentFormRef:z,GoodOnlyRef:A}),(r,t)=>{const s=e.resolveComponent("el-radio"),f=e.resolveComponent("el-radio-group"),C=e.resolveComponent("el-form-item"),q=e.resolveComponent("el-input-number"),d=e.resolveComponent("el-col"),w=e.resolveComponent("el-option"),B=e.resolveComponent("el-select"),W=e.resolveComponent("el-row"),H=e.resolveComponent("el-form");return e.openBlock(),e.createBlock(H,{ref_key:"currentFormRef",ref:z,model:e.unref(n),rules:_,"label-width":"100px"},{default:e.withCtx(()=>{var J;return[e.createVNode(X,{title:"规格类型"}),e.createVNode(C,{label:"规格类型",style:{"margin-top":"10px"}},{default:e.withCtx(()=>[e.createVNode(f,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=E=>x.value=E),size:"small",disabled:e.unref(N).query.type==="ProcurementRelease",onChange:y},{default:e.withCtx(()=>[e.createVNode(s,{value:"SINGLE_SPEC"},{default:e.withCtx(()=>t[9]||(t[9]=[e.createTextVNode("单规格")])),_:1}),e.createVNode(s,{value:"MUTI_SPEC"},{default:e.withCtx(()=>t[10]||(t[10]=[e.createTextVNode("多规格")])),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),x.value==="MUTI_SPEC"?(e.openBlock(),e.createElementBlock("div",it,[e.createVNode(Qe,{"class-arr":e.unref(n).specGroups,onChangeClass:l},null,8,["class-arr"]),e.unref(n).specGroups&&e.unref(n).specGroups.length>0?(e.openBlock(),e.createBlock(at,{key:0,ref_key:"goodNormTable",ref:R,list:e.unref(n).skus,"class-arr":e.unref(n).specGroups,"memo-spec-list":m.value,onChangeNormList:o},null,8,["list","class-arr","memo-spec-list"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),x.value==="SINGLE_SPEC"&&((J=e.unref(n).skus)!=null&&J.length)?(e.openBlock(),e.createElementBlock("div",dt,[e.createVNode(W,{gutter:8},{default:e.withCtx(()=>[e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"划线价",prop:"skus[0].price"},{default:e.withCtx(()=>[e.createElementVNode("div",ct,[e.createVNode(q,{modelValue:e.unref(n).skus[0].price,"onUpdate:modelValue":t[1]||(t[1]=E=>e.unref(n).skus[0].price=E),controls:!1,max:999999,precision:2,class:"input_number com__input--width"},null,8,["modelValue"]),t[11]||(t[11]=e.createElementVNode("div",{class:"inputnumber__icon"},"元",-1))])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"销售价",prop:"skus[0].salePrice"},{default:e.withCtx(()=>[e.createElementVNode("div",pt,[e.createVNode(q,{modelValue:e.unref(n).skus[0].salePrice,"onUpdate:modelValue":t[2]||(t[2]=E=>e.unref(n).skus[0].salePrice=E),max:999999,precision:2,controls:!1,class:"input_number com__input--width"},null,8,["modelValue"]),t[12]||(t[12]=e.createElementVNode("div",{class:"inputnumber__icon"},"元",-1))])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"初始销量"},{default:e.withCtx(()=>[e.createElementVNode("div",mt,[e.createVNode(q,{modelValue:e.unref(n).skus[0].initSalesVolume,"onUpdate:modelValue":t[3]||(t[3]=E=>e.unref(n).skus[0].initSalesVolume=E),placeholder:"0",controls:!1,class:"input_number com__input--width"},null,8,["modelValue"]),t[13]||(t[13]=e.createElementVNode("div",{class:"inputnumber__icon"},"个",-1))])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"重量"},{default:e.withCtx(()=>[e.createElementVNode("div",ft,[e.createVNode(q,{modelValue:e.unref(n).skus[0].weight,"onUpdate:modelValue":t[4]||(t[4]=E=>e.unref(n).skus[0].weight=E),controls:!1,class:"input_number com__input--width"},{append:e.withCtx(()=>t[14]||(t[14]=[e.createTextVNode(".com")])),_:1},8,["modelValue"]),t[15]||(t[15]=e.createElementVNode("div",{class:"inputnumber__icon"},"kg",-1))])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"限购类型"},{default:e.withCtx(()=>[e.createVNode(B,{modelValue:e.unref(n).skus[0].limitType,"onUpdate:modelValue":t[5]||(t[5]=E=>e.unref(n).skus[0].limitType=E),style:{width:"200px"}},{default:e.withCtx(()=>[e.createVNode(w,{label:"限购",value:"PRODUCT_LIMITED"}),e.unref(n).specGroups.length?(e.openBlock(),e.createBlock(w,{key:0,label:"规格限购",value:"SKU_LIMITED"})):e.createCommentVNode("",!0),e.createVNode(w,{label:"不限购",value:"UNLIMITED"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"库存类型"},{default:e.withCtx(()=>[e.createVNode(B,{modelValue:e.unref(n).skus[0].stockType,"onUpdate:modelValue":t[6]||(t[6]=E=>e.unref(n).skus[0].stockType=E),disabled:e.unref(N).query.type==="ProcurementRelease"||e.unref(n).productType!=="REAL_PRODUCT",style:{width:"200px"}},{default:e.withCtx(()=>[e.createVNode(w,{label:"有限库存",value:"LIMITED"}),e.createVNode(w,{label:"无限库存",value:"UNLIMITED"})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"限购数量"},{default:e.withCtx(()=>[e.createElementVNode("div",ut,[e.createVNode(q,{modelValue:e.unref(n).skus[0].limitNum,"onUpdate:modelValue":t[7]||(t[7]=E=>e.unref(n).skus[0].limitNum=E),disabled:e.unref(n).skus[0].limitType==="UNLIMITED",min:0,controls:!1,class:"input_number com__input--width"},null,8,["modelValue","disabled"]),t[16]||(t[16]=e.createElementVNode("div",{class:"inputnumber__icon"},"个",-1))])]),_:1})]),_:1}),e.createVNode(d,{span:12},{default:e.withCtx(()=>[e.createVNode(C,{label:"库存",prop:"skus[0].initStock"},{default:e.withCtx(()=>[e.createElementVNode("div",_t,[e.createVNode(q,{modelValue:e.unref(n).skus[0].initStock,"onUpdate:modelValue":t[8]||(t[8]=E=>e.unref(n).skus[0].initStock=E),style:{width:"200px"},disabled:e.unref(n).skus[0].stockType==="UNLIMITED",max:999999,min:0,precision:0,controls:!1,class:"input_number com__input--width"},null,8,["modelValue","disabled"]),t[17]||(t[17]=e.createElementVNode("div",{class:"inputnumber__icon"},"个",-1))])]),_:1})]),_:1})]),_:1})])):e.createCommentVNode("",!0),e.createVNode(st,{ref_key:"GoodOnlyRef",ref:A},null,512)]}),_:1},8,["model","rules"])}}}),Gt="",ht=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"})),xt={class:"info"},bt=["src"],yt={class:"info__edit"},Vt=e.defineComponent({name:"NewProductInfoAddon"}),Ct=e.defineComponent({...Vt,setup(p){const T=e.inject("form").submitForm;return(b,N)=>(e.openBlock(),e.createElementBlock("div",xt,[e.createElementVNode("img",{src:e.unref(Ve),class:"info__img"},null,8,bt),e.createElementVNode("div",yt,[e.createVNode(ye,{content:e.unref(T).detail,"onUpdate:content":N[0]||(N[0]=k=>e.unref(T).detail=k),height:"711px"},null,8,["content"])])]))}}),zt="",Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Z(Ct,[["__scopeId","data-v-9a512c4c"]])},Symbol.toStringTag,{value:"Module"}));return Re});
