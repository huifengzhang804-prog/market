(function(e,X){typeof exports=="object"&&typeof module<"u"?module.exports=X(require("vue"),require("@/components/ChromeTab.vue"),require("lodash-es"),require("@/components/SchemaForm.vue"),require("@/components/PageManage.vue"),require("decimal.js"),require("@/components/q-upload/q-upload.vue"),require("@/composables/useConvert"),require("@vueuse/core"),require("@/components/q-icon/q-icon.vue"),require("element-plus"),require("@/utils/date"),require("vue-clipboard3"),require("vue-router"),require("@/store/modules/shopInfo"),require("@element-plus/icons-vue"),require("@/assets/images/icon/paymentVoucher.png"),require("@/components/element-plus/el-table/ElTableEmpty/index.vue"),require("@/components/qszr-core/packages/q-table/QTable"),require("@/components/qszr-core/packages/q-table/q-table-column.vue"),require("@/apis/http")):typeof define=="function"&&define.amd?define(["vue","@/components/ChromeTab.vue","lodash-es","@/components/SchemaForm.vue","@/components/PageManage.vue","decimal.js","@/components/q-upload/q-upload.vue","@/composables/useConvert","@vueuse/core","@/components/q-icon/q-icon.vue","element-plus","@/utils/date","vue-clipboard3","vue-router","@/store/modules/shopInfo","@element-plus/icons-vue","@/assets/images/icon/paymentVoucher.png","@/components/element-plus/el-table/ElTableEmpty/index.vue","@/components/qszr-core/packages/q-table/QTable","@/components/qszr-core/packages/q-table/q-table-column.vue","@/apis/http"],X):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopPurchaseList=X(e.ShopPurchaseListContext.Vue,e.ShopPurchaseListContext.ChromeTabs,e.ShopPurchaseListContext.Lodash,e.ShopPurchaseListContext.SchemaForm,e.ShopPurchaseListContext.PageManageTwo,e.ShopPurchaseListContext.Decimal,e.ShopPurchaseListContext.QUpload,e.ShopPurchaseListContext.UseConvert,e.ShopPurchaseListContext.VueUse,e.ShopPurchaseListContext.QIcon,e.ShopPurchaseListContext.ElementPlus,e.ShopPurchaseListContext.DateUtil,e.ShopPurchaseListContext.VueClipboard3,e.ShopPurchaseListContext.VueRouter,e.ShopPurchaseListContext.ShopInfoStore,e.ShopPurchaseListContext.ElementPlusIconsVue,e.ShopPurchaseListContext.paymentVoucher,e.ShopPurchaseListContext.ElTableEmpty,e.ShopPurchaseListContext.QTable,e.ShopPurchaseListContext.QTableColumn,e.ShopPurchaseListContext.Request))})(this,function(e,X,ae,le,ie,re,xe,J,$e,Z,E,Re,Oe,ee,Y,Ae,Me,Fe,Ne,M,w){"use strict";var Ce=document.createElement("style");Ce.textContent=`@charset "UTF-8";.count-down[data-v-a7cad4bc]{color:#f54319}.el-form-item[data-v-e699432b]{margin-bottom:5px}.invoice-dialog[data-v-e4894b3b]{color:#000}.invoice-dialog-main[data-v-e4894b3b]{display:flex;justify-content:center;align-items:center;justify-content:space-between}.invoice-dialog-main__content[data-v-e4894b3b]{margin:10px 0;display:flex;justify-content:center;align-items:center;justify-content:space-between}.invoice-dialog-main__note[data-v-e4894b3b]{display:flex;justify-content:center;align-items:center;align-items:flex-start;justify-content:flex-start;margin-top:10px}.invoice-dialog-main__type[data-v-e4894b3b]{margin-top:10px;display:flex;flex-direction:column;align-items:flex-start}.invoice-dialog-main--price[data-v-e4894b3b]{color:#fd0505;font-size:14px;font-weight:700}.invoice-dialog-main--price[data-v-e4894b3b]:before{content:"￥";font-size:10px;font-weight:400}.oneClickProcurement__commodity[data-v-55ad8652]{display:flex;align-items:center}.oneClickProcurement__commodity img[data-v-55ad8652]{width:60px;height:60px;flex-shrink:0}.oneClickProcurement__commodity span[data-v-55ad8652]{overflow:hidden;text-overflow:ellipsis;display:box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-left:10px}.oneClickProcurement__form[data-v-55ad8652]{display:flex;justify-content:flex-end;margin-right:98px}.batch__commodity[data-v-70c194b5]{display:flex;align-items:center}.batch__commodity img[data-v-70c194b5]{width:60px;height:60px;flex-shrink:0}.batch__commodity span[data-v-70c194b5]{overflow:hidden;text-overflow:ellipsis;display:box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-left:10px}.batch__form[data-v-70c194b5]{display:flex;justify-content:flex-end}[data-v-6ad43d4d]{font-size:14px}.invoice-title[data-v-6ad43d4d]{display:flex;justify-content:center;align-items:center}.invoice-desc[data-v-6ad43d4d]{display:flex;justify-content:center;align-items:center;color:#fd0505;margin-top:7px}.proof-img[data-v-6ad43d4d]{width:100%;height:350px;object-fit:contain}.copy[data-v-6ad43d4d]{color:#1890ff;margin-left:8px;cursor:pointer}.text-red[data-v-6ad43d4d]{color:red}.text-grey[data-v-6ad43d4d]{color:#999}.customer[data-v-6ad43d4d]{width:100%;height:42px;display:flex;flex-direction:column;justify-content:space-around;font-size:14px;color:#333}.customer div[data-v-6ad43d4d]{display:flex;align-items:center}.customer__name[data-v-6ad43d4d]{display:inline-block;max-width:88px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.customer img[data-v-6ad43d4d]{width:16.25px;height:15.32px;margin-left:5px;cursor:pointer}.last[data-v-6ad43d4d]{position:absolute;right:20px;top:0;z-index:6;cursor:pointer;color:#303133}.good[data-v-82bc12e9]{padding:0 30px 0 45px;box-sizing:border-box;font-size:12px;font-family:Microsoft YaHei,Microsoft YaHei-Normal;font-weight:400;color:#000}.good__info[data-v-82bc12e9]{margin-bottom:24px}.good__img[data-v-82bc12e9]{display:flex;justify-content:flex-start;align-items:flex-start}.good__spec[data-v-82bc12e9]{width:758px}.b[data-v-82bc12e9]{font-size:12px;color:#000}[data-v-6562fcd8]{font-size:14px}.commodity-info[data-v-6562fcd8]{display:flex;align-items:center}.commodity-info img[data-v-6562fcd8]{width:68px;height:68px}.commodity-info-text[data-v-6562fcd8]{height:68px;width:217px;display:flex;flex-direction:column;justify-content:space-between;margin-left:8px}.commodity-info-text p[data-v-6562fcd8]{overflow:hidden;text-overflow:ellipsis;display:box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.customer[data-v-6562fcd8]{width:100%;display:flex;flex-direction:column;justify-content:space-around;font-size:14px;color:#333}.customer div[data-v-6562fcd8]{display:flex;align-items:center}.customer__name[data-v-6562fcd8]{display:inline-block;max-width:156px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:3px}.customer img[data-v-6562fcd8]{width:16.25px;height:15.32px;margin-left:5px;cursor:pointer}.good[data-v-466eb7a7]{padding:0 30px 0 45px;box-sizing:border-box;font-size:12px;font-family:Microsoft YaHei,Microsoft YaHei-Normal;font-weight:400;color:#000}.good__info[data-v-466eb7a7]{margin-bottom:24px}.good__img[data-v-466eb7a7]{display:flex;justify-content:flex-start;align-items:flex-start}.good__spec[data-v-466eb7a7]{width:758px}.b[data-v-466eb7a7]{font-size:12px;color:#000}img[data-v-99c6b116]{vertical-align:top}[data-v-dc7c38b7]{font-size:14px}.commodity-info[data-v-dc7c38b7]{display:flex;align-items:center;justify-content:flex-start;width:100%}.commodity-info img[data-v-dc7c38b7]{width:68px;height:68px}.commodity-info .commodity-info-text[data-v-dc7c38b7]{width:217px;height:68px;margin-left:8px;display:flex;flex-direction:column;justify-content:space-between}.commodity-info .commodity-info-text p[data-v-dc7c38b7]{overflow:hidden;text-overflow:ellipsis;display:box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.customer[data-v-dc7c38b7]{width:100%;display:flex;flex-direction:column;justify-content:space-around;font-size:14px;color:#333}.customer div[data-v-dc7c38b7]{display:flex;align-items:center}.customer__name[data-v-dc7c38b7]{display:inline-block;max-width:95px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:3px}.customer img[data-v-dc7c38b7]{width:16.25px;height:15.32px;margin-left:5px;cursor:pointer}
`,document.head.appendChild(Ce);const ze={class:"q_plugin_container"},Ue=e.defineComponent({__name:"ShopPurchaseList",setup(t){const a=e.ref("purchaseOrder"),l=[{name:"purchaseOrder",label:"采购订单"},{name:"waitingPublish",label:"待发布"},{name:"release",label:"已发布"}],n=g=>{g&&(a.value=g)},d={purchaseOrder:e.defineAsyncComponent(()=>Promise.resolve().then(()=>$o)),waitingPublish:e.defineAsyncComponent(()=>Promise.resolve().then(()=>tn)),release:e.defineAsyncComponent(()=>Promise.resolve().then(()=>wn))};return(g,p)=>(e.openBlock(),e.createElementBlock("div",ze,[e.createVNode(X,{"tab-list":l,value:a.value,onHandleTabs:n},null,8,["value"]),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(d[a.value])))]))}}),qe=(t={})=>w.put({url:"addon-supplier/supplier/order/pay",data:t}),He=t=>w.put({url:`addon-supplier/supplier/order/close/${t}`}),Ve=t=>w.get({url:`addon-supplier/supplier/order/storage/${t}`}),je=t=>w.put({url:"addon-supplier/supplier/order/storage",data:t}),Ge=t=>w.put({url:`addon-supplier/supplier/order/complete/${t}`}),Ye=t=>w.get({url:"addon-supplier/supplier/order/publish",params:t}),se=(t,a)=>w.post({url:`gruul-mall-carrier-pigeon/pigeon/group-chat-rooms/${t}/${a}`}),We=t=>w.get({url:"gruul-mall-goods/manager/product/purchase/issue/products",params:t}),ce=(t={})=>w.get({url:"gruul-mall-shop/shop/info/getSupplierInfo",params:t}),Ke=(t={})=>w.get({url:"addon-supplier/supplier/order",params:t}),Se=(t,a,l=!1)=>w.get({url:`gruul-mall-storage/storage/shop/${t}/product/${a}?isSupplier=${l}`}),be=()=>w.get({url:"gruul-mall-addon-platform/platform/shop/signing/category/choosable/list"}),Xe=t=>w.get({url:"addon-invoice/invoice/invoice-headers/pageInvoiceHeader",params:{...t,ownerType:"SHOP"}}),Je="addon-invoice/invoice/",Ze=t=>w.post({url:`${Je}invoiceRequest`,data:t}),Ee=t=>w.get({url:"addon-invoice/invoice/invoiceSettings",params:t}),Qe=t=>w.get({url:`addon-invoice/invoice/invoiceRequest/${t}`}),ve=t=>w.get({url:"addon-invoice/invoice/invoiceRequest/pre-request",params:t}),et=t=>w.put({url:`addon-invoice/invoice/invoiceRequest/${t}`}),tt=t=>w.post({url:"addon-invoice/invoice/invoiceAttachment/re-send",data:t}),ke=()=>w.get({url:"addon-invoice/invoice/invoice-headers/getDefaultInvoiceHeader",params:{invoiceHeaderOwnerType:"SHOP"}}),Te=t=>w.post({url:"addon-supplier/supplier/order/export",data:t}),ot=()=>w.get({url:"gruul-mall-overview/overview/shop/balance"}),nt=(t,a)=>w.put({url:`gruul-mall-goods/manager/product/updateStatus/${a}`,data:{keys:t}}),at=()=>w.get({url:"addon-supplier/supplier/order/config/payment/method"}),lt=e.defineComponent({__name:"search",emits:["search","supplierExport"],setup(t,{emit:a}){const l=e.ref([]),n=a,d=e.reactive({supplierId:"",no:"",date:""}),g=[{label:"订单号",prop:"no",valueType:"copy",fieldProps:{placeholder:"请输入订单号"}},{label:"供应商",prop:"supplierId",valueType:"select",options:l,fieldProps:{placeholder:"请输入店铺名称",props:{expandTrigger:"hover"},filterable:!0,remote:!0,reserveKeyword:!0,remoteMethod:m=>{r(m)}}},{label:"采购员手机",labelWidth:"85px",prop:"purchasePhone",valueType:"copy",fieldProps:{placeholder:"请输入采购员手机"}},{label:"下单时间",prop:"date",valueType:"date-picker",fieldProps:{type:"daterange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY/MM/DD",valueFormat:"YYYY-MM-DD"}}],p=()=>{var i,N;const m=ae.cloneDeep(d);m.startTime=Array.isArray(m.date)?(i=m.date)==null?void 0:i[0]:void 0,m.endTime=Array.isArray(m.date)?(N=m.date)==null?void 0:N[1]:void 0,delete m.date,n("search",m)},r=async(m="")=>{const i=await ce({supplierName:m});i.data&&Array.isArray(i.data)&&i.data.length&&(l.value=i.data.map(N=>({label:N.name,value:N.id})))},y=()=>{Object.keys(d).forEach(m=>d[m]=""),p()},u=()=>{n("supplierExport",d)};return(m,i)=>{const N=e.resolveComponent("el-button");return e.openBlock(),e.createBlock(le,{modelValue:d,"onUpdate:modelValue":i[0]||(i[0]=s=>d=s),columns:g,"show-number":3,onSearchHandle:p,onHandleReset:y},{otherOperations:e.withCtx(()=>[e.createVNode(N,{class:"from_btn",round:"",type:"primary",onClick:u},{default:e.withCtx(()=>i[1]||(i[1]=[e.createTextVNode("导出")])),_:1})]),_:1},8,["modelValue"])}}}),Ie={UNPAID:"待支付",PAYMENT_AUDIT:"待审核",WAITING_FOR_DELIVER:"待发货",WAITING_FOR_PUTIN:"待入库",FINISHED:"已完成",CLOSED:"已关闭"};function it(t,a=1e3,l={}){const{immediate:n=!0,immediateCallback:d=!1}=l;let g=null;const p=e.ref(!1);function r(){g&&(clearInterval(g),g=null)}function y(){p.value=!1,r()}function u(){a<=0||(p.value=!0,d&&t(),r(),g=setInterval(t,a))}return n&&u(),{isActive:p,pause:y,resume:u,clean:r}}const rt=(t,a)=>{const l=e.reactive({day:"00",hours:"00",minutes:"00",seconds:"00"});if(!a)return{...e.toRefs(l)};const g=new Date(t.replaceAll("-","/")).getTime()+parseInt(a)*1e3-new Date().getTime(),{day:p,hours:r,minutes:y,seconds:u}=st(g);return l.day=p,l.hours=r,l.minutes=y,l.seconds=u,{...e.toRefs(l)}},st=t=>{let d=0,g=0,p=0,r=0;for(;t>864e5;)t-=864e5,d++;for(;t>36e5;)t-=36e5,g++;for(;t>6e4;)t-=6e4,p++;for(;t>1e3;)t-=1e3,r++;return{day:String(d).padStart(2,"0"),hours:String(g).padStart(2,"0"),minutes:String(p).padStart(2,"0"),seconds:String(r).padStart(2,"0")}},ct={class:"count-down"},dt={key:0},pt=e.defineComponent({__name:"index",props:{createTime:{default:""},payTimeout:{default:""}},setup(t){const a=t,l=e.reactive({day:"00",hours:"00",minutes:"00",seconds:"00"}),n=e.ref(!0),{clean:d}=it(()=>{const{day:g,hours:p,minutes:r,seconds:y}=rt(a.createTime,a.payTimeout);l.day=g.value,l.hours=p.value,l.minutes=r.value,l.seconds=y.value,g.value==="00"&&p.value==="00"&&r.value==="00"&&y.value==="00"?(n.value=!0,e.nextTick(()=>d())):n.value=!1},1e3,{immediate:!0,immediateCallback:!0});return e.onBeforeUnmount(()=>d()),(g,p)=>(e.openBlock(),e.createElementBlock("div",null,[p[0]||(p[0]=e.createElementVNode("span",null,"(",-1)),e.createElementVNode("span",ct,[l.day!=="00"?(e.openBlock(),e.createElementBlock("span",dt,e.toDisplayString(l.day)+"天",1)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(l.hours)+":"+e.toDisplayString(l.minutes)+":"+e.toDisplayString(l.seconds),1)]),p[1]||(p[1]=e.createElementVNode("span",null,")",-1))]))}}),An="",z=(t,a)=>{const l=t.__vccOpts||t;for(const[n,d]of a)l[n]=d;return l},mt=z(pt,[["__scopeId","data-v-a7cad4bc"]]),ft=()=>{const t=e.ref(!1),a=e.ref("");return{showProof:t,goToShowProof:n=>{var d,g;a.value=((g=(d=n==null?void 0:n.extra)==null?void 0:d.pay)==null?void 0:g.proof)||"",t.value=!0},currentProof:a}},ht={style:{color:"red"}},gt={style:{"font-size":"18px"}},_t={style:{color:"red","font-size":"16px"}},ut={style:{display:"flex","flex-wrap":"wrap"}},yt=e.defineComponent({__name:"pay-order",props:{price:{default:()=>new re(0)}},setup(t,{expose:a}){const l=t,n=e.reactive({payType:"",proof:[]}),d=e.ref([]),g=e.ref(),p={payType:[{required:!0,message:"请选择支付方式",trigger:"blur"}],proof:[{required:!0,message:"请选择支付方式",trigger:"change"},{validator:(s,o,_)=>{n.payType==="OFFLINE"&&(o||_(new Error("请上传凭证"))),_()},trigger:"change"}]},r=e.ref(null),y=()=>new Promise((s,o)=>{r.value?r.value.validate(_=>{_?s(n):o("valid error")}):o("none instance")}),u=s=>{typeof s=="string"&&n.proof.push(s)},m=async()=>{const{data:s,code:o}=await ot();o===200&&s&&(g.value=s)},i=e.ref(!1);function N(){m().then(async()=>{var _;const{code:s,data:o}=await at();s===200&&(d.value=o.paymentMethods,console.log(d),o.paymentMethods.includes("SHOP_BALANCE")&&((_=g.value)==null?void 0:_.undrawn)/1e4>Number(l.price)?(n.payType="BALANCE",i.value=!1):o.paymentMethods.includes("PAY_OFF_LINE")?(n.payType="OFFLINE",i.value=!0):(n.payType="",i.value=!0))})}return N(),a({getPayOrderFormModel:y}),(s,o)=>{const _=e.resolveComponent("el-form-item"),S=e.resolveComponent("el-radio"),P=e.resolveComponent("el-radio-group"),B=e.resolveComponent("el-form");return e.openBlock(),e.createBlock(B,{ref_key:"formRef",ref:r,model:n,rules:p,"label-width":"80px","label-position":"right"},{default:e.withCtx(()=>[e.createVNode(_,{label:"应付款"},{default:e.withCtx(()=>[e.createElementVNode("span",ht,[o[1]||(o[1]=e.createTextVNode("￥")),e.createElementVNode("text",gt,e.toDisplayString(l.price.toFixed(2)),1)])]),_:1}),e.createVNode(_,{label:"支付方式",prop:"payType"},{default:e.withCtx(()=>[e.createVNode(P,{modelValue:n.payType,"onUpdate:modelValue":o[0]||(o[0]=x=>n.payType=x)},{default:e.withCtx(()=>[d.value.includes("SHOP_BALANCE")?(e.openBlock(),e.createBlock(S,{key:0,value:"BALANCE",disabled:i.value},{default:e.withCtx(()=>{var x;return[o[2]||(o[2]=e.createTextVNode("店铺余额(")),e.createElementVNode("span",_t,e.toDisplayString(String((((x=g.value)==null?void 0:x.undrawn)/1e4).toFixed(2))),1),o[3]||(o[3]=e.createTextVNode(") "))]}),_:1},8,["disabled"])):e.createCommentVNode("",!0),d.value.includes("PAY_OFF_LINE")?(e.openBlock(),e.createBlock(S,{key:1,value:"OFFLINE"},{default:e.withCtx(()=>o[4]||(o[4]=[e.createTextVNode("线下付款")])),_:1})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"])]),_:1}),n.payType==="OFFLINE"?(e.openBlock(),e.createBlock(_,{key:0,label:"付款凭证",prop:"proof"},{default:e.withCtx(()=>[e.createElementVNode("div",null,[o[5]||(o[5]=e.createElementVNode("div",{style:{color:"#999","font-size":"12px"}},"【最多可上传3张】，至少 1 张，每张2MB以内，jpg、jpeg、png",-1)),e.createElementVNode("div",ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.proof,(x,k)=>(e.openBlock(),e.createElementBlock("div",{key:x},[e.createVNode(xe,{src:n.proof[k],"onUpdate:src":I=>n.proof[k]=I,style:{"margin-right":"10px"},format:{size:2,width:1e4,height:1e4,types:["image/png","image/jpg","image/jpeg"]},cropper:!1,height:100,width:100},null,8,["src","onUpdate:src"])]))),128)),e.withDirectives(e.createVNode(xe,{format:{size:2,width:1e4,height:1e4,types:["image/png","image/jpg","image/jpeg"]},height:100,width:100,onChange:u},null,512),[[e.vShow,n.proof.length<3]])])])]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["model"])}}}),Fn="",xt=z(yt,[["__scopeId","data-v-e699432b"]]),Nt={PERSONAL:"个人",ENTERPRISE:"企业"},Ct={VAT_GENERAL:"增值税电子普通发票",VAT_SPECIAL:"增值税电子专用发票"},Vt={style:{padding:"0 30px"},class:"invoice-dialog"},St={class:"invoice-dialog-main"},bt={class:"invoice-dialog-main--name"},Et={class:"invoice-dialog-main--price"},kt={class:"invoice-dialog-main--number"},Tt={class:"invoice-dialog-main__note"},It={class:"invoice-dialog-main__type"},Dt={key:1},Pt={key:0,style:{display:"flex","align-items":"center","margin-top":"10px"}},Bt={style:{width:"200px"}},wt={class:"invoice-dialog-main__content"},Lt={style:{flex:"3"}},$t={style:{flex:"3"}},Rt={style:{flex:"3"}},Ot={class:"invoice-dialog-main__content"},At={style:{flex:"3"}},Mt={style:{flex:"3"}},Ft={style:{flex:"3"}},zt={class:"invoice-dialog-main__content"},Ut={style:{flex:"3"}},qt={style:{flex:"6"}},Ht={key:0,class:"invoice-dialog-main__content"},jt=e.defineComponent({__name:"invoice-dialog-main",props:{invoiceDetail:{type:Object,default:()=>({})},invoiceSetType:{type:String,default:""}},emits:["update:invoiceDetail"],setup(t,{emit:a}){const l=t,n=a,d=$e.useVModel(l,"invoiceDetail",n),{divTenThousand:g}=J(),p=e.ref([]),r=e.computed(()=>l.invoiceDetail.invoiceStatus!=="START"?l.invoiceDetail:p.value.find(u=>u.id===d.value.invoiceHeaderId));e.watchEffect(()=>{d.value.invoiceStatus==="START"&&y()});async function y(){const{data:u,msg:m,code:i}=await Xe();i===200&&(p.value=u.records)}return(u,m)=>{var P,B,x,k,I,U,F,b,O,C;const i=e.resolveComponent("el-tooltip"),N=e.resolveComponent("el-input"),s=e.resolveComponent("el-radio"),o=e.resolveComponent("el-radio-group"),_=e.resolveComponent("el-option"),S=e.resolveComponent("el-select");return e.openBlock(),e.createElementBlock("div",Vt,[e.createElementVNode("div",St,[e.createElementVNode("div",bt,[m[3]||(m[3]=e.createTextVNode(" 供应商名称：")),e.createElementVNode("span",null,e.toDisplayString(t.invoiceDetail.shopSupplierName),1)]),e.createElementVNode("div",null,[m[4]||(m[4]=e.createTextVNode(" 开票金额 ")),e.createElementVNode("span",Et,e.toDisplayString(e.unref(g)(t.invoiceDetail.invoiceAmount).toFixed(2)),1),e.createVNode(i,{class:"box-item",effect:"dark",content:"1、开票金额为消费者实付款金额，红包、优惠、购物券、消费返利等不在开票范围 2、如订单发生退货退款、退款，开票金额也将对应退款金额扣除。",placement:"bottom"},{default:e.withCtx(()=>[e.createVNode(Z,{name:"icon-wenhao1",color:"#666",style:{"margin-left":"5px"}})]),_:1})]),e.createElementVNode("div",kt,[m[5]||(m[5]=e.createTextVNode(" 订单号： ")),e.createElementVNode("span",null,e.toDisplayString(t.invoiceDetail.orderNo),1)])]),e.createElementVNode("div",Tt,[m[6]||(m[6]=e.createElementVNode("span",{style:{"flex-shrink":"0"}},"开票备注：",-1)),t.invoiceDetail.invoiceStatus!=="START"?(e.openBlock(),e.createBlock(N,{key:0,"model-value":t.invoiceDetail.billingRemarks,rows:2,style:{"margin-left":"10px"},disabled:"",type:"textarea",maxlength:"100"},null,8,["model-value"])):(e.openBlock(),e.createBlock(N,{key:1,modelValue:e.unref(d).billingRemarks,"onUpdate:modelValue":m[0]||(m[0]=f=>e.unref(d).billingRemarks=f),rows:2,style:{"margin-left":"10px"},type:"textarea",maxlength:"100",placeholder:"选填"},null,8,["modelValue"]))]),e.createElementVNode("div",It,[e.createElementVNode("div",null,[m[9]||(m[9]=e.createElementVNode("span",{style:{"margin-right":"10px"}},"发票类型：",-1)),t.invoiceDetail.invoiceStatus==="START"?(e.openBlock(),e.createBlock(o,{key:0,modelValue:e.unref(d).invoiceType,"onUpdate:modelValue":m[1]||(m[1]=f=>e.unref(d).invoiceType=f)},{default:e.withCtx(()=>[t.invoiceSetType==="VAT_GENERAL"||t.invoiceSetType==="VAT_COMBINED"?(e.openBlock(),e.createBlock(s,{key:0,value:"VAT_GENERAL"},{default:e.withCtx(()=>m[7]||(m[7]=[e.createTextVNode("增值税电子普通发票")])),_:1})):e.createCommentVNode("",!0),t.invoiceSetType==="VAT_SPECIAL"||t.invoiceSetType==="VAT_COMBINED"?(e.openBlock(),e.createBlock(s,{key:1,value:"VAT_SPECIAL"},{default:e.withCtx(()=>m[8]||(m[8]=[e.createTextVNode("增值税电子专用发票")])),_:1})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"])):(e.openBlock(),e.createElementBlock("span",Dt,e.toDisplayString(e.unref(Ct)[t.invoiceDetail.invoiceType]),1))]),t.invoiceDetail.invoiceStatus==="START"?(e.openBlock(),e.createElementBlock("div",Pt,[m[10]||(m[10]=e.createElementVNode("span",{style:{"margin-right":"12px"}},"抬头选择：",-1)),e.createElementVNode("div",Bt,[e.createVNode(S,{modelValue:e.unref(d).invoiceHeaderId,"onUpdate:modelValue":m[2]||(m[2]=f=>e.unref(d).invoiceHeaderId=f),placeholder:"请选择抬头",size:"small"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,f=>(e.openBlock(),e.createBlock(_,{key:f.id,label:f.header,value:f.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",wt,[e.createElementVNode("div",Lt,[m[11]||(m[11]=e.createTextVNode(" 抬头类型： ")),e.createElementVNode("span",null,e.toDisplayString(((P=r.value)==null?void 0:P.invoiceHeaderType)&&e.unref(Nt)[r.value.invoiceHeaderType]),1)]),e.createElementVNode("div",$t,"发票抬头： "+e.toDisplayString((B=r.value)==null?void 0:B.header),1),e.createElementVNode("div",Rt,"税号："+e.toDisplayString((x=r.value)==null?void 0:x.taxIdentNo),1)]),e.createElementVNode("div",Ot,[e.createElementVNode("div",At,"开户行："+e.toDisplayString((k=r.value)==null?void 0:k.openingBank),1),e.createElementVNode("div",Mt,"银行账号："+e.toDisplayString((I=r.value)==null?void 0:I.bankAccountNo),1),e.createElementVNode("div",Ft,"企业电话："+e.toDisplayString((U=r.value)==null?void 0:U.enterprisePhone),1)]),e.createElementVNode("div",zt,[e.createElementVNode("div",Ut,"邮箱地址："+e.toDisplayString((F=r.value)==null?void 0:F.email),1),e.createElementVNode("div",qt,"企业地址："+e.toDisplayString((b=r.value)==null?void 0:b.enterpriseAddress),1)]),(O=t.invoiceDetail)!=null&&O.denialReason?(e.openBlock(),e.createElementBlock("div",Ht,[e.createElementVNode("div",null,"拒绝原因："+e.toDisplayString((C=t.invoiceDetail)==null?void 0:C.denialReason),1)])):e.createCommentVNode("",!0)])}}}),zn="",Gt=z(jt,[["__scopeId","data-v-e4894b3b"]]),Yt=t=>{const a=e.ref(""),l=e.ref([]),n=e.ref([]),d=(i,N)=>{console.log(i,"row.key",n.value.includes(i.productId)),n.value.includes(i.productId)?n.value=n.value.filter(s=>s!==i.productId):n.value.push(i.productId)},g=e.computed(()=>i=>{var s,o,_,S,P;let N=((o=(s=i==null?void 0:i.skus)==null?void 0:s[0])==null?void 0:o.num)-((S=(_=i==null?void 0:i.skus)==null?void 0:_[0])==null?void 0:S.used);return(P=i==null?void 0:i.skus)==null||P.forEach(B=>{const x=(B==null?void 0:B.num)-(B==null?void 0:B.used);x<N&&(N=x)}),N||1}),p=(i,N)=>{var s;if(typeof N=="number"){const o=l.value.findIndex(_=>_.productId===i);o>-1&&((s=l.value[o])==null||s.skus.forEach(_=>_.inStorageNum=N))}},r=e.computed(()=>i=>{const N=l.value.findIndex(s=>s.productId===i);return N>-1?l.value[N].skus.reduce((o,_)=>o+Number(_.inStorageNum||0),0):0});return{remark:a,tableData:l,expandRowKeys:n,expandOpen:d,maxRowBatchNum:g,changeRowBatchNum:p,computedActualNum:r,handleRemoveCommodity:i=>{E.ElMessageBox.confirm("确认移除当前商品信息").then(()=>{l.value.splice(i,1)})},handleRemoveSku:(i,N)=>{E.ElMessageBox.confirm("确认移除当前规格信息").then(()=>{var s,o,_;(_=(o=(s=l.value)==null?void 0:s[i])==null?void 0:o.skus)==null||_.splice(N,1)})},initialInstorageData:async()=>{var N,s;const i=await Ve(t.orderNo);i.data&&(a.value=(N=i==null?void 0:i.data)==null?void 0:N.remark,l.value=(s=i.data)==null?void 0:s.products)}}},Wt={class:"oneClickProcurement"},Kt={class:"oneClickProcurement__form"},Xt={class:"oneClickProcurement__commodity"},Jt=["src"],Zt={class:"oneClickProcurement__commodity--name"},Qt=e.defineComponent({__name:"in-storage",props:{orderNo:{default:""}},setup(t,{expose:a}){const l=t,{remark:n,tableData:d,expandRowKeys:g,expandOpen:p,maxRowBatchNum:r,changeRowBatchNum:y,computedActualNum:u,handleRemoveCommodity:m,handleRemoveSku:i,initialInstorageData:N}=Yt(l);e.onMounted(()=>N()),a({tableData:d,remark:n,computedActualNum:u});const s=e.ref(),o=_=>{s.value.toggleRowExpansion(_)};return(_,S)=>{const P=e.resolveComponent("el-input"),B=e.resolveComponent("el-form-item"),x=e.resolveComponent("el-form"),k=e.resolveComponent("el-input-number"),I=e.resolveComponent("el-table-column"),U=e.resolveComponent("el-link"),F=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Wt,[e.createVNode(x,{"show-message":!1,class:"oneClickProcurement__remark"},{default:e.withCtx(()=>[e.createVNode(B,{label:"入库备注"},{default:e.withCtx(()=>[e.createVNode(P,{modelValue:e.unref(n),"onUpdate:modelValue":S[0]||(S[0]=b=>e.isRef(n)?n.value=b:null),placeholder:"请输入入库备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),e.createVNode(F,{ref_key:"expandableTable",ref:s,"max-height":450,data:e.unref(d),"expand-row-keys":e.unref(g),"row-key":"productId",onExpandChange:e.unref(p),onRowClick:o},{default:e.withCtx(()=>[e.createVNode(I,{type:"expand"},{default:e.withCtx(({row:b,$index:O})=>[e.createElementVNode("div",Kt,[e.createVNode(x,null,{default:e.withCtx(()=>[e.createVNode(B,{label:"入库数(批量)"},{default:e.withCtx(()=>[e.createVNode(k,{modelValue:b.batchNum,"onUpdate:modelValue":C=>b.batchNum=C,max:e.unref(r)(b),min:1,precision:0,onChange:C=>e.unref(y)(b.productId,C)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:2},1024)]),_:2},1024)]),e.createVNode(F,{data:b.skus,"row-key":"id"},{default:e.withCtx(()=>[e.createVNode(I,{label:"商品规格"},{default:e.withCtx(({row:C})=>{var f;return[e.createTextVNode(e.toDisplayString((f=C==null?void 0:C.specs)==null?void 0:f.join(";")),1)]}),_:1}),e.createVNode(I,{label:"采购数",prop:"num",width:"80"}),e.createVNode(I,{label:"已入库数",prop:"used",width:"100"}),e.createVNode(I,{label:"剩余入库数",width:"100"},{default:e.withCtx(({row:C})=>[e.createTextVNode(e.toDisplayString((C==null?void 0:C.num)-(C==null?void 0:C.used)),1)]),_:1}),e.createVNode(I,{label:"实际入库数（本次）",prop:"inStorageNum",width:"180"},{default:e.withCtx(({row:C})=>[e.createVNode(k,{modelValue:C.inStorageNum,"onUpdate:modelValue":f=>C.inStorageNum=f,max:(C==null?void 0:C.num)-(C==null?void 0:C.used)||1,min:1,precision:0},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1}),e.createVNode(I,{fixed:"right",label:"操作",width:"80"},{default:e.withCtx(({$index:C})=>[e.createVNode(U,{type:"danger",onClick:f=>e.unref(i)(O,C)},{default:e.withCtx(()=>S[1]||(S[1]=[e.createTextVNode("移出")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])]),_:1}),e.createVNode(I,{label:"商品名称",width:"250"},{default:e.withCtx(({row:b})=>[e.createElementVNode("div",Xt,[e.createElementVNode("img",{src:b.image},null,8,Jt),e.createElementVNode("span",Zt,e.toDisplayString(b.productName),1)])]),_:1}),e.createVNode(I,{label:"采购数"},{default:e.withCtx(({row:b})=>{var O;return[e.createTextVNode(e.toDisplayString((O=b==null?void 0:b.skus)==null?void 0:O.reduce((C,f)=>C+f.num,0)),1)]}),_:1}),e.createVNode(I,{label:"已入库数"},{default:e.withCtx(({row:b})=>{var O;return[e.createTextVNode(e.toDisplayString((O=b==null?void 0:b.skus)==null?void 0:O.reduce((C,f)=>C+f.used,0)),1)]}),_:1}),e.createVNode(I,{label:"剩余入库数"},{default:e.withCtx(({row:b})=>{var O,C;return[e.createTextVNode(e.toDisplayString(((O=b==null?void 0:b.skus)==null?void 0:O.reduce((f,R)=>f+R.num,0))-((C=b==null?void 0:b.skus)==null?void 0:C.reduce((f,R)=>f+R.used,0))),1)]}),_:1}),e.createVNode(I,{label:"实际入库数（本次）"},{default:e.withCtx(({row:b})=>[e.createTextVNode(e.toDisplayString(e.unref(u)(b.productId)),1)]),_:1}),e.createVNode(I,{label:"操作"},{default:e.withCtx(({$index:b})=>[e.createVNode(U,{type:"danger",onClick:O=>e.unref(m)(b)},{default:e.withCtx(()=>S[2]||(S[2]=[e.createTextVNode("移出")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","expand-row-keys","onExpandChange"])])}}}),qn="",vt=z(Qt,[["__scopeId","data-v-55ad8652"]]),eo=t=>{const a=e.reactive({orderNo:"",supplierId:"",remark:""}),l=e.ref([]);return{tableData:l,extraData:a,initialInstorageData:async()=>{var g;const d=await Ve(t.orderNo);d.data&&(l.value=(g=d.data)==null?void 0:g.products,Object.keys(a).forEach(p=>{var y;const r=p;a[r]=(y=d==null?void 0:d.data)==null?void 0:y[p]}))}}},to={class:"batch"},oo={class:"batch__commodity"},no=["src"],ao={class:"batch__commodity--name"},lo=e.defineComponent({__name:"storage-details",props:{orderNo:{default:""}},setup(t){const a=t,{tableData:l,initialInstorageData:n,extraData:d}=eo(a);e.onMounted(()=>n());const g=e.ref(),p=r=>{g.value.toggleRowExpansion(r)};return(r,y)=>{const u=e.resolveComponent("el-form-item"),m=e.resolveComponent("el-form"),i=e.resolveComponent("el-table-column"),N=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",to,[e.createVNode(m,{"show-message":!1,class:"purchase__remark"},{default:e.withCtx(()=>[e.createVNode(u,{label:"采购备注"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(d).remark),1)]),_:1})]),_:1}),e.createVNode(N,{ref_key:"expandableTable",ref:g,data:e.unref(l),"row-key":"id","max-height":450,onRowClick:p},{default:e.withCtx(()=>[e.createVNode(i,{type:"expand"},{default:e.withCtx(({row:s})=>[e.createVNode(N,{data:s.skus,"row-key":"id"},{default:e.withCtx(()=>[e.createVNode(i,{label:"商品规格"},{default:e.withCtx(({row:o})=>{var _;return[e.createTextVNode(e.toDisplayString((_=o==null?void 0:o.specs)==null?void 0:_.join(";")),1)]}),_:1}),e.createVNode(i,{label:"采购数",prop:"num",width:"80"}),e.createVNode(i,{label:"已入库数",prop:"used",width:"100"}),e.createVNode(i,{label:"剩余入库数",width:"100"},{default:e.withCtx(({row:o})=>[e.createTextVNode(e.toDisplayString((o==null?void 0:o.num)-(o==null?void 0:o.used)),1)]),_:1})]),_:2},1032,["data"])]),_:1}),e.createVNode(i,{label:"商品名称",width:"250"},{default:e.withCtx(({row:s})=>[e.createElementVNode("div",oo,[e.createElementVNode("img",{src:s.image},null,8,no),e.createElementVNode("span",ao,e.toDisplayString(s.productName),1)])]),_:1}),e.createVNode(i,{label:"采购数"},{default:e.withCtx(({row:s})=>{var o;return[e.createTextVNode(e.toDisplayString((o=s==null?void 0:s.skus)==null?void 0:o.reduce((_,S)=>_+S.num,0)),1)]}),_:1}),e.createVNode(i,{label:"已入库数"},{default:e.withCtx(({row:s})=>{var o;return[e.createTextVNode(e.toDisplayString((o=s==null?void 0:s.skus)==null?void 0:o.reduce((_,S)=>_+S.used,0)),1)]}),_:1}),e.createVNode(i,{label:"剩余入库数"},{default:e.withCtx(({row:s})=>{var o,_;return[e.createTextVNode(e.toDisplayString(((o=s==null?void 0:s.skus)==null?void 0:o.reduce((S,P)=>S+P.num,0))-((_=s==null?void 0:s.skus)==null?void 0:_.reduce((S,P)=>S+P.used,0))),1)]}),_:1})]),_:1},8,["data"])])}}}),jn="",io=z(lo,[["__scopeId","data-v-70c194b5"]]),ro=()=>{const t=e.ref(""),a=e.ref(!1),l=e.ref(null);return{inStorageOrderNo:t,showInStorageDialog:a,openInStorageDialog:d=>{t.value=d,a.value=!0},inStorageRefs:l}},so=()=>{const t=e.ref(""),a=e.ref(!1);return{storageDetailsOrderNo:t,showStorageDetailsDialog:a,openStorageDetailsDialog:n=>{t.value=n,a.value=!0}}},co=["近一个月订单","近三个月订单","全部订单"],po={START:{title:"申请开票",btnConfig:{text:"",type:""},describe:""},SUCCESSFULLY_INVOICED:{title:"开票成功",btnConfig:{text:"重新发送发票到邮箱",type:"primary"},describe:"开票成功后，发票将发送至您的邮箱地址，请注意查看邮件~"},REQUEST_IN_PROCESS:{title:"开票中",btnConfig:{text:"撤销开票申请",type:"danger"},describe:"开票成功后，发票将发送至您的邮箱地址，请注意查看邮件~"},FAILED_INVOICE_REQUEST:{title:"开票失败",btnConfig:{text:"重新申请开票",type:"primary"},describe:"开票失败后，您可以重新申请开票~"}},{divTenThousand:mo}=J(),{toClipboard:fo}=Oe(),de=new Re,ho=()=>{const{showInStorageDialog:t,inStorageOrderNo:a,openInStorageDialog:l,inStorageRefs:n}=ro(),{storageDetailsOrderNo:d,showStorageDetailsDialog:g,openStorageDetailsDialog:p}=so(),r={OFFLINE:"线下支付",BALANCE:"余额支付"},y=ee.useRouter(),u=e.ref(!1),m=e.ref(!1),i=e.ref({applicantId:"",applicantShopId:"",invoiceOwnerType:"SHOP",shopSupplierName:"",applicationTime:"",orderNo:"",invoiceAmount:"",invoiceType:"VAT_GENERAL",invoiceStatus:"START",billingRemarks:"",denialReason:"",invoiceHeaderId:""}),N=e.ref("VAT_COMBINED"),s=e.ref(),o=e.ref(null),_=e.reactive({status:"",startTime:"",endTime:"",purchaser:"",no:"",supplierId:"",purchasePhone:""}),S=e.reactive({page:{current:1,size:10},total:0}),P=e.ref(" "),B=e.ref("全部订单"),x=e.ref(),k=e.ref([]),I=e.ref([]),U=c=>{_.status=c,C()},F=e.computed(()=>c=>_o(c)),b=e.computed(()=>c=>De(c)),O=e.computed(()=>c=>uo(c)),C=async()=>{var T,D;let c=[],V=0;try{const L=await Ke({...S.page,..._});c=(T=L.data)==null?void 0:T.records,V=((D=L.data)==null?void 0:D.total)||0}finally{k.value=c,S.total=Number(V)}},f=c=>{if(P.value=" ",B.value=c,B.value==="近一个月订单"){const V=de.getLastMonth(new Date);H(V)}else if(B.value==="近三个月订单"){const V=de.getLastThreeMonth(new Date);H(V)}else _.startTime="",_.endTime="",C()},R=c=>{_.startTime=c.startTime,_.endTime=c.endTime,_.purchaser=c.purchaser,_.no=c.no,_.purchasePhone=c.purchasePhone,_.supplierId=c.supplierId,S.page.current=1,C()},H=async c=>{const V=de.getYMDs(new Date);_.startTime=c,_.endTime=V,C()},Q=()=>{switch(i.value.invoiceStatus){case"START":Be();break;case"REQUEST_IN_PROCESS":me();break;case"SUCCESSFULLY_INVOICED":fe();break;case"FAILED_INVOICE_REQUEST":he();break}},pe=()=>{i.value={applicantId:"",applicantShopId:"",invoiceOwnerType:"SHOP",shopSupplierName:"",applicationTime:"",orderNo:"",invoiceAmount:"",invoiceType:"VAT_GENERAL",invoiceStatus:"START",billingRemarks:"",denialReason:"",invoiceHeaderId:""}},Be=async()=>{if(!i.value.invoiceHeaderId)return E.ElMessage.error("请选择抬头");if(!i.value.invoiceType)return E.ElMessage.error("请选择发票类型");const{code:c,data:V,msg:T}=await Ze(i.value);if(c!==200)return E.ElMessage.error(T||"申请开票失败");E.ElMessage.success("申请开票成功"),m.value=!1},me=async()=>{const{data:c,code:V,msg:T}=await et(i.value.id);if(V!==200)return E.ElMessage.error(T||"撤销开票失败");E.ElMessage.success("撤销开票成功"),m.value=!1},fe=async()=>{const{data:c,code:V,msg:T}=await tt({invoiceRequestId:i.value.id,shopId:i.value.applicantShopId});if(V!==200)return E.ElMessage.error(T||"重发发票失败");E.ElMessage.success("重发发票成功"),m.value=!1},he=async()=>{i.value={...i.value,applicantId:"",applicationTime:"",invoiceType:"VAT_GENERAL",invoiceStatus:"START",billingRemarks:"",denialReason:"",invoiceHeaderId:""},ke().then(c=>{i.value.invoiceHeaderId=c.data.id}).catch(()=>{E.ElMessage.error("获取默认抬头失败")}),Ee({invoiceSettingsClientType:"SUPPLIER",shopId:i.value.applicantShopId}).then(c=>{N.value=c.data.invoiceSetupValue[0].invoiceType}).catch(()=>{E.ElMessage.error("获取发票设置失败")})},ge=async(c,V)=>{switch(c){case"cancel":E.ElMessageBox.confirm("请确认是否将订单取消？？").then(async()=>{const{code:T,msg:D}=await He(V.no);T===200?(E.ElMessage.success({message:D||"取消成功"}),C()):E.ElMessage.error({message:D||"取消失败"})});break;case"details":y.push({path:"/goods/purchase/detail",query:{orderNo:V.no}});break;case"pay":s.value=V,u.value=!0;break;case"finish":E.ElMessageBox.confirm("完成后将无法入库，请确认订单是否已完成？？").then(async()=>{const{code:T,msg:D}=await Ge(V.no);T===200?(E.ElMessage.success({message:D||"订单入库已完成"}),C()):E.ElMessage.error({message:D||"订单完成失败"})});break;case"inStorage":l(V.no);break;case"storageDetails":p(V.no);break;case"contact":se(V.shopId,V.supplierId).then(({code:T})=>{T===200&&y.push({path:"/message/customer/supplierService",query:{id:V.supplierId}})});break;case"invoice":v(V);break}},v=async c=>{const{data:V,code:T,msg:D}=await ve({invoiceOwnerType:"SHOP",applicantId:Y.useShopInfoStore().shopInfo.id,applicantShopId:c.supplierId,orderNo:c.no});if(T!==200||!V)return E.ElMessage.error({message:D||"获取开票信息失败"});if(V.invoiceStatus==="REQUEST_HAS_EXPIRED")return E.ElMessage.error({message:D||"已超出可开票时间"});if(V.invoiceStatus==="SERVER_NOT_SUPPORTED")return E.ElMessage.error({message:D||"供应商不支持开票"});m.value=!0,V.invoiceStatus!=="ALLOWED_INVOICING"?Qe(V.id).then(L=>{L.code===200&&L.data?i.value={...i.value,...L.data}:E.ElMessage.error("获取发票详情失败")}).catch(()=>{E.ElMessage.error("获取发票详情失败")}):(i.value.shopSupplierName=c.extraInfo.supplierName,i.value.applicantShopId=c.supplierId,i.value.orderNo=c.no,i.value.invoiceAmount=V.billMoney,ke().then(L=>{i.value.invoiceHeaderId=L.data.id}).catch(()=>{E.ElMessage.error("获取默认抬头失败")}),Ee({invoiceSettingsClientType:"SUPPLIER",shopId:c.supplierId}).then(L=>{N.value=L.data.invoiceSetupValue[0].invoiceType}).catch(()=>{E.ElMessage.error("获取发票设置失败")}))},te=async c=>{try{await fo(c),E.ElMessage.success("复制成功")}catch{E.ElMessage.error("复制失败")}},_e=async()=>{var D,L;const c=await((D=o.value)==null?void 0:D.getPayOrderFormModel()),{code:V,msg:T}=await qe({...c,orderNo:(L=s.value)==null?void 0:L.no});V===200?(E.ElMessage.success("支付成功"),C(),u.value=!1):E.ElMessage.error(T||"支付失败")},ue=async()=>{var V;const c=n.value;if(c)if(((V=n.value)==null?void 0:V.tableData.filter(T=>T.skus.find(D=>+D.inStorageNum>0)).length)>0){const T={skuStorages:go(c.tableData).filter(L=>L.value>0),remark:c.remark,orderNo:a.value},D=await je(T);D.code===200?(E.ElMessage.success({message:D.msg||"入库成功"}),t.value=!1,C()):E.ElMessage.error({message:D.msg||"入库失败"})}else E.ElMessage.error("本次实际入库数需大于等于1")},W=e.ref([]),oe=(c,V)=>{const T=k.value.find(D=>D.no===V);if(T)if(c===!1){const D=W.value.findIndex(L=>L.no===V);D>-1&&W.value.splice(D,1)}else W.value.push(T)};function we(c){I.value=c}return{handleTabChange:U,pagination:S,multipleTableRef:x,initOrderList:C,orderDataList:k,chooseList:I,handleQuickSearchCommand:f,handleSearch:R,quickSearchTabName:B,quickSearchTabNames:co,activeTabName:P,getMainOrderStatusText:b,computedBtnList:F,handleDispatchEvent:ge,copyOrderNo:te,computedCalculateFreight:O,showPayDialog:u,currentRow:s,handlePayOrder:_e,payOrderRef:o,payTypeMap:r,showInStorageDialog:t,inStorageOrderNo:a,inStorageRefs:n,storageDetailsOrderNo:d,showStorageDetailsDialog:g,handleConfirmInStorage:ue,showInvoiceDialog:m,InvoiceStatusHander:po,invoiceDetail:i,handleInvoiceConfig:Q,handleCloseInvoiceDialog:pe,invoiceSetType:N,handleChangeRow:oe,multiSelect:W,handleSizeChange:c=>{S.page.size=c,C()},handleCurrentChange:c=>{S.page.current=c,C()},handleSelectionChange:we}},go=t=>{const a=[];return t.forEach(l=>{const n=l.productId;l.skus.forEach(g=>{const p=g.skuId,r=g.inStorageNum||0;a.push({key:{productId:n,skuId:p},value:r})})}),a},De=t=>{if(t.status==="UNPAID")return"待支付";if(t.status==="PAYMENT_AUDIT")return"待审核";const a=["WAITING_FOR_DELIVER","WAITING_FOR_RECEIVE","COMPLETED"],l={WAITING_FOR_DELIVER:"待发货",WAITING_FOR_RECEIVE:"待入库",COMPLETED:"已完成"};if(t.status==="PAID"){let n="COMPLETED";for(const g of t.orderItems){const p=a.findIndex(r=>r===n);if(g.packageStatus==="WAITING_FOR_DELIVER"&&p>0){n="WAITING_FOR_DELIVER";continue}if(g.packageStatus==="WAITING_FOR_RECEIVE"&&p>1){n="WAITING_FOR_RECEIVE";continue}}let d=l[n];return d==="待发货"&&t.orderItems.find(p=>p.packageStatus!=="WAITING_FOR_DELIVER")&&(d="部分发货"),d}return"已关闭"},_o=t=>{const a=[],l=De(t);return a.push({action:"details",text:"查看",type:"primary"}),l==="待支付"?(a.push({action:"pay",text:"去支付",type:"danger"}),a.push({action:"cancel",text:"取消订单",type:"danger"})):["待入库","部分发货"].includes(l)?(a.push({action:"inStorage",text:"入库",type:"primary"}),a.push({action:"finish",text:"完成",type:"primary"}),a.push({action:"storageDetails",text:"入库详情",type:"primary"})):l==="已完成"&&(a.push({action:"storageDetails",text:"入库详情",type:"primary"}),a.push({action:"invoice",text:"申请开票",type:"primary"})),t.stockInCount===0&&a.forEach((n,d)=>{n.text==="入库详情"&&a.splice(d,1)}),a},uo=t=>t.reduce((a,l)=>a.plus(new re(mo(l.freightPrice))),new re(0)),yo={class:"tab_container",style:{position:"relative"}},xo={class:"last"},No={class:"table_container overh"},Co={class:"customer"},Vo={class:"customer__name"},So={style:{display:"flex","align-items":"center"}},bo={style:{color:"#f54319"}},Eo=["src","onClick"],ko={style:{display:"flex","justify-content":"end"}},To={class:"dialog-footer"},Io={class:"dialog-footer"},Do={class:"invoice-title"},Po=["id"],Bo={class:"invoice-desc"},wo={class:"dialog-footer"};var Pe=(t=>(t.INVOICE_NOT_START="待开票",t.REQUEST_IN_PROCESS="开票中",t.FAILED_INVOICE_REQUEST="开票失败",t.SUCCESSFULLY_INVOICED="开票成功",t.CLIENT_CANCEL_REQUEST="撤销开票",t))(Pe||{});const Lo=e.defineComponent({__name:"index",setup(t){const{handleTabChange:a,pagination:l,orderDataList:n,chooseList:d,multipleTableRef:g,handleQuickSearchCommand:p,handleSearch:r,quickSearchTabName:y,quickSearchTabNames:u,activeTabName:m,getMainOrderStatusText:i,computedBtnList:N,handleDispatchEvent:s,computedCalculateFreight:o,showPayDialog:_,showInvoiceDialog:S,handlePayOrder:P,payOrderRef:B,payTypeMap:x,currentRow:k,showInStorageDialog:I,inStorageOrderNo:U,storageDetailsOrderNo:F,showStorageDetailsDialog:b,handleConfirmInStorage:O,inStorageRefs:C,InvoiceStatusHander:f,invoiceDetail:R,handleInvoiceConfig:H,handleCloseInvoiceDialog:Q,invoiceSetType:pe,multiSelect:Be,handleSizeChange:me,handleCurrentChange:fe,handleSelectionChange:he,initOrderList:ge}=ho(),{divTenThousand:v}=J(),{showProof:te,goToShowProof:_e,currentProof:ue}=ft(),W=ee.useRouter(),oe=[];(()=>{Object.keys(Ie).forEach(j=>{oe.push([j,Ie[j]])})})(),ge();const Le=async j=>{var c,V;if(d.value.length){let T=[];T=d.value.map(ye=>ye.mainNo);const{data:D,code:L,msg:K}=await Te({exportOrderIds:T});return L!==200?E.ElMessage.error(K||"导出数据失败"):E.ElMessage.success("导出数据成功")}else{let T={no:j.no,supplierId:j.supplierId,startTime:(c=j.date)==null?void 0:c[0],endTime:(V=j.date)==null?void 0:V[1],status:m.value,exportOrderIds:""};T.status=T.status.trim();const{data:D,code:L,msg:K}=await Te(T);return L!==200?E.ElMessage.error(K||"导出数据失败"):E.ElMessage.success("导出数据成功")}};return(j,c)=>{const V=e.resolveComponent("el-icon"),T=e.resolveComponent("el-dropdown-item"),D=e.resolveComponent("el-dropdown-menu"),L=e.resolveComponent("el-dropdown"),K=e.resolveComponent("el-tab-pane"),ye=e.resolveComponent("el-tabs"),G=e.resolveComponent("el-button"),Ln=e.resolveComponent("el-tooltip"),A=e.resolveComponent("el-table-column"),$n=e.resolveComponent("el-table"),ne=e.resolveComponent("el-dialog"),Rn=e.resolveComponent("el-image-viewer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(lt,{onSearch:e.unref(r),onSupplierExport:Le},null,8,["onSearch"]),e.createElementVNode("div",yo,[e.createVNode(ye,{modelValue:e.unref(m),"onUpdate:modelValue":c[0]||(c[0]=h=>e.isRef(m)?m.value=h:null),onTabChange:e.unref(a)},{default:e.withCtx(()=>[e.createVNode(K,{name:" "},{label:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(y)),1),e.createVNode(L,{placement:"bottom-end",trigger:"click",onCommand:e.unref(p)},{dropdown:e.withCtx(()=>[e.createVNode(D,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),h=>(e.openBlock(),e.createBlock(T,{key:h,command:h},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(h),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:e.withCtx(()=>[e.createElementVNode("span",{class:"el-dropdown-link",style:{"line-height":"40px"},onClick:e.withModifiers(()=>{},["stop"])},[e.createVNode(V,{class:"el-icon--right"},{default:e.withCtx(()=>[e.createVNode(e.unref(Ae.ArrowDown))]),_:1})])]),_:1},8,["onCommand"])]),_:1}),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(oe,h=>e.createVNode(K,{key:h[0],label:h[1],name:h[0]},null,8,["label","name"])),64))]),_:1},8,["modelValue","onTabChange"]),e.createElementVNode("div",xo,[e.createVNode(G,{type:"primary",onClick:c[1]||(c[1]=h=>e.unref(W).push("/goods/purchase/add"))},{default:e.withCtx(()=>c[10]||(c[10]=[e.createTextVNode("新增采购")])),_:1}),e.createVNode(Ln,{class:"box-item",effect:"dark",placement:"bottom-end"},{content:e.withCtx(()=>c[11]||(c[11]=[e.createTextVNode(" 1、线下支付的采购订单需供应商确认(审核)收款，审核通过后流程继续"),e.createElementVNode("br",null,null,-1),e.createTextVNode(" 2、商品首次采购时需要先发布商品，发布完成后，后续采购无需再次发布商品"),e.createElementVNode("br",null,null,-1),e.createTextVNode(" 3、采购流程:创建采购订单->支付货款->供应商审核->供应商发货->店铺入库商品->发布商品->申请开票 ")])),default:e.withCtx(()=>[e.createVNode(Z,{name:"icon-wenhao",size:"18px",style:{"margin-left":"8px",position:"relative",top:"3px"}})]),_:1})])]),e.createElementVNode("div",No,[e.createVNode($n,{ref_key:"multipleTableRef",ref:g,"cell-style":{fontSize:"14px",color:"#333333"},data:e.unref(n),"header-cell-style":{background:"#f6f8fa",height:"50px"},"header-row-style":{fontSize:"14px",color:"#000"},onSelectionChange:e.unref(he)},{empty:e.withCtx(()=>[e.createVNode(Fe)]),default:e.withCtx(()=>[e.createVNode(A,{type:"selection",width:"40",fixed:"left"}),e.createVNode(A,{label:"订单号",prop:"no",width:"200"}),e.createVNode(A,{label:"供应商",prop:"extraInfo",width:"160"},{default:e.withCtx(({row:h})=>{var $,q;return[e.createElementVNode("div",Co,[e.createElementVNode("div",null,[e.createElementVNode("span",Vo,e.toDisplayString(($=h==null?void 0:h.extraInfo)==null?void 0:$.supplierName),1),e.createVNode(Z,{name:"icon-xiaoxi-copy",size:"18px",style:{cursor:"pointer"},svg:"",onClick:On=>e.unref(s)("contact",h)},null,8,["onClick"])]),e.createElementVNode("span",null,e.toDisplayString((q=h==null?void 0:h.extraInfo)==null?void 0:q.supplierPhone),1)])]}),_:1}),e.createVNode(A,{label:"采购数",prop:"orderItems",width:"90"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(h.orderItems.reduce(($,q)=>$+q.num,0)),1)]),_:1}),e.createVNode(A,{label:"商品总价(元)",prop:"payAmount",width:"110"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(e.unref(v)(h.payAmount).toFixed(2)),1)]),_:1}),e.createVNode(A,{label:"运费(元)",prop:"orderItems",width:"90"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(e.unref(o)(h==null?void 0:h.orderItems).toFixed(2)),1)]),_:1}),e.createVNode(A,{label:"应付金额(元)",prop:"payAmount",width:"120"},{default:e.withCtx(({row:h})=>{var $,q;return[e.createElementVNode("div",So,[e.createElementVNode("span",bo,"￥"+e.toDisplayString(e.unref(v)(h.payAmount)),1),(q=($=h==null?void 0:h.extra)==null?void 0:$.pay)!=null&&q.proof.length?(e.openBlock(),e.createElementBlock("img",{key:0,src:e.unref(Me),alt:"",style:{height:"16px",width:"21px","margin-left":"4px"},onClick:On=>e.unref(_e)(h)},null,8,Eo)):e.createCommentVNode("",!0)])]}),_:1}),e.createVNode(A,{label:"订单状态",width:"140"},{default:e.withCtx(({row:h})=>{var $;return[e.createElementVNode("div",{class:e.normalizeClass({"text-red":e.unref(i)(h)==="待支付","text-grey":e.unref(i)(h)==="待支付"}),style:{display:"flex","align-items":"center"}},[e.createTextVNode(e.toDisplayString(e.unref(i)(h))+" ",1),e.unref(i)(h)==="待支付"?(e.openBlock(),e.createBlock(mt,{key:0,"create-time":h==null?void 0:h.createTime,"pay-timeout":($=h==null?void 0:h.extra)==null?void 0:$.payTimeout},null,8,["create-time","pay-timeout"])):e.createCommentVNode("",!0)],2)]}),_:1}),["UNPAID","PAYMENT_AUDIT","CLOSED","FINISHED"].includes(e.unref(m))?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(A,{key:0,label:"待发货数",width:"120"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(h.waitForDeliveryCount),1)]),_:1})),["UNPAID","PAYMENT_AUDIT","CLOSED","FINISHED"].includes(e.unref(m))?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(A,{key:1,label:"已发货数",width:"120"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(h.hasDeliveryCount),1)]),_:1})),["UNPAID","PAYMENT_AUDIT","CLOSED"].includes(e.unref(m))?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(A,{key:2,label:"入库数",width:"120"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(h.stockInCount),1)]),_:1})),e.createVNode(A,{label:"采购员",width:"150"},{default:e.withCtx(({row:h})=>[e.createElementVNode("div",null,[e.createElementVNode("p",null,e.toDisplayString(h.purchaseNickName),1),e.createElementVNode("p",null,e.toDisplayString(h.purchasePhone),1)])]),_:1}),e.unref(m)!=="UNPAID"?(e.openBlock(),e.createBlock(A,{key:3,label:"支付方式",width:"120"},{default:e.withCtx(({row:h})=>{var $,q;return[e.createTextVNode(e.toDisplayString(e.unref(x)[(q=($=h==null?void 0:h.extra)==null?void 0:$.pay)==null?void 0:q.payType]),1)]}),_:1})):e.createCommentVNode("",!0),e.createVNode(A,{label:"下单时间",prop:"createTime",width:"180"}),e.unref(m)!=="UNPAID"?(e.openBlock(),e.createBlock(A,{key:4,label:"支付时间",prop:"payTime",width:"180"},{default:e.withCtx(({row:h})=>{var $;return[e.createTextVNode(e.toDisplayString(($=h==null?void 0:h.timeNodes)==null?void 0:$.payTime),1)]}),_:1})):e.createCommentVNode("",!0),e.unref(m)==="FINISHED"||e.unref(m)===" "?(e.openBlock(),e.createBlock(A,{key:5,label:"开票状态",prop:"createTime",width:"140"},{default:e.withCtx(({row:h})=>[e.createElementVNode("div",null,e.toDisplayString(Pe[h.invoiceStatus]),1)]),_:1})):e.createCommentVNode("",!0),e.unref(m)==="FINISHED"||e.unref(m)===" "?(e.openBlock(),e.createBlock(A,{key:6,label:"申请时间",prop:"applyInvoiceTime",width:"180"})):e.createCommentVNode("",!0),e.unref(m)==="FINISHED"||e.unref(m)===" "?(e.openBlock(),e.createBlock(A,{key:7,label:"开票时间",prop:"invoiceTime",width:"180"})):e.createCommentVNode("",!0),e.createVNode(A,{label:"操作",fixed:"right",width:"200",align:"right"},{default:e.withCtx(({row:h})=>[e.createElementVNode("div",ko,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(N)(h),$=>(e.openBlock(),e.createBlock(G,{key:$.action,link:"",type:$.type,style:{"margin-left":"5px"},onClick:q=>e.unref(s)($.action,h)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString($.text),1)]),_:2},1032,["type","onClick"]))),128))])]),_:1})]),_:1},8,["data","onSelectionChange"])]),e.createVNode(ie,{class:"pagination","page-size":e.unref(l).page.size,"page-num":e.unref(l).page.current,total:e.unref(l).total,onHandleSizeChange:e.unref(me),onHandleCurrentChange:e.unref(fe)},null,8,["page-size","page-num","total","onHandleSizeChange","onHandleCurrentChange"]),e.createVNode(ne,{modelValue:e.unref(_),"onUpdate:modelValue":c[3]||(c[3]=h=>e.isRef(_)?_.value=h:null),title:"支付订单",width:"500px",center:"","destroy-on-close":""},{footer:e.withCtx(()=>[e.createElementVNode("span",To,[e.createVNode(G,{onClick:c[2]||(c[2]=h=>_.value=!1)},{default:e.withCtx(()=>c[12]||(c[12]=[e.createTextVNode("取消")])),_:1}),e.createVNode(G,{type:"primary",onClick:e.unref(P)},{default:e.withCtx(()=>c[13]||(c[13]=[e.createTextVNode(" 确认 ")])),_:1},8,["onClick"])])]),default:e.withCtx(()=>{var h;return[e.createVNode(xt,{ref_key:"payOrderRef",ref:B,price:e.unref(v)((h=e.unref(k))==null?void 0:h.payAmount)},null,8,["price"])]}),_:1},8,["modelValue"]),e.unref(te)?(e.openBlock(),e.createBlock(Rn,{key:0,"url-list":e.unref(ue),onClose:c[4]||(c[4]=h=>te.value=!1)},null,8,["url-list"])):e.createCommentVNode("",!0),e.createVNode(ne,{modelValue:e.unref(I),"onUpdate:modelValue":c[6]||(c[6]=h=>e.isRef(I)?I.value=h:null),title:"入库",width:"1150px"},{footer:e.withCtx(()=>[e.createElementVNode("span",Io,[e.createVNode(G,{onClick:c[5]||(c[5]=h=>I.value=!1)},{default:e.withCtx(()=>c[14]||(c[14]=[e.createTextVNode("取消")])),_:1}),e.createVNode(G,{type:"primary",onClick:e.unref(O)},{default:e.withCtx(()=>c[15]||(c[15]=[e.createTextVNode(" 确认 ")])),_:1},8,["onClick"])])]),default:e.withCtx(()=>[e.unref(I)?(e.openBlock(),e.createBlock(vt,{key:0,ref_key:"inStorageRefs",ref:C,"order-no":e.unref(U)},null,8,["order-no"])):e.createCommentVNode("",!0)]),_:1},8,["modelValue"]),e.createVNode(ne,{modelValue:e.unref(b),"onUpdate:modelValue":c[7]||(c[7]=h=>e.isRef(b)?b.value=h:null),title:"入库详情",width:"1150px"},{default:e.withCtx(()=>[e.createVNode(io,{"order-no":e.unref(F)},null,8,["order-no"])]),_:1},8,["modelValue"]),e.createVNode(ne,{modelValue:e.unref(S),"onUpdate:modelValue":c[9]||(c[9]=h=>e.isRef(S)?S.value=h:null),width:"1200px",center:"",onClose:e.unref(Q)},{header:e.withCtx(({titleId:h,titleClass:$})=>[e.createElementVNode("div",Do,[e.createElementVNode("h5",{id:h,class:e.normalizeClass($)},e.toDisplayString(e.unref(f)[e.unref(R).invoiceStatus].title),11,Po)]),e.createElementVNode("div",Bo,e.toDisplayString(e.unref(f)[e.unref(R).invoiceStatus].describe),1)]),footer:e.withCtx(()=>[e.createElementVNode("span",wo,[e.unref(R).invoiceStatus==="START"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(G,{onClick:c[8]||(c[8]=h=>S.value=!1)},{default:e.withCtx(()=>c[16]||(c[16]=[e.createTextVNode("取消")])),_:1}),e.createVNode(G,{type:"primary",onClick:e.unref(H)},{default:e.withCtx(()=>c[17]||(c[17]=[e.createTextVNode(" 确认 ")])),_:1},8,["onClick"])],64)):(e.openBlock(),e.createBlock(G,{key:1,type:e.unref(f)[e.unref(R).invoiceStatus].btnConfig.type,onClick:e.unref(H)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(f)[e.unref(R).invoiceStatus].btnConfig.text),1)]),_:1},8,["type","onClick"]))])]),default:e.withCtx(()=>[e.createVNode(Gt,{"invoice-detail":e.unref(R),"invoice-set-type":e.unref(pe)},null,8,["invoice-detail","invoice-set-type"])]),_:1},8,["modelValue","onClose"])],64)}}}),Yn="",$o=Object.freeze(Object.defineProperty({__proto__:null,default:z(Lo,[["__scopeId","data-v-6ad43d4d"]])},Symbol.toStringTag,{value:"Module"})),Ro=()=>{const t=e.ref([]),a=e.ref([]),l=e.reactive({supplierId:"",productName:"",categoryId:""}),n=[{label:"商品名称",prop:"productName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称"}},{label:"供应商",labelWidth:85,prop:"supplierId",valueType:"select",options:t,fieldProps:{placeholder:"请输入店铺名称",props:{expandTrigger:"hover"},filterable:!0,remote:!0,reserveKeyword:!0,remoteMethod:p=>{g(p)}}},{label:"平台类目",valueType:"cascader",options:a,fieldProps:{placeholder:"请选择平台类目",props:{expandTrigger:"hover",label:"name",value:"id",children:"secondCategoryVos"},onChange:p=>{p.length>1&&(l.categoryId=p[p.length-1])}}}];async function d(){const{data:p,code:r}=await be();a.value=p}const g=async(p="")=>{const r=await ce({supplierName:p});t.value=(r==null?void 0:r.data.map(y=>({label:y.name,value:y.id})))||[]};return e.onMounted(()=>{d()}),{searchType:l,supplierList:t,platformCategoryList:a,fetchSupplierList:g,columns:n}},Oo=e.defineComponent({__name:"search",emits:["search"],setup(t,{emit:a}){const l=a,{searchType:n,columns:d}=Ro(),g=()=>{const r=ae.cloneDeep(n);r.categoryId=Array.isArray(r.categoryId)?r.categoryId.pop():"",l("search",r)},p=()=>{Object.keys(n).forEach(r=>n[r]=""),g()};return(r,y)=>(e.openBlock(),e.createBlock(le,{modelValue:e.unref(n),"onUpdate:modelValue":y[0]||(y[0]=u=>e.isRef(n)?n.value=u:null),columns:e.unref(d),"show-number":3,onSearchHandle:g,onHandleReset:p},null,8,["modelValue","columns"]))}}),Ao=()=>{const t=e.reactive({supplierId:"",categoryId:"",productName:""}),a=e.reactive({page:{current:1,size:10},total:0}),l=e.ref([]),n=async()=>{const{code:y,data:u}=await Ye({...a.page,...t});y===200&&u&&(l.value=(u==null?void 0:u.records)||[],a.total=Number(u==null?void 0:u.total))},d=y=>{Object.keys(y).forEach(u=>{const m=u;t[m]=y[u]}),a.page.current=1,n()},g=e.computed(()=>y=>{const u=((y==null?void 0:y.prices)||[]).map(N=>Number(N)),m=Math.min(...u),i=Math.max(...u);return m===i?i/1e4:`${m/1e4}~￥${i/1e4}`});return{handleSearch:d,waitingPublishData:l,pagination:a,computedSalePrice:g,handleSizeChange:y=>{a.page.size=y,n()},handleCurrentChange:y=>{a.page.current=y,n()},initData:n}},Mo={class:"good"},Fo={class:"good__info"},zo={class:"good__info"},Uo={class:"good__img"},qo=e.defineComponent({__name:"preview",props:{currentProduct:{type:Object,default:()=>({})}},setup(t){const a=t,{divTenThousand:l}=J(),n=e.ref([]),d=e.ref([]),g=async()=>{const{data:p}=await Se(Y.useShopInfoStore().shopInfo.id,a.currentProduct.productId);n.value=(p==null?void 0:p.skus)||[],d.value=(p==null?void 0:p.specGroups)||[]};return e.onMounted(()=>g()),(p,r)=>{var i,N;const y=e.resolveComponent("el-image"),u=e.resolveComponent("el-table-column"),m=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Mo,[e.createElementVNode("div",Fo,"店铺名称："+e.toDisplayString((i=a.currentProduct)==null?void 0:i.supplierName),1),e.createElementVNode("div",zo,"商品名称："+e.toDisplayString((N=a.currentProduct)==null?void 0:N.productName),1),e.createElementVNode("div",Uo,[r[0]||(r[0]=e.createElementVNode("text",null,"商品图片：",-1)),e.createVNode(y,{"preview-src-list":[a.currentProduct.image],src:a.currentProduct.image,style:{width:"100px",height:"100px"}},null,8,["preview-src-list","src"])]),r[1]||(r[1]=e.createElementVNode("div",null,"规格：",-1)),e.createVNode(m,{data:n.value,"header-row-style":{"font-size":"12px",color:"#000000"},"cell-style":{height:"48px"},height:"350",stripe:""},{default:e.withCtx(()=>{var s;return[d.value.length?(e.openBlock(),e.createBlock(u,{key:0,align:"center",label:"规格"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString((o==null?void 0:o.specs)&&(o==null?void 0:o.specs.join("-"))),1)]),_:1})):e.createCommentVNode("",!0),(s=n.value[0])!=null&&s.image?(e.openBlock(),e.createBlock(u,{key:1,align:"center",label:"sku图"},{default:e.withCtx(({row:o})=>[e.createVNode(y,{src:o==null?void 0:o.image,style:{width:"50px",height:"50px"}},null,8,["src"])]),_:1})):e.createCommentVNode("",!0),e.createVNode(u,{align:"center",label:"销售价(元)"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString(o.salePrice&&e.unref(l)(o.salePrice)),1)]),_:1}),e.createVNode(u,{align:"center",label:"划线价(元)",prop:"originalPrice"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString(o.price&&e.unref(l)(o.price)),1)]),_:1}),e.createVNode(u,{align:"center",label:"重量(kg)",prop:"weight"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString(o.weight),1)]),_:1})]}),_:1},8,["data"])])}}}),Jn="",Ho=z(qo,[["__scopeId","data-v-82bc12e9"]]),jo=()=>{const t=e.ref(),a=e.ref(!1);return{currentRow:t,showPreviewDialog:a,openPreviewDialog:n=>{t.value=n,a.value=!0}}},Go={class:"commodity-info"},Yo=["src"],Wo={class:"commodity-info-text"},Ko={key:0,class:"virtual_product"},Xo={key:1},Jo={key:0,class:"virtual_product"},Zo={style:{color:"#f54319"}},Qo={class:"customer"},vo={class:"customer__name"},en=e.defineComponent({__name:"index",setup(t){const{handleSearch:a,waitingPublishData:l,pagination:n,computedSalePrice:d,handleSizeChange:g,handleCurrentChange:p,initData:r}=Ao(),{currentRow:y,showPreviewDialog:u,openPreviewDialog:m}=jo();r();const i=ee.useRouter(),N=o=>{i.push({path:"/goods/purchase/release",query:{id:o==null?void 0:o.productId,supplierId:o==null?void 0:o.supplierId,type:"ProcurementRelease"}})},s=o=>{se(Y.useShopInfoStore().shopInfo.id,o.shopId).then(({code:_})=>{_===200&&i.push({path:"/message/customer/supplierService",query:{id:o.supplierId}})})};return(o,_)=>{const S=e.resolveComponent("el-tooltip"),P=e.resolveComponent("el-button"),B=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(Oo,{onSearch:e.unref(a)},null,8,["onSearch"]),e.createVNode(e.unref(Ne),{data:e.unref(l),"no-border":"",style:{overflowY:"auto"}},{default:e.withCtx(()=>[e.createVNode(M,{label:"商品名称",width:"320"},{default:e.withCtx(({row:x})=>[e.createElementVNode("div",Go,[e.createElementVNode("img",{src:x==null?void 0:x.image},null,8,Yo),e.createElementVNode("div",Wo,[(x==null?void 0:x.productName.length)>=30?(e.openBlock(),e.createBlock(S,{key:0,class:"box-item",effect:"dark",content:x==null?void 0:x.productName,placement:"top"},{default:e.withCtx(()=>[e.createElementVNode("p",null,[(x==null?void 0:x.productType)==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",Ko,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(x==null?void 0:x.productName),1)])]),_:2},1032,["content"])):(e.openBlock(),e.createElementBlock("p",Xo,[(x==null?void 0:x.productType)==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",Jo,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(x==null?void 0:x.productName),1)]))])])]),_:1}),e.createVNode(M,{label:"供货价",width:"200"},{default:e.withCtx(({row:x})=>[e.createElementVNode("span",Zo," ￥"+e.toDisplayString(e.unref(d)(x)),1)]),_:1}),e.createVNode(M,{label:"采购数",prop:"num",width:"120"}),e.createVNode(M,{label:"待发货数",prop:"waitForDeliveryCount",width:"120"}),e.createVNode(M,{label:"已发货数",prop:"hasDeliveryCount",width:"120"}),e.createVNode(M,{label:"入库数",prop:"stockInCount",width:"120"}),e.createVNode(M,{label:"所属供应商",prop:"supplierName",width:"220"},{default:e.withCtx(({row:x})=>[e.createElementVNode("div",Qo,[e.createElementVNode("div",null,[e.createElementVNode("span",vo,e.toDisplayString(x.supplierName),1),e.createVNode(Z,{name:"icon-xiaoxi-copy",size:"18px",style:{cursor:"pointer"},svg:"",onClick:k=>s(x)},null,8,["onClick"])]),e.createElementVNode("span",null,e.toDisplayString(x.supplierContractNumber),1)])]),_:1}),e.createVNode(M,{align:"right",label:"操作",width:"120",fixed:"right"},{default:e.withCtx(({row:x})=>[e.createElementVNode("div",null,[e.createVNode(P,{link:"",size:"small",type:"primary",onClick:k=>e.unref(m)(x)},{default:e.withCtx(()=>_[1]||(_[1]=[e.createTextVNode("查看")])),_:2},1032,["onClick"]),e.createVNode(P,{link:"",size:"small",type:"primary",onClick:k=>N(x)},{default:e.withCtx(()=>_[2]||(_[2]=[e.createTextVNode("发布")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),e.createVNode(ie,{"page-size":e.unref(n).page.size,"page-num":e.unref(n).page.current,total:e.unref(n).total,onHandleSizeChange:e.unref(g),onHandleCurrentChange:e.unref(p)},null,8,["page-size","page-num","total","onHandleSizeChange","onHandleCurrentChange"]),e.createVNode(B,{modelValue:e.unref(u),"onUpdate:modelValue":_[0]||(_[0]=x=>e.isRef(u)?u.value=x:null),"close-on-click-modal":!1,"destroy-on-close":"",title:"查看",width:"1000px"},{default:e.withCtx(()=>[e.createVNode(Ho,{"current-product":e.unref(y)},null,8,["current-product"])]),_:1},8,["modelValue"])],64)}}}),Qn="",tn=Object.freeze(Object.defineProperty({__proto__:null,default:z(en,[["__scopeId","data-v-6562fcd8"]])},Symbol.toStringTag,{value:"Module"})),on=()=>{const t=e.ref(!1),a=e.ref([]),l=e.ref([]),n=e.reactive({supplierId:"",productName:"",shopCategoryId:""}),d=[{label:"商品名称",prop:"productName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称"}},{label:"供应商",labelWidth:85,prop:"supplierId",valueType:"select",options:a,fieldProps:{placeholder:"请输入店铺名称",props:{expandTrigger:"hover"},filterable:!0,remote:!0,reserveKeyword:!0,remoteMethod:r=>{p(r)}}},{label:"平台类目",valueType:"cascader",options:l,fieldProps:{placeholder:"请选择平台类目",props:{expandTrigger:"hover",label:"name",value:"id",children:"secondCategoryVos"},onChange:r=>{r.length>1&&(n.shopCategoryId=r[r.length-1])}}}];async function g(){const{data:r,code:y}=await be();l.value=r}const p=async(r="")=>{var u;const y=await ce({supplierName:r});y.data&&((u=y.data)!=null&&u.length)&&(a.value=y.data.map(m=>({label:m.name,value:m.id})))};return e.onMounted(()=>{g()}),{isShow:t,searchType:n,columns:d,supplierList:a,platformCategoryList:l,fetchSupplierList:p}},nn=e.defineComponent({__name:"search",emits:["search"],setup(t,{emit:a}){const l=a,{searchType:n,columns:d}=on(),g=()=>{const r=ae.cloneDeep(n);r.shopCategoryId=Array.isArray(r.shopCategoryId)?r.shopCategoryId.pop():"",l("search",r)},p=()=>{Object.keys(n).forEach(r=>n[r]=""),g()};return(r,y)=>(e.openBlock(),e.createBlock(le,{modelValue:e.unref(n),"onUpdate:modelValue":y[0]||(y[0]=u=>e.isRef(n)?n.value=u:null),columns:e.unref(d),"show-number":3,onSearchHandle:g,onHandleReset:p},null,8,["modelValue","columns"]))}}),an=()=>{const t=e.ref(),a=e.ref(!1);return{currentRow:t,showPreviewDialog:a,openPreviewDialog:n=>{t.value=n,a.value=!0}}},ln=()=>{const t=ee.useRouter(),a=e.reactive({page:{current:1,size:10},total:0}),l=e.reactive({supplierId:"",productName:"",shopCategoryId:"",status:""}),n=e.ref([]),d=e.ref([]),g=async()=>{let s=[],o=0;try{const _=await We({...a.page,...l});_.code===200&&_.data&&(s=_.data.records,o=Number(_.data.total))}finally{d.value=s,a.total=o}},p=s=>{Object.keys(s).forEach(o=>{const _=o;l[_]=s[_]||""}),a.page.current=1,g()},r=async(s,o,_)=>{let S=s?n.value.map(x=>({shopId:Y.useShopInfoStore().shopInfo.shopId,productId:x.id})):[{shopId:Y.useShopInfoStore().shopInfo.shopId,productId:_.id}];const{code:P,success:B}=await nt(S,o);P===200&&B&&(n.value=[],E.ElMessage.success(`${o.includes("OFF")?"下":"上"}架成功`)),g()},y=e.computed(()=>s=>{const o=((s==null?void 0:s.salePrices)||[]).map(P=>Number(P)),_=Math.min(...o),S=Math.max(...o);return _===S?S/1e4:`${_/1e4}~￥${S/1e4}`});return{handleSearch:p,releaseData:d,multiSelect:n,pagination:a,initData:g,handleSaleOn:r,searchType:l,changeStatus:s=>{l.status=s,a.page.current=1,n.value=[],g()},handleSizeChange:s=>{a.page.size=s,g()},handleCurrentChange:s=>{a.page.current=s,g()},computedSalePrice:y,handleContact:s=>{se(Y.useShopInfoStore().shopInfo.id,s.shopId).then(({code:o})=>{o===200&&t.push({path:"/message/customer/supplierService",query:{id:s.supplierId}})})}}},rn={class:"good"},sn={class:"good__info"},cn={class:"good__info"},dn={class:"good__img"},pn=e.defineComponent({__name:"preview",props:{currentProduct:{type:Object,default:()=>({})}},setup(t){const a=t,{divTenThousand:l}=J(),n=e.ref([]),d=e.ref([]),g=async()=>{const{data:p}=await Se(Y.useShopInfoStore().shopInfo.id,a.currentProduct.id);n.value=(p==null?void 0:p.skus)||[],d.value=(p==null?void 0:p.specGroups)||[]};return e.onMounted(()=>g()),(p,r)=>{var i,N;const y=e.resolveComponent("el-image"),u=e.resolveComponent("el-table-column"),m=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",rn,[e.createElementVNode("div",sn,"店铺名称："+e.toDisplayString((i=a.currentProduct)==null?void 0:i.supplierName),1),e.createElementVNode("div",cn,"商品名称："+e.toDisplayString((N=a.currentProduct)==null?void 0:N.name),1),e.createElementVNode("div",dn,[r[0]||(r[0]=e.createElementVNode("text",null,"商品图片：",-1)),e.createVNode(y,{"preview-src-list":[a.currentProduct.pic],src:a.currentProduct.pic,style:{width:"100px",height:"100px"}},null,8,["preview-src-list","src"])]),r[1]||(r[1]=e.createElementVNode("div",null,"规格：",-1)),e.createVNode(m,{data:n.value,"header-row-style":{"font-size":"12px",color:"#000000"},height:"350",stripe:""},{default:e.withCtx(()=>{var s;return[d.value.length?(e.openBlock(),e.createBlock(u,{key:0,align:"center",label:"规格"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString((o==null?void 0:o.specs)&&(o==null?void 0:o.specs.join("-"))),1)]),_:1})):e.createCommentVNode("",!0),n.value&&((s=n.value[0])!=null&&s.image)?(e.openBlock(),e.createBlock(u,{key:1,align:"center",label:"sku图"},{default:e.withCtx(({row:o})=>[e.createVNode(y,{src:o==null?void 0:o.image,style:{width:"50px",height:"50px"}},null,8,["src"])]),_:1})):e.createCommentVNode("",!0),e.createVNode(u,{align:"center",label:"销售价(元)"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString(o.salePrice&&e.unref(l)(o.salePrice)),1)]),_:1}),e.createVNode(u,{align:"center",label:"划线价(元)",prop:"originalPrice"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString(o.price&&e.unref(l)(o.price)),1)]),_:1}),e.createVNode(u,{align:"center",label:"重量(kg)",prop:"weight"},{default:e.withCtx(({row:o})=>[e.createElementVNode("span",null,e.toDisplayString(o.weight),1)]),_:1})]}),_:1},8,["data"])])}}}),na="",mn=z(pn,[["__scopeId","data-v-466eb7a7"]]),fn=()=>{const t=e.ref(!1),a=e.ref();return{violationReason:a,showViolationReason:t,openViolationReasonDialog:n=>{a.value=n,t.value=!0}}},hn={style:{"line-height":"30px"}},gn=["src"],_n=e.defineComponent({__name:"violation-reason",props:{productViolation:{type:Object,default:()=>({})}},setup(t){const a={PROHIBITED:"违禁品",COUNTERFEIT:"假冒伪劣",EXCESSIVE_PLATFORM_INTERVENTION:"平台介入率太高",TITLE_IRREGULARITY:"标题有问题",OTHER:"其他"},l=t,n=e.computed(()=>{var d;return{...l.productViolation,violationType:a[l.productViolation.violationType],violationEvidence:(d=l.productViolation.violationEvidence)==null?void 0:d.split(",")}});return(d,g)=>{const p=e.resolveComponent("el-col"),r=e.resolveComponent("el-row");return e.openBlock(),e.createElementBlock("div",hn,[e.createVNode(r,{gutter:8},{default:e.withCtx(()=>[e.createVNode(p,{span:12},{default:e.withCtx(()=>[e.createElementVNode("div",null,"检查员："+e.toDisplayString(n.value.rummager),1)]),_:1}),e.createVNode(p,{span:12},{default:e.withCtx(()=>[e.createElementVNode("div",null,"检查时间："+e.toDisplayString(n.value.examineDateTime),1)]),_:1})]),_:1}),e.createElementVNode("div",null,"类型："+e.toDisplayString(n.value.violationType),1),e.createElementVNode("div",null,"原因："+e.toDisplayString(n.value.violationExplain),1),e.createElementVNode("div",null,[g[0]||(g[0]=e.createTextVNode(" 相关证据： ")),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.violationEvidence,(y,u)=>(e.openBlock(),e.createElementBlock("img",{key:u,src:y,class:"violation-evidence"},null,8,gn))),128))])])}}}),la="",un=z(_n,[["__scopeId","data-v-99c6b116"]]),yn={class:"tab_container"},xn={class:"handle_container"},Nn={class:"commodity-info"},Cn=["src"],Vn={class:"commodity-info-text"},Sn={key:0,class:"virtual_product"},bn={key:1},En={key:0,class:"virtual_product"},kn={style:{color:"#f54319"}},Tn={key:0},In={key:1,style:{color:"#f54319"}},Dn={class:"customer"},Pn={class:"customer__name"},Bn=e.defineComponent({__name:"index",setup(t){const{handleSearch:a,releaseData:l,multiSelect:n,pagination:d,initData:g,handleSaleOn:p,searchType:r,changeStatus:y,handleSizeChange:u,handleCurrentChange:m,computedSalePrice:i,handleContact:N}=ln(),{currentRow:s,showPreviewDialog:o,openPreviewDialog:_}=an(),{violationReason:S,showViolationReason:P,openViolationReasonDialog:B}=fn();return g(),(x,k)=>{const I=e.resolveComponent("el-tab-pane"),U=e.resolveComponent("el-tabs"),F=e.resolveComponent("el-button"),b=e.resolveComponent("el-tooltip"),O=e.resolveComponent("el-switch"),C=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(nn,{onSearch:e.unref(a)},null,8,["onSearch"]),e.createElementVNode("div",yn,[e.createVNode(U,{"model-value":e.unref(r).status,"onUpdate:modelValue":e.unref(y)},{default:e.withCtx(()=>[e.createVNode(I,{label:"全部",name:""}),e.createVNode(I,{label:"已上架",name:"SELL_ON"}),e.createVNode(I,{label:"已下架",name:"SELL_OFF"}),e.createVNode(I,{label:"违规下架",name:"PLATFORM_SELL_OFF"})]),_:1},8,["model-value","onUpdate:modelValue"])]),e.createElementVNode("div",xn,[e.withDirectives(e.createVNode(F,{disabled:e.unref(n).length===0,style:{"margin-right":"10px"},round:"",onClick:k[0]||(k[0]=f=>e.unref(p)(!0,"SELL_ON"))},{default:e.withCtx(()=>k[5]||(k[5]=[e.createTextVNode("批量上架")])),_:1},8,["disabled"]),[[e.vShow,["SELL_OFF",""].includes(e.unref(r).status)]]),e.withDirectives(e.createVNode(F,{disabled:e.unref(n).length===0,style:{"margin-right":"10px"},round:"",onClick:k[1]||(k[1]=f=>e.unref(p)(!0,"SELL_OFF"))},{default:e.withCtx(()=>k[6]||(k[6]=[e.createTextVNode("批量下架")])),_:1},8,["disabled"]),[[e.vShow,["SELL_ON",""].includes(e.unref(r).status)]])]),e.createVNode(e.unref(Ne),{checkedItem:e.unref(n),"onUpdate:checkedItem":k[2]||(k[2]=f=>e.isRef(n)?n.value=f:null),data:e.unref(l),style:{overflowY:"auto"},selection:!0,"no-border":""},{default:e.withCtx(()=>[e.createVNode(M,{label:"商品名称",width:"360"},{default:e.withCtx(({row:f})=>[e.createElementVNode("div",Nn,[e.createElementVNode("img",{src:f==null?void 0:f.pic},null,8,Cn),e.createElementVNode("div",Vn,[(f==null?void 0:f.name.length)>=30?(e.openBlock(),e.createBlock(b,{key:0,class:"box-item",effect:"dark",content:f==null?void 0:f.name,placement:"top"},{default:e.withCtx(()=>[e.createElementVNode("p",null,[f.productType==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",Sn,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(f==null?void 0:f.name),1)])]),_:2},1032,["content"])):(e.openBlock(),e.createElementBlock("p",bn,[f.productType==="VIRTUAL_PRODUCT"?(e.openBlock(),e.createElementBlock("span",En,"虚拟")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(f==null?void 0:f.name),1)]))])])]),_:1}),e.createVNode(M,{label:"价格",width:"200"},{default:e.withCtx(({row:f})=>[e.createElementVNode("span",kn," ￥"+e.toDisplayString(e.unref(i)(f)),1)]),_:1}),e.createVNode(M,{label:"库存",width:"140"},{default:e.withCtx(({row:f})=>{var R;return[e.createTextVNode(e.toDisplayString((R=f==null?void 0:f.storageSkus)==null?void 0:R.reduce((H,Q)=>H+Number(Q.stock),0)),1)]}),_:1}),e.createVNode(M,{label:"状态",width:"120"},{default:e.withCtx(({row:f})=>[f!=null&&f.delete?(e.openBlock(),e.createElementBlock("span",Tn,"下架")):f.status==="PLATFORM_SELL_OFF"?(e.openBlock(),e.createElementBlock("span",In,"违规下架")):(e.openBlock(),e.createBlock(O,{key:2,modelValue:f.status,"onUpdate:modelValue":R=>f.status=R,style:{"--el-switch-on-color":"#13ce66"},"active-value":"SELL_ON","inactive-value":"SELL_OFF",onClick:R=>e.unref(p)(!1,f.status,f)},null,8,["modelValue","onUpdate:modelValue","onClick"]))]),_:1}),e.createVNode(M,{label:"所属供应商",prop:"supplierName",width:"140"},{default:e.withCtx(({row:f})=>[e.createElementVNode("div",Dn,[e.createElementVNode("div",null,[e.createElementVNode("span",Pn,e.toDisplayString(f.supplierName),1),e.createVNode(Z,{name:"icon-xiaoxi-copy",size:"18px",style:{cursor:"pointer"},svg:"",onClick:R=>e.unref(N)(f)},null,8,["onClick"])]),e.createElementVNode("span",null,e.toDisplayString(f.supplierContractNumber),1)])]),_:1}),e.createVNode(M,{fixed:"right",label:"操作",align:"right",width:"140"},{default:e.withCtx(({row:f})=>[e.createElementVNode("div",null,[e.createVNode(F,{link:"",size:"small",type:"primary",onClick:R=>e.unref(_)(f)},{default:e.withCtx(()=>k[7]||(k[7]=[e.createTextVNode("查看")])),_:2},1032,["onClick"]),(f==null?void 0:f.status)==="PLATFORM_SELL_OFF"?(e.openBlock(),e.createBlock(F,{key:0,link:"",size:"small",type:"primary",onClick:R=>{var H;return e.unref(B)((H=f==null?void 0:f.extra)==null?void 0:H.productViolation)}},{default:e.withCtx(()=>k[8]||(k[8]=[e.createTextVNode("违规原因 ")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0)])]),_:1})]),_:1},8,["checkedItem","data"]),e.createVNode(ie,{"page-size":e.unref(d).page.size,"page-num":e.unref(d).page.current,total:e.unref(d).total,onHandleSizeChange:e.unref(u),onHandleCurrentChange:e.unref(m)},null,8,["page-size","page-num","total","onHandleSizeChange","onHandleCurrentChange"]),e.createVNode(C,{modelValue:e.unref(o),"onUpdate:modelValue":k[3]||(k[3]=f=>e.isRef(o)?o.value=f:null),"close-on-click-modal":!1,"destroy-on-close":"",title:"查看",width:"1000px"},{default:e.withCtx(()=>[e.createVNode(mn,{"current-product":e.unref(s)},null,8,["current-product"])]),_:1},8,["modelValue"]),e.createVNode(C,{modelValue:e.unref(P),"onUpdate:modelValue":k[4]||(k[4]=f=>e.isRef(P)?P.value=f:null),"close-on-click-modal":!1,"destroy-on-close":"",title:"违规原因",width:"600px"},{default:e.withCtx(()=>[e.createVNode(un,{"product-violation":e.unref(S)},null,8,["product-violation"])]),_:1},8,["modelValue"])],64)}}}),ia="",wn=Object.freeze(Object.defineProperty({__proto__:null,default:z(Bn,[["__scopeId","data-v-dc7c38b7"]])},Symbol.toStringTag,{value:"Module"}));return Ue});
