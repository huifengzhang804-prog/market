(function(e,I){typeof exports=="object"&&typeof module<"u"?module.exports=I(require("vue"),require("vue-router"),require("@/components/q-choose-goods-popup/q-choose-goods-popup.vue"),require("element-plus"),require("@/composables/useConvert"),require("@/apis/http"),require("@/utils/date"),require("@/store/modules/shopInfo"),require("@/views/material/selectMaterial.vue"),require("lodash-es"),require("@/components/QSafeBtn/QSafeBtn.vue")):typeof define=="function"&&define.amd?define(["vue","vue-router","@/components/q-choose-goods-popup/q-choose-goods-popup.vue","element-plus","@/composables/useConvert","@/apis/http","@/utils/date","@/store/modules/shopInfo","@/views/material/selectMaterial.vue","lodash-es","@/components/QSafeBtn/QSafeBtn.vue"],I):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopAddSetMeal=I(e.ShopAddSetMealContext.Vue,e.ShopAddSetMealContext.VueRouter,e.ShopAddSetMealContext.QChooseGoodsPopup,e.ShopAddSetMealContext.ElementPlus,e.ShopAddSetMealContext.UseConvert,e.ShopAddSetMealContext.Request,e.ShopAddSetMealContext.DateUtil,e.ShopAddSetMealContext.ShopInfoStore,e.ShopAddSetMealContext.selectMaterial,e.ShopAddSetMealContext.Lodash,e.ShopAddSetMealContext.QSafeBtn))})(this,function(e,I,K,S,W,Z,de,v,re,ee,ie){"use strict";var te=document.createElement("style");te.textContent=`@charset "UTF-8";.com[data-v-c62203c6]{display:flex;justify-content:center;align-items:center}.com__pic[data-v-c62203c6]{width:62px;height:62px}.com__name[data-v-c62203c6]{font-size:14px;display:flex;align-items:center;flex-direction:column;justify-content:center;margin-left:10px;align-items:baseline}.com__name--text[data-v-c62203c6]{width:113px;height:50px;line-height:24px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.flex[data-v-c62203c6]{display:flex;justify-content:space-around;align-items:center}[data-v-c62203c6].el-table .cell{line-height:20px}.add[data-v-b5ad4e8e]{scrollbar-width:none;-ms-overflow-style:none;height:100%;position:relative;display:flex;flex-direction:column;overflow-y:scroll;padding:40px 40px 0}.add[data-v-b5ad4e8e]::-webkit-scrollbar{display:none}.add .position_tool[data-v-b5ad4e8e]{margin-top:auto;width:calc(100% + 80px);align-items:center;position:sticky;bottom:0;padding:15px 0;display:flex;justify-content:center;box-shadow:0 0 10px #d5d5d5;background-color:#fff;transform:translate(-40px);z-index:100}.bargaining_amount[data-v-b5ad4e8e]{position:relative;width:100%}.bargaining_amount__description[data-v-b5ad4e8e]{position:absolute;top:-35px;right:0;width:480px}.title[data-v-b5ad4e8e]{font-size:14px;color:#323233;font-weight:700;margin-bottom:30px;text-align:center}.msg[data-v-b5ad4e8e]{font-size:12px;margin-left:12px;color:#c4c4c4}.use_discount[data-v-b5ad4e8e]{display:flex;width:100%}.discount_msg[data-v-b5ad4e8e]{display:inline-block;width:400px;flex:1}.rules[data-v-b5ad4e8e]{display:flex;margin-top:10px;height:50px}.period-validity[data-v-b5ad4e8e]{width:300px;display:flex}.text[data-v-b5ad4e8e]{font-size:14px;color:#333}.goodsData[data-v-b5ad4e8e]{border:1px solid #ccc}.goods-list[data-v-b5ad4e8e]{width:90%;margin-top:20px;height:300px;border:1px solid transparent}.goods-list__info[data-v-b5ad4e8e]{display:flex}.goods-list__goods-list__info-name[data-v-b5ad4e8e]{display:flex;flex-direction:column;justify-content:space-around;align-items:flex-start;padding:0 16px}.goods-list__goods-list__info-name--name[data-v-b5ad4e8e]{width:462px;font-size:14px;color:#2e99f3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.goods-list__goods-list__info-name--price[data-v-b5ad4e8e]{font-size:14px;text-align:LEFT;color:#f12f22}.goods-list__goods-list__info-name--price[data-v-b5ad4e8e]:before{content:"￥";font-size:12px;text-align:LEFT;color:#f12f22}.my-header[data-v-b5ad4e8e]{font-size:16px}.ruleform-date[data-v-b5ad4e8e]{width:550px;display:flex;align-items:center}.flex[data-v-b5ad4e8e]{margin-top:10px;height:50px}.flex-item[data-v-b5ad4e8e]{width:40%}.coupon-rules[data-v-b5ad4e8e]{height:60px;display:flex;justify-content:center;align-items:center}.nav-button[data-v-b5ad4e8e]{position:fixed;left:50%;bottom:30px}.selectMaterialStyle[data-v-b5ad4e8e]{width:100px;height:100px;border-radius:5px;overflow:hidden;border:1px dashed #ccc;cursor:pointer;display:flex;justify-content:center;align-items:center}.selectMaterialStyle__span[data-v-b5ad4e8e]{color:#999;font-size:20px}
`,document.head.appendChild(te);const se={class:"com"},ce={class:"com__name"},pe={class:"com__name--text",style:{"margin-top":"5px"}},ue={class:"flex"},me={class:"dialog-footer"},fe=e.defineComponent({__name:"select-goods-table",props:{productList:{type:Array,default(){return[]}},isEdit:{type:Boolean,default:!1},flatGoodList:{type:Array,default(){return[]}},productAttributes:{type:String,default:"MAIN_PRODUCT"}},setup(V,{expose:_}){const h=V,{divTenThousand:M,mulTenThousand:k}=W(),x=e.ref([]),b=e.ref(!1);e.watch(()=>h.productList,o=>{console.log("表格变化",o);const l=z(o);console.log("flatGoodList",l),x.value=P(l)},{deep:!0}),e.watch(()=>h.flatGoodList,o=>{x.value=P(o)});function C(o){return o.skuItem.stockType==="LIMITED"?Number(o.skuItem.skuStock):1e5}function y(o){return M(o.skuItem.skuPrice).toNumber()}function z(o,l){if(!o.length)return[];const u=[];return o.forEach(s=>{s.skuIds.forEach((f,c)=>{(s.stocks[c]>0&&s.stockTypes[c]==="LIMITED"||s.stockTypes[c]==="UNLIMITED")&&u.push({productId:s.productId,productName:s.productName,productPic:s.pic,shopId:s.shopId,skuItem:{productId:s.productId,skuId:f,skuName:s.specs[c],skuPrice:s.salePrices[c],skuStock:s.stocks[c],stockType:s.stockTypes[c]},rowTag:0,matchingStock:1,isJoin:!0,matchingPrice:.01})})}),u}function P(o,l){let u=0,s=o.length;for(let f=0;f<s;f++){const c=o[f];f===0&&(c.rowTag=1,u=0),f!==0&&(c.productId===o[f-1].productId?(c.rowTag=0,o[u].rowTag=o[u].rowTag+1):(c.rowTag=1,u=f))}return o}const G=({row:o,column:l,rowIndex:u,columnIndex:s})=>{if(s===0)return{rowspan:o.rowTag,colspan:o.rowTag?1:0}};function n(o){return o.stockType==="UNLIMITED"?"无限库存":`${"库存"+o.skuStock}`}function p(){return e.toRaw(x.value).filter(l=>l.isJoin).map(l=>{const{setMealId:u,productId:s,productPic:f,matchingPrice:c,productName:L,matchingStock:U,shopId:r,skuItem:{skuId:N,skuStock:H,skuPrice:O,skuName:Q,stockType:Y}}=l;return{setMealId:u||"",shopId:r,productId:s,productPic:f,productName:L,productAttributes:h.productAttributes,skuId:N,skuName:Q,skuStock:+H,skuPrice:O,stockType:Y,matchingPrice:k(c).toString(),matchingStock:U}})}function j(){let o=!0;const l=x.value;if(!l.length)S.ElMessage.warning("请选择商品"),o=!1;else for(let u=0;u<l.length;u++)if(l[u].isJoin&&!l[u].matchingStock){S.ElMessage.warning("商品库存必须大于零"),o=!1;break}return o}const g=e.ref({stock:1,price:.01}),w=e.ref("0"),E=o=>{w.value=o.productId,b.value=!0},D=()=>{g.value={stock:1,price:.01},b.value=!1},A=()=>{x.value.forEach(o=>{o.productId===w.value&&(o.matchingStock=g.value.stock>C(o)?C(o):g.value.stock,o.matchingPrice=g.value.price>y(o)?y(o):g.value.price)}),b.value=!1};return _({getProduct:p,validateProduct:j}),(o,l)=>{const u=e.resolveComponent("el-image"),s=e.resolveComponent("el-button"),f=e.resolveComponent("el-table-column"),c=e.resolveComponent("el-input-number"),L=e.resolveComponent("el-table"),U=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(L,{data:x.value,"max-height":500,"span-method":G},{default:e.withCtx(()=>[e.createVNode(f,{label:"商品信息",width:"215"},{default:e.withCtx(({row:r})=>[e.createElementVNode("div",se,[e.createVNode(u,{src:r.productPic,class:"com__pic"},null,8,["src"]),e.createElementVNode("div",ce,[h.isEdit?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(s,{key:0,class:"com__batch",type:"primary",link:"",onClick:N=>E(r)},{default:e.withCtx(()=>l[4]||(l[4]=[e.createTextVNode(" 批量设置 ")])),_:2},1032,["onClick"])),e.createElementVNode("div",pe,e.toDisplayString(r.productName),1)])])]),_:1}),e.createVNode(f,{label:"规格"},{default:e.withCtx(({row:r})=>[e.createTextVNode(e.toDisplayString(r.skuItem.skuName),1)]),_:1}),e.createVNode(f,{label:"套餐库存"},{default:e.withCtx(({row:r})=>[e.createElementVNode("div",null,[e.createVNode(c,{controls:!1,disabled:h.isEdit,max:C(r),min:0,"model-value":+r.matchingStock,precision:0,style:{width:"80px"},"onUpdate:modelValue":N=>r.matchingStock=N},null,8,["disabled","max","model-value","onUpdate:modelValue"])]),e.createElementVNode("div",null,e.toDisplayString(n(r.skuItem)),1)]),_:1}),e.createVNode(f,{label:"套餐价（元）"},{default:e.withCtx(({row:r})=>[e.createElementVNode("div",null,[e.createVNode(c,{controls:!1,disabled:h.isEdit,max:y(r),min:.01,"model-value":+r.matchingPrice,precision:2,style:{width:"80px"},"onUpdate:modelValue":N=>r.matchingPrice=N},null,8,["disabled","max","model-value","onUpdate:modelValue"])]),e.createElementVNode("div",null,"销售价"+e.toDisplayString(y(r)),1)]),_:1})]),_:1},8,["data"]),e.createVNode(U,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=r=>b.value=r),title:"批量设置",width:"500","destroy-on-close":"",center:"",top:"30vh",onClose:D},{footer:e.withCtx(()=>[e.createElementVNode("div",me,[e.createVNode(s,{onClick:l[2]||(l[2]=r=>b.value=!1)},{default:e.withCtx(()=>l[7]||(l[7]=[e.createTextVNode("取消")])),_:1}),e.createVNode(s,{type:"primary",onClick:A},{default:e.withCtx(()=>l[8]||(l[8]=[e.createTextVNode(" 确定 ")])),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("div",ue,[l[5]||(l[5]=e.createTextVNode(" 套餐库存 ")),e.createVNode(c,{modelValue:g.value.stock,"onUpdate:modelValue":l[0]||(l[0]=r=>g.value.stock=r),precision:0,controls:!1,min:0,onChange:o.handleChange},null,8,["modelValue","onChange"]),l[6]||(l[6]=e.createTextVNode(" 套餐价 ")),e.createVNode(c,{modelValue:g.value.price,"onUpdate:modelValue":l[1]||(l[1]=r=>g.value.price=r),precision:2,controls:!1,min:.01,onChange:o.handleChange},null,8,["modelValue","onChange"])])]),_:1},8,["modelValue"])])}}}),Ae="",oe=(V,_)=>{const h=V.__vccOpts||V;for(const[M,k]of _)h[M]=k;return h},ae=oe(fe,[["__scopeId","data-v-c62203c6"]]),le="addon-matching-treasure/setMeal",ge=V=>Z.post({url:le,data:V}),he=(V,_)=>Z.get({url:`${le}/${V}/${_}`}),xe={class:"add"},be={class:"title"},Ve={class:"ruleform-date"},_e=["src"],Me={class:"use_discount"},ke={class:"position_tool"},Ce=e.defineComponent({__name:"ShopAddSetMeal",setup(V){const _=I.useRouter(),h=I.useRoute(),M=new de,k=e.ref(),x=e.ref(),b=e.ref(),C=e.ref(),y=e.ref([]),z=e.reactive({form:{setMealId:"",shopId:"",shopName:v.useShopInfoStore().shopInfo.name,setMealName:"",setMealDescription:"",setMealMainPicture:"",setMealType:"FIXED_COMBINATION",setMealStatus:"NOT_STARTED",startTime:"",endTime:"",stackable:{coupon:!1,vip:!1,full:!1},mainProduct:[],matchingProducts:[],distributionMode:"EXPRESS"},isEditDisable:!1,fullReductionTime:[],rules:{setMealName:[{required:!0,message:"请输入套餐名称",trigger:"blur"}],setMealDescription:[{required:!0,message:"请输入套餐描述",trigger:"blur"}],product:[{required:!0,message:"请选择商品",trigger:["blur","change"]}],startTime:[{required:!0,message:"请选择开始日期",trigger:["blur","change"]},{validator:Y,trigger:["blur","change"]}],endTime:[{required:!0,message:"请选择结束日期",trigger:["blur","change"]},{validator:ye,trigger:["blur","change"]}],setMealMainPicture:[{required:!0,message:"请添加套餐主图",trigger:["blur","change"]}],setMealType:[{required:!0,message:"请选择套餐类型",trigger:["blur","change"]}]},flatMainGoodList:[],flatMatchingGoodList:[],choosedMainGoods:[],choosedMatchingGoods:[],choosedMainGoodsPopup:!1,choosedMatchingGoodsPopup:!1}),P=e.reactive({maxPrice:"",minPrice:"",keyword:"",categoryFirstId:"",excludeProductIds:[]}),G=e.reactive({maxPrice:"",minPrice:"",keyword:"",categoryFirstId:"",excludeProductIds:[]}),{form:n,isEditDisable:p,rules:j,choosedMainGoodsPopup:g,choosedMatchingGoodsPopup:w,choosedMainGoods:E,choosedMatchingGoods:D,flatMainGoodList:A,flatMatchingGoodList:o}=e.toRefs(z),l=e.ref(),{divTenThousand:u}=W(),s=a=>{!a||!a[0]||!a[1]||(a[0].getTime()>=a[1].getTime()&&S.ElMessage.warning("结束时间大于开始时间"),n.value.startTime=M.getYMDHMSs(a[0]),n.value.endTime=M.getYMDHMSs(a[1]))};f();async function f(a=h.query){if(p.value=!!a.isLookUp,a.shopId&&a.setMealId){const{code:t,data:i,msg:m}=await he(a.shopId,a.setMealId);if(t!==200)return S.ElMessage.error(m||"获取活动详情失败");n.value=i,A.value=c(i.mainProduct),o.value=c(i.matchingProducts),y.value=[i.startTime,i.endTime]}}function c(a){return a.map(t=>{const{productId:i,shopId:m,skuPrice:q,productPic:R,productName:T,skuId:F,skuStock:B,stockType:X,skuName:d,setMealId:Pe,matchingPrice:Ee,matchingStock:De,productAttributes:Ge}=t;return{isJoin:!0,productId:i,shopId:m,productName:T,productPic:R,setMealId:Pe,matchingPrice:u(Ee).toString(),matchingStock:De,productAttributes:Ge,skuItem:{productId:i,skuId:F,skuName:d,skuPrice:q,skuStock:B,stockType:X}}})}const L=async()=>{if(!(!l.value||!await l.value.validate())&&!(!k.value&&!x.value)&&k.value.validateProduct()&&x.value.validateProduct()){n.value.mainProduct=k.value.getProduct(),n.value.matchingProducts=x.value.getProduct();const{code:t,data:i,msg:m}=await ge(n.value);if(t===200)return U();S.ElMessage.error(m||"添加活动失败")}};function U(){S.ElMessage.success("添加活动成功"),_.push({name:"bundlePriceIndex",query:{flag:"true"}})}const r=a=>{P.excludeProductIds=a.tempGoods.map(t=>t.productId),D.value=ee.cloneDeep(a.tempGoods),b.value.retrieveCommodity()},N=a=>{console.log(a.tempGoods),G.excludeProductIds=[a.tempGoods[0].productId],E.value=ee.cloneDeep(a.tempGoods),C.value.retrieveCommodity()};function H(a){const t=M.getYMD(new Date),i=M.getYMD(a);return t===i?!1:new Date().getTime()>a.getTime()}const O=async a=>n.value.distributionMode?Q(a):S.ElMessage.error({message:"请先选择配送方式"});function Q(a){if(a==="main"){g.value=!0;return}w.value=!0}function Y(a,t,i){t?t&&n.value.endTime?$(new Date(n.value.endTime).getTime(),i,"开始日期和结束日期最少间隔5分钟",new Date(t).getTime(),1e3*60*5):$(new Date(t).getTime(),i,"开始日期必须是一个将来的时间",new Date().getTime(),1e3):i(new Error("请选择活动开始日期"))}function ye(a,t,i){t?t&&n.value.startTime?$(new Date(t).getTime(),i,"开始日期和结束日期最少间隔5分钟",new Date(n.value.startTime).getTime(),1e3*60*5):$(new Date(t).getTime(),i,"结束日期最少大当前时间5分钟",new Date().getTime()+1e3,1e3*60*5):i(new Error("请选择活动结束日期"))}function Ne(a,t=new Date().getTime()){const i=a-t;return(m=1e3)=>i>=m}function $(a,t,i,m,q){Ne(a,m)(q)?t():t(new Error(i))}const J=e.ref(!1),Te=a=>{J.value=a},ne=()=>{p.value||(J.value=!0)},Se=a=>{n.value.setMealMainPicture=a},we=a=>{n.value.setMealMainPicture=(a==null?void 0:a.shift())||""},Ie=()=>{o.value=[],D.value=[],A.value=[],E.value=[],b.value.allChecked=!1,C.value.allChecked=!1,b.value.handleGetAll(),C.value.handleGetAll()};return(a,t)=>{const i=e.resolveComponent("el-input"),m=e.resolveComponent("el-form-item"),q=e.resolveComponent("el-date-picker"),R=e.resolveComponent("el-checkbox"),T=e.resolveComponent("el-radio"),F=e.resolveComponent("el-radio-group"),B=e.resolveComponent("el-button"),X=e.resolveComponent("el-form");return e.openBlock(),e.createElementBlock("div",xe,[e.createElementVNode("h1",be,e.toDisplayString(e.unref(p)?"基本信息":"新增套餐"),1),e.createVNode(X,{ref_key:"ruleFormRef",ref:l,"inline-message":!1,model:e.unref(n),rules:e.unref(j),"label-position":"left","label-width":"auto"},{default:e.withCtx(()=>[e.createVNode(m,{label:"套餐名称",prop:"setMealName"},{default:e.withCtx(()=>[e.createVNode(i,{modelValue:e.unref(n).setMealName,"onUpdate:modelValue":t[0]||(t[0]=d=>e.unref(n).setMealName=d),modelModifiers:{trim:!0},disabled:e.unref(p),maxlength:"10",placeholder:"限10个字",style:{width:"551px"}},null,8,["modelValue","disabled"])]),_:1}),e.createVNode(m,{label:"套餐描述",prop:"setMealDescription"},{default:e.withCtx(()=>[e.createVNode(i,{modelValue:e.unref(n).setMealDescription,"onUpdate:modelValue":t[1]||(t[1]=d=>e.unref(n).setMealDescription=d),modelModifiers:{trim:!0},disabled:e.unref(p),maxlength:"40",placeholder:"套餐描述不超过40个字",style:{width:"551px"}},null,8,["modelValue","disabled"])]),_:1}),e.createVNode(m,{label:"活动日期",required:""},{default:e.withCtx(()=>[e.createElementVNode("div",Ve,[e.createVNode(q,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=d=>y.value=d),type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",disabled:e.unref(p),"disabled-date":H,onChange:s},null,8,["modelValue","disabled"])])]),_:1}),e.createVNode(m,{label:"套餐主图",prop:"setMealMainPicture"},{default:e.withCtx(()=>[e.unref(n).setMealMainPicture?(e.openBlock(),e.createElementBlock("img",{key:1,src:e.unref(n).setMealMainPicture,alt:"",class:"selectMaterialStyle",onClick:ne},null,8,_e)):(e.openBlock(),e.createElementBlock("div",{key:0,class:"selectMaterialStyle",onClick:ne},t[15]||(t[15]=[e.createElementVNode("span",{class:"selectMaterialStyle__span"},"+",-1)])))]),_:1}),e.createVNode(m,{label:"优惠叠加"},{default:e.withCtx(()=>[e.createElementVNode("div",Me,[e.createVNode(R,{modelValue:e.unref(n).stackable.vip,"onUpdate:modelValue":t[3]||(t[3]=d=>e.unref(n).stackable.vip=d),disabled:e.unref(p),label:"会员价"},null,8,["modelValue","disabled"]),e.createVNode(R,{modelValue:e.unref(n).stackable.coupon,"onUpdate:modelValue":t[4]||(t[4]=d=>e.unref(n).stackable.coupon=d),disabled:e.unref(p),label:"优惠券"},null,8,["modelValue","disabled"]),e.createVNode(R,{modelValue:e.unref(n).stackable.full,"onUpdate:modelValue":t[5]||(t[5]=d=>e.unref(n).stackable.full=d),disabled:e.unref(p),label:"满减"},null,8,["modelValue","disabled"]),t[16]||(t[16]=e.createElementVNode("div",{class:"msg discount_msg"},[e.createTextVNode(" 优惠叠加可能导致实付金额为 "),e.createElementVNode("strong",{style:{color:"red"}},"0"),e.createTextVNode(" (实付金额 = 活动价 - 会员优惠 - 优惠券优惠 - 满减优惠) ")],-1))])]),_:1}),e.createVNode(m,{label:"套餐类型",prop:"setMealType"},{default:e.withCtx(()=>[e.createVNode(F,{modelValue:e.unref(n).setMealType,"onUpdate:modelValue":t[6]||(t[6]=d=>e.unref(n).setMealType=d),disabled:e.unref(p),class:"ml-4"},{default:e.withCtx(()=>[e.createVNode(T,{value:"OPTIONAL_PRODUCT"},{default:e.withCtx(()=>t[17]||(t[17]=[e.createTextVNode("自选商品套餐")])),_:1}),e.createVNode(T,{value:"FIXED_COMBINATION"},{default:e.withCtx(()=>t[18]||(t[18]=[e.createTextVNode("固定套餐")])),_:1})]),_:1},8,["modelValue","disabled"]),t[19]||(t[19]=e.createElementVNode("span",{class:"msg"},"自选套餐：主商品+至少1种搭配商品以上 ；固定套餐：主商品+库存不为0的所有搭配商品各1件以上",-1))]),_:1}),e.createVNode(m,{label:"配送方式",prop:"distributionMode",required:""},{default:e.withCtx(()=>[e.createVNode(F,{modelValue:e.unref(n).distributionMode,"onUpdate:modelValue":t[7]||(t[7]=d=>e.unref(n).distributionMode=d),class:"ml-4",disabled:e.unref(p),onChange:Ie},{default:e.withCtx(()=>{var d;return[e.createVNode(T,{value:"EXPRESS"},{default:e.withCtx(()=>t[20]||(t[20]=[e.createTextVNode("快递配送")])),_:1}),e.createVNode(T,{value:"INTRA_CITY_DISTRIBUTION"},{default:e.withCtx(()=>t[21]||(t[21]=[e.createTextVNode("同城配送")])),_:1}),e.createVNode(T,{value:"SHOP_STORE"},{default:e.withCtx(()=>t[22]||(t[22]=[e.createTextVNode("到店自提")])),_:1}),((d=e.unref(v.useShopInfoStore)().shopInfo)==null?void 0:d.mode)!=="O2O"?(e.openBlock(),e.createBlock(T,{key:0,value:"VIRTUAL"},{default:e.withCtx(()=>t[23]||(t[23]=[e.createTextVNode("虚拟配送")])),_:1})):e.createCommentVNode("",!0)]}),_:1},8,["modelValue","disabled"])]),_:1}),e.createVNode(m,{label:"主商品(限1种商品)",required:""},{default:e.withCtx(()=>[e.createVNode(B,{disabled:e.unref(p),plain:"",round:"",type:"primary",onClick:t[8]||(t[8]=d=>O("main"))},{default:e.withCtx(()=>t[24]||(t[24]=[e.createTextVNode(" 选择商品 ")])),_:1},8,["disabled"]),t[25]||(t[25]=e.createElementVNode("span",{class:"msg"},"主商品：必买商品，此商品详情页展示搭配套餐 搭配商品：用户选择购买",-1))]),_:1})]),_:1},8,["model","rules"]),e.createVNode(ae,{ref_key:"selectMainGoodsTableRef",ref:k,flatGoodList:e.unref(A),isEdit:e.unref(p),productList:e.unref(E),style:{"margin-bottom":"20px"}},null,8,["flatGoodList","isEdit","productList"]),e.createVNode(m,{label:"搭配商品（限4种）",required:""},{default:e.withCtx(()=>[e.createVNode(B,{disabled:e.unref(p),plain:"",round:"",type:"primary",onClick:t[9]||(t[9]=d=>O("matching"))},{default:e.withCtx(()=>t[26]||(t[26]=[e.createTextVNode(" 选择商品 ")])),_:1},8,["disabled"]),t[27]||(t[27]=e.createElementVNode("span",{class:"msg"},"是否参与：SKU的粒度设置商品是否参与活动，是(默认)则参与活动，反则否",-1))]),_:1}),e.createVNode(ae,{ref_key:"selectMatchingGoodsTableRef",ref:x,flatGoodList:e.unref(o),isEdit:e.unref(p),productList:e.unref(D),productAttributes:"MATCHING_PRODUCTS"},null,8,["flatGoodList","isEdit","productList"]),e.createElementVNode("div",ke,[e.createVNode(B,{plain:"",round:"",onClick:t[10]||(t[10]=d=>e.unref(_).back())},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(p)?"返回":"取消"),1)]),_:1}),e.unref(p)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(ie,{key:0,round:"",type:"primary",onClick:L},{default:e.withCtx(()=>t[28]||(t[28]=[e.createTextVNode("确定")])),_:1}))]),e.createVNode(K,{ref_key:"choosedMainGoodsRef",ref:b,modelValue:e.unref(g),"onUpdate:modelValue":t[11]||(t[11]=d=>e.isRef(g)?g.value=d:null),searchParam:P,"onUpdate:searchParam":t[12]||(t[12]=d=>P=d),pointGoodsList:e.unref(E),searchConsignmentProduct:!0,distributionMode:e.unref(n).distributionMode,quota:1,onOnConfirm:N},null,8,["modelValue","searchParam","pointGoodsList","distributionMode"]),e.createVNode(K,{ref_key:"choosedMatchingGoodsRef",ref:C,modelValue:e.unref(w),"onUpdate:modelValue":t[13]||(t[13]=d=>e.isRef(w)?w.value=d:null),searchParam:G,"onUpdate:searchParam":t[14]||(t[14]=d=>G=d),pointGoodsList:e.unref(D),searchConsignmentProduct:!0,distributionMode:e.unref(n).distributionMode,quota:4,onOnConfirm:r},null,8,["modelValue","searchParam","pointGoodsList","distributionMode"]),e.createVNode(re,{"dialog-visible":J.value,"upload-files":1,onSelectMaterialFn:Te,onCroppedFileChange:Se,onCheckedFileLists:we},null,8,["dialog-visible"])])}}}),Le="";return oe(Ce,[["__scopeId","data-v-b5ad4e8e"]])});
