(function(e,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("vue"),require("@/apis/http"),require("element-plus")):typeof define=="function"&&define.amd?define(["vue","@/apis/http","element-plus"],a):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopDeliveryListSelect=a(e.ShopDeliveryListSelectContext.Vue,e.ShopDeliveryListSelectContext.Request,e.ShopDeliveryListSelectContext.ElementPlus))})(this,function(e,a,c){"use strict";const y=n=>a.get({url:"gruul-mall-shop/shop/logistics/address/list",params:n}),g=n=>a.get({url:"gruul-mall-freight/logistics/express/usable/list",params:n});return e.defineComponent({__name:"ShopDeliveryListSelect",props:{properties:{type:Object,default:()=>{}}},emits:["update:properties"],setup(n,{emit:S}){const s=n,o=e.ref(JSON.parse(JSON.stringify(s.properties.deliverDialogFormData))||{deliverType:"WITHOUT",printId:"",receiver:{name:"",mobile:"",address:""},addressaddress:""});e.watch(()=>s.properties.deliverDialogFormData,l=>{l&&(o.value=JSON.parse(JSON.stringify(l)))},{immediate:!0,deep:!0});const m=e.ref([]),d=e.ref([]);C(),h();async function h(){const{data:l,code:r}=await y({});r!==200?c.ElMessage({message:"请刷新重试...",type:"warning"}):d.value=l.records;const i=d.value.find(p=>p.defSend==="YES");i&&(o.value.addressaddress=i.id,s.properties.loadDeliverDialogFormData(o.value),s.properties.loadDeliveryAddressData(d.value))}async function C(){const{code:l,data:r}=await g({size:1e3,current:1});if(l!==200){c.ElMessage.error("获取物流公司失败");return}r.records.length&&s.properties.loadDeliverDialogFormData(o.value),m.value=r.records,s.properties.loadCompanySelectListData(r.records)}const D=l=>{s.properties.loadexpressCompanyMapData(l)},_=()=>{s.properties.loadDeliverDialogFormData(o.value)};return(l,r)=>{const i=e.resolveComponent("el-option"),p=e.resolveComponent("el-select"),u=e.resolveComponent("el-form-item");return e.openBlock(),e.createElementBlock(e.Fragment,null,[["VIRTUAL","INTRA_CITY_DISTRIBUTION"].includes(o.value.deliveryMethod)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:0,label:"物流服务",prop:"expressCompany.expressCompanyCode","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(p,{modelValue:o.value.expressCompany,"onUpdate:modelValue":r[0]||(r[0]=t=>o.value.expressCompany=t),placeholder:"请选择物流服务",style:{width:"444px"},clearable:"","value-key":"id",onChange:D},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,t=>(e.openBlock(),e.createBlock(i,{key:t.id,label:t.logisticsCompanyName,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),o.value.deliverType==="PRINT_EXPRESS"?(e.openBlock(),e.createBlock(u,{key:1,label:"发货地址",prop:"addressaddress","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(p,{modelValue:o.value.addressaddress,"onUpdate:modelValue":r[1]||(r[1]=t=>o.value.addressaddress=t),placeholder:"请选择发货地址",style:{width:"444px"},onChange:_},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,t=>{var f;return e.openBlock(),e.createBlock(i,{key:t.id,value:t.id,label:`${t.contactName} ${t.contactPhone} ${(f=t.area)==null?void 0:f.join(" ")} ${t.address}`},null,8,["value","label"])}),128))]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0)],64)}}})});
