(function(e,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue"),require("@/apis/http"),require("vue-router"),require("element-plus")):typeof define=="function"&&define.amd?define(["vue","@/apis/http","vue-router","element-plus"],l):(e=typeof globalThis<"u"?globalThis:e||self,e.PcCouponGoodDetails=l(e.PcCouponGoodDetailsContext.Vue,e.PcCouponGoodDetailsContext.Request,e.PcCouponGoodDetailsContext.VueRouter,e.PcCouponGoodDetailsContext.ElementPlus))})(this,function(e,l,b,h){"use strict";var y=document.createElement("style");y.textContent=`@charset "UTF-8";*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.absolute{position:absolute}.relative{position:relative}.flex{display:flex}.transform{transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.b,.border{border-width:1px}.disabled,[disabled=\"\"]{opacity:.5;cursor:not-allowed}.yhq[data-v-fff015e6]{width:100%;display:flex;margin-top:15px;font-size:12px}.yhq .yhq-list[data-v-fff015e6]{width:550px;display:flex;color:#333;align-items:center;justify-content:space-between;position:relative}.yhq .yhq-list .yhq-box[data-v-fff015e6]{max-height:270px;overflow-y:auto;width:450px}.yhq .yhq-list .yhq-box .yhq-item[data-v-fff015e6]{margin-bottom:12px;line-height:25px;font-style:normal;margin-right:8px;display:flex;align-items:center;position:relative}.yhq .yhq-list .yhq-box .yhq-item .tag[data-v-fff015e6]{background-color:#e93323;color:#fff;padding:0 10px;position:relative;line-height:27px}.yhq .yhq-list .yhq-box .yhq-item .tag[data-v-fff015e6]:before{content:"";position:absolute;left:-6.5px;top:50%;transform:translateY(-50%);width:10px;height:10px;background:#f2f2f2;border-radius:50%}.yhq .yhq-list .yhq-box .yhq-item .amount[data-v-fff015e6]{text-align:center;max-width:230px;border:1px solid #e31436;position:relative;box-sizing:border-box;padding:0 20px;background-color:#fff}.yhq .yhq-list .yhq-box .yhq-item .amount[data-v-fff015e6]:after{content:"";position:absolute;right:-6.5px;top:50%;transform:translateY(-50%);width:10px;height:10px;background:#f2f2f2;border-radius:50%;border-left:1px solid #e93323;border-right:none}.yhq .yhq-list .yhq-box .yhq-item .validity[data-v-fff015e6]{color:#666;margin-left:15px}.yhq .yhq-list .yhq-box .yhq-item .receive[data-v-fff015e6]{color:#e93323;cursor:pointer;position:absolute;right:0}.yhq .yhq-list .expand-button[data-v-fff015e6]{color:#666;cursor:pointer;position:absolute;top:38px;right:0}.yhq .yhq-list .expand-button[data-v-fff015e6]:hover{color:#e31436}.yhq .yhq-list .expand-button i[data-v-fff015e6]{margin-left:5px}
`,document.head.appendChild(y);const z="",g=(c,s)=>l.post({url:`addon-coupon/coupon/consumer/collect/shop/${c}/${s}`}),_={class:"yhq"},m={key:0,style:{"margin-right":"23px"}},k={class:"yhq-list"},C={class:"yhq-box"},v={class:"tag"},q={class:"amount"},E={class:"validity"},w=["onClick"],D=e.defineComponent({__name:"PcCouponGoodDetails",props:{properties:{default:{couponList:[],cartCoupon:!0}}},setup(c){b.useRoute();const s=c;e.reactive({size:100,current:1});const p=[{type:"PRICE_DISCOUNT",value:"无门槛折扣券"},{type:"PRICE_REDUCE",value:"无门槛现金券"},{type:"REQUIRED_PRICE_DISCOUNT",value:"满折券"},{type:"REQUIRED_PRICE_REDUCE",value:"满减券"}],u=e.ref([{value:"",discount:""}]),f=async()=>{if(!s.properties)return;const t=s.properties.couponList;for(let o=0;o<t.length;o++){const n=t[o];for(let r=0;r<p.length;r++){const a=p[r];if(n.type===a.type){if(a.type==="PRICE_REDUCE"){const i={value:"",discount:""};i.discount=a.value+" "+n.amount/1e4+"元",u.value.push(i)}else if(a.type==="PRICE_DISCOUNT"){const i={value:"",discount:""};i.discount=a.value+" "+n.discount+"折",u.value.push(i)}else if(a.type==="REQUIRED_PRICE_DISCOUNT"){const i={value:"",discount:""};i.discount="满"+Number(n.requiredAmount)/1e4+"元打"+n.discount+"折",u.value.push(i)}else if(a.type==="REQUIRED_PRICE_REDUCE"){const i={value:"",discount:""};i.discount="满"+Number(n.requiredAmount)/1e4+"减"+Number(n.amount||n.discountAmount)/1e4+"元",u.value.push(i)}}}}};function I(t){return t.effectType==="IMMEDIATELY"&&t.days?t.days<=1?"领券当天内可用":`领券当日起${t.days}天内可用`:`${x(t.startDate)}-${x(t.endDate)}`}function x(t){return t?t.replace(/[-]/g,"."):""}e.watch(()=>{var t;return(t=s.properties)==null?void 0:t.couponList},f,{deep:!0,immediate:!0});const R=e.computed(()=>u.value.every(t=>!t.discount)),L=async t=>{const{code:o,msg:n}=await g(t.shopId,t.id);o!==200?(t.receiveFinish=!0,h.ElMessage(n||"领取失败")):h.ElMessage({message:"领取成功",type:"success"})},d=e.ref(!1),P=e.computed(()=>{var n;if(!((n=s.properties)!=null&&n.couponList))return[];const o=[...s.properties.couponList||[]].sort((r,a)=>r.couponUserId&&!a.couponUserId?1:!r.couponUserId&&a.couponUserId?-1:0);return d.value?o:o.slice(0,3)}),U=e.computed(()=>{var t,o;return((o=(t=s.properties)==null?void 0:t.couponList)==null?void 0:o.length)>3});return(t,o)=>{const n=e.resolveComponent("el-button");return e.withDirectives((e.openBlock(),e.createElementBlock("div",_,[s.properties.cartCoupon?(e.openBlock(),e.createElementBlock("div",m,"优 惠 券")):e.createCommentVNode("",!0),e.createElementVNode("div",k,[e.createElementVNode("div",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.properties.cartCoupon?P.value:s.properties.couponList,(r,a)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"yhq-item"},[e.createElementVNode("div",v,e.toDisplayString(r.type==="PRICE_REDUCE"||r.type==="REQUIRED_PRICE_REDUCE"?"现金券":"折扣券"),1),e.createElementVNode("div",q,e.toDisplayString(u.value[a+1].discount),1),e.createElementVNode("div",E,e.toDisplayString(I(r)),1),(r.couponUserId||r.cheeck)&&s.properties.cartCoupon?(e.openBlock(),e.createBlock(n,{key:0,link:"",disabled:"",class:"receive",style:{color:"#666",cursor:"not-allowed"},size:"small"},{default:e.withCtx(()=>o[1]||(o[1]=[e.createTextVNode("已领取")])),_:1})):r.receiveFinish?(e.openBlock(),e.createBlock(n,{key:1,link:"",disabled:"",class:"receive",style:{color:"#666",cursor:"not-allowed"},size:"small"},{default:e.withCtx(()=>o[2]||(o[2]=[e.createTextVNode("已领取")])),_:1})):(e.openBlock(),e.createElementBlock("div",{key:2,class:"receive",style:{"border-bottom":"1px solid #e31436","line-height":"18px"},onClick:()=>{L(r),r.cheeck=!0}}," 领取 ",8,w))]))),128))]),U.value&&s.properties.cartCoupon?(e.openBlock(),e.createElementBlock("div",{key:0,class:"expand-button",onClick:o[0]||(o[0]=r=>d.value=!d.value)},[e.createTextVNode(e.toDisplayString(d.value?"收起":"更多优惠")+" ",1),e.createVNode(n,{type:"text",icon:d.value?"el-icon-arrow-up":"el-icon-arrow-down"},null,8,["icon"])])):e.createCommentVNode("",!0)])],512)),[[e.vShow,!R.value]])}}}),N="";return((c,s)=>{const p=c.__vccOpts||c;for(const[u,f]of s)p[u]=f;return p})(D,[["__scopeId","data-v-fff015e6"]])});
