(function(e,J){typeof exports=="object"&&typeof module<"u"?module.exports=J(require("vue"),require("@/components/chrome-tab/index.vue"),require("@/components/PageManage.vue"),require("decimal.js"),require("element-plus"),require("@/composables/useConvert"),require("@/components/schema-form/index.vue"),require("vue-clipboard3"),require("vue-router"),require("@/utils/date"),require("@element-plus/icons-vue"),require("@/components/qszr-core/packages/q-table/QTable"),require("@/components/qszr-core/packages/q-table/q-table-column.vue"),require("@/components/q-icon/q-icon.vue"),require("@/apis/http"),require("@/components/q-editor/q-edit.vue")):typeof define=="function"&&define.amd?define(["vue","@/components/chrome-tab/index.vue","@/components/PageManage.vue","decimal.js","element-plus","@/composables/useConvert","@/components/schema-form/index.vue","vue-clipboard3","vue-router","@/utils/date","@element-plus/icons-vue","@/components/qszr-core/packages/q-table/QTable","@/components/qszr-core/packages/q-table/q-table-column.vue","@/components/q-icon/q-icon.vue","@/apis/http","@/components/q-editor/q-edit.vue"],J):(e=typeof globalThis<"u"?globalThis:e||self,e.PlatformDistribute=J(e.PlatformDistributeContext.Vue,e.PlatformDistributeContext.ChromeTab,e.PlatformDistributeContext.PageManageTwo,e.PlatformDistributeContext.Decimal,e.PlatformDistributeContext.ElementPlus,e.PlatformDistributeContext.UseConvert,e.PlatformDistributeContext.SchemaForm,e.PlatformDistributeContext.VueClipboard3,e.PlatformDistributeContext.VueRouter,e.PlatformDistributeContext.DateUtil,e.PlatformDistributeContext.ElementPlusIconsVue,e.PlatformDistributeContext.QTable,e.PlatformDistributeContext.QTableColumn,e.PlatformDistributeContext.QIcon,e.PlatformDistributeContext.Request,e.PlatformDistributeContext.QEditor))})(this,function(e,J,v,$,w,W,ne,he,ge,be,xe,ue,z,le,L,de){"use strict";var se=document.createElement("style");se.textContent=`@charset "UTF-8";[data-v-cd84aba0]{font-size:14px}.input-with-select .el-input-group__prepend[data-v-cd84aba0]{background-color:var(--el-fill-color-blank)}.ellipsis[data-v-cd84aba0]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dis__header[data-v-cd84aba0]{margin-bottom:16px;padding-left:16px}.com[data-v-cd84aba0]{width:270px;font-size:12px;color:#515151;display:flex}.com__img[data-v-cd84aba0]{display:inline-block;width:68px;height:68px;margin-right:12px}.com__right[data-v-cd84aba0]{height:68px;display:flex;flex-direction:column;justify-content:space-between;text-align:left}.com__right--name[data-v-cd84aba0]{width:174px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;line-height:1.2em}.colorRed[data-v-cd84aba0]{color:#f54319}.dialogCom[data-v-cd84aba0]{display:flex;justify-content:center;align-items:center}.dialogCom__img[data-v-cd84aba0]{width:60px;height:60px;margin-right:12px;border-radius:10px}.dialogCom__right--name[data-v-cd84aba0]{width:210px;font-size:14px;color:#333;line-height:20px}.amount[data-v-cd84aba0]:before{content:"￥";display:inline-block}.percentage[data-v-cd84aba0]:after{content:"%";display:inline-block}.head[data-v-edd24644]{width:1256px;display:flex;align-items:center;background-color:#e9ecf0;height:52px;padding-left:16px;color:#333}.head div[data-v-edd24644]:after{content:"|";padding:0 8px;position:relative;top:-1px;color:#333!important}.head .last[data-v-edd24644]:after{content:""}.content[data-v-edd24644]{display:flex}.content__right1[data-v-edd24644]{border:1px solid #ebeef5;display:flex;align-items:center;justify-content:space-around;line-height:26px;width:470px;padding-left:10px;flex-shrink:0}.content__right1--item[data-v-edd24644]{display:flex;flex-direction:column}.content__right1--item span[data-v-edd24644]{line-height:18px}.content__right2[data-v-edd24644]{flex-shrink:0;width:157px;font-size:13px;text-align:center;line-height:26px}.content__right2--item[data-v-edd24644]{height:100px;line-height:100px;border:1px solid #ebeef5}.content__right3[data-v-edd24644]{width:196px;flex-shrink:0;font-size:13px;border:1px solid #ebeef5;display:flex;flex-wrap:wrap;justify-content:center;flex-direction:column;padding-left:5px;line-height:26px}.content__right3--item[data-v-edd24644]{padding:0 10px}.goods[data-v-edd24644]{width:410px;height:68px;display:flex}.goods__pic[data-v-edd24644]{margin-right:10px;width:60px;height:50px;position:relative}.goods__pic--state[data-v-edd24644]{background:#7f83f7;position:absolute;width:40px;height:40px;border-radius:50%;top:5px;left:10px;color:#fff;line-height:40px;text-align:center;font-size:10px}.goods__info[data-v-edd24644]{display:flex;flex-direction:column;justify-content:space-between;margin-left:10px}.goods__info-flex[data-v-edd24644]{width:310px;display:flex;align-items:center;justify-content:space-between}.goods__info-flex--name[data-v-edd24644]{max-width:220px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;margin-right:10px}.goods__info-flex--price[data-v-edd24644]{font-size:12px}.goods__info-flex--specs[data-v-edd24644]{color:#999;max-width:210px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.goods__info-flex--num[data-v-edd24644]{position:relative;top:7px;font-size:12px}[data-v-edd24644] .el-table thead{display:none}.amount[data-v-edd24644]:before{content:"￥";display:inline-block}.percentage[data-v-edd24644]:after{content:"%";display:inline-block}.ellipsis[data-v-edd24644]{max-width:125px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.buyer[data-v-edd24644]{max-width:100px;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.buyer-container[data-v-edd24644]{display:flex;justify-content:flex-start;align-items:center}.name[data-v-edd24644]{width:109px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#555cfd;cursor:pointer}.distribution_order_table_container[data-v-3bdd85a6]{overflow:auto;position:relative;border-left:16px solid transparent;border-right:16px solid transparent}.distribution_order_table_container .tbhead[data-v-3bdd85a6]{background-color:#f2f2f2;position:sticky;top:0;z-index:100}.count[data-v-3bdd85a6]{height:48px;line-height:48px;padding-left:16px;background-color:#555cfd0d}.count span[data-v-3bdd85a6]{margin-right:30px}.tbhead[data-v-3bdd85a6]{width:1256px;display:flex;align-items:center;height:48px;font-weight:700;background-color:#f2f2f280}.tbhead__goods[data-v-3bdd85a6]{margin-left:16%}.tbhead__state[data-v-3bdd85a6]{margin-left:23%}.tbhead__detail[data-v-3bdd85a6]{margin-left:29%}.tbhead__total[data-v-3bdd85a6]{margin-left:8%}.ml[data-v-3bdd85a6]{margin-left:30px}[data-v-233cefdb]{font-size:14px}.tool[data-v-233cefdb]{width:100%;height:56px;background:#fff}.tool__btn--drop[data-v-233cefdb]{width:120px}.tool__input[data-v-233cefdb]{width:250px;font-size:14px;position:absolute;right:0;top:50%;margin-top:-24px}.q-table[data-v-233cefdb]{width:100%;overflow:auto}.color51[data-v-233cefdb]{color:#515151;height:52px;display:flex;flex-direction:column;justify-content:space-around}.color58[data-v-233cefdb]{color:#586884}.color33[data-v-233cefdb]{color:#333}.column[data-v-233cefdb]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.column button[data-v-233cefdb]{margin:0}.ellipsis[data-v-233cefdb]{width:135px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px}.ml[data-v-233cefdb]{margin-left:30px}.col[data-v-1768cef0]{margin:16px 16px 0 0;background:#f6f8fa;height:50px;display:flex;justify-content:flex-start;align-items:center;font-size:13px;color:#515151}.col__icon[data-v-1768cef0]{width:4px;height:16px;margin:0 17px 0 19px}[data-v-1768cef0] .el-form-item__label{margin-right:20px;color:#666}.save[data-v-1768cef0]{width:100%;margin-top:auto;display:flex;justify-content:center;align-items:center;height:52px;background-color:#fff;box-shadow:0 0 16px #00000012;position:sticky;bottom:0}.mb33[data-v-1768cef0]{margin-bottom:33px}.mb26[data-v-1768cef0]{margin-bottom:26px}.tip[data-v-1768cef0]{font-size:13px;color:#d5d5d5}
`,document.head.appendChild(se);const Ne=e.defineComponent({__name:"PlatformDistribute",setup(l){const c={distributionCom:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Ke)),distributionOrder:e.defineAsyncComponent(()=>Promise.resolve().then(()=>zt)),wholeSaler:e.defineAsyncComponent(()=>Promise.resolve().then(()=>to)),distributionSet:e.defineAsyncComponent(()=>Promise.resolve().then(()=>io))},i=e.ref("distributionCom"),n=[{label:"分销商品",name:"distributionCom"},{label:"分销订单",name:"distributionOrder"},{label:"分销商",name:"wholeSaler"},{label:"分销设置",name:"distributionSet"}],m=e.computed(()=>c[i.value]),r=f=>{f&&(i.value=f)};return(f,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(J,{"tab-list":n,value:i.value,onHandleTabs:r},null,8,["value"]),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(m.value),{ref:"componentRef"},null,512))],64))}}),_e=l=>L.put({url:"addon-distribute/distribute/config",data:l}),ye=l=>L.post({url:"addon-distribute/distribute/product/page",data:l}),ce=()=>L.get({url:"addon-distribute/distribute/config"}),Ve=l=>L.get({url:"addon-distribute/distribute/order",params:l}),Ce=l=>L.get({url:"addon-distribute/distribute/distributor",params:l}),we=l=>L.get({url:"addon-distribute/distribute/distributor/team",params:l}),Ee=l=>L.get({url:"addon-distribute/distribute/distributor/rank",params:l}),pe=l=>L.put({url:`addon-distribute/distribute/product/cancel/${l}`}),fe=(l,c,i)=>L.post({url:"addon-distribute/distribute/distributor/distributor/apply",data:{pass:l,ids:c,rejectReason:i}}),ke=l=>L.get({url:`addon-distribute/distribute/distributor/rejectReason/${l}`}),{divTenThousand:X,divHundred:ae}=W();function Te(l,c,i,n,m){let r=c==null?void 0:c[0],f=c==null?void 0:c[c.length-1];if(l==="FIXED_AMOUNT"){i=+X(i),n=+X(n),m=+X(m);const a=(i+n+m).toFixed(2);return i+" + "+n+" +"+m+" = "+a}else if(r=+X(r),f=+X(f),i=+ae(X(i)),n=+ae(X(n)),m=+ae(X(m)),m)if(n){const a=(f*i+f*n+f*m).toFixed(2),s=(r*i+r*n+r*m).toFixed(2);return r===f?`${r} * ${i} + ${r} * ${n} + ${r} * ${m} = ${s}`:`
                ${r} * ${i} + ${r} * ${n} + ${r} * ${m} = ${s}
                <br />
                ${f} * ${i} + ${f} * ${n} + ${f} * ${m} = ${a}            
            `}else{const a=(f*i).toFixed(2),s=(r*i).toFixed(2);return r===f?r+" * "+i+"   = "+s:`${r} * ${i} = ${s} </br> ${f} * ${i} = ${a}`}else{const a=(f*i+f*n).toFixed(2),s=(r*i+r*n).toFixed(2);return r===f?`${r} * ${i} + ${r} * ${n} = ${s}`:`${r} * ${i} + ${r} * ${n} = ${s} <br /> ${f} * ${i} + ${f} * ${n} = ${a}`}}const Se={key:0,class:"handle_container"},De={class:"table_container"},Ie={class:"ellipsis f12"},Be={key:1,class:"ellipsis f12"},$e={class:"com"},Oe={class:"com__right"},Me={class:"com__right--name"},Pe={key:1,class:"com__right--name"},Ae={key:2},Fe={key:3},Ue={class:"f12"},ze={class:"f12"},Re={class:"f12"},qe={class:"f12 color51"},Le={key:0,class:"f12 color51"},je={key:1,class:"f12 color51"},He={style:{display:"flex"}},Xe={key:0,class:"f12 colorRed"},We={key:0},Ye={key:1,class:"f12 colorRed"},Ge={class:"f12"},Je=e.defineComponent({__name:"DistributionComP",setup(l){e.ref(!1);const c=e.ref("ONE"),i=e.ref({}),{divTenThousand:n,divHundred:m}=W(),r=e.reactive({current:1,size:10,total:0,list:[],distributionStatus:"ALL",productName:"",shopName:""});e.ref("");const f=e.ref([]),a=[{label:"店铺名称",labelWidth:75,prop:"shopName",valueType:"copy",fieldProps:{placeholder:"请输入店铺名称",maxlength:20}},{label:"商品名称",prop:"productName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称",maxlength:30}}];R(),I();const s=t=>{r.current=t,I()},_=t=>{r.current=1,r.size=t,I()},B=t=>{t&&Object.keys(t).forEach(o=>r[o]=t[o])},E=()=>{r.current=1,I()},x=()=>{r.current=1,r.productName="",r.shopName="",I()},N=async t=>{w.ElMessageBox.confirm("确定取消分销当前商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{code:o,success:y}=await pe([t.id]);o===200&&y?(w.ElMessage.success("取消分销成功"),I()):w.ElMessage.error("取消分销失败")})},D=t=>{f.value=t},O=()=>{if(!f.value.length){w.ElMessage.warning("请选择商品");return}w.ElMessageBox.confirm("确定需要取消分销商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const t=f.value.map(d=>d.id),{code:o,success:y}=await pe(t);o===200&&y?(w.ElMessage.success("取消分销成功"),I()):w.ElMessage.error("取消分销失败")})};async function I(){const{code:t,data:o}=await ye({current:r.current,size:r.size,productName:r.productName,shopName:r.shopName,distributionStatus:r.distributionStatus==="ALL"?null:r.distributionStatus});t===200&&o?(r.list=o.records.map(y=>({...y,originSalePrices:[...y.salePrices]})),r.total=o.total,console.log("distributeInfo.list",r.list)):w.ElMessage.error("获取分销商品失败")}function j(t){return t==="SELL_ON"?"上架":t==="SELL_OFF"?"下架":"违规禁用"}const M=()=>{r.current=1,I()};function P(t,o){return t==="UNIFIED"&&i.value.shareType==="RATE",n(o)}async function R(){const{code:t,data:o}=await ce();t===200?(c.value=o.level,(o.one||o.two||o.three)&&(o.one=o.shareType==="FIXED_AMOUNT"?String(n(o.one)):String(m(o.one)),o.two=o.shareType==="FIXED_AMOUNT"?String(n(o.two)):String(m(o.two)),o.three=o.shareType==="FIXED_AMOUNT"?String(n(o.three)):String(m(o.three)),i.value=o)):w.ElMessage.error("获取分销配置失败")}const b=(t,o)=>o.shareType!=="UNIFIED"?o.shareType==="RATE"?c.value==="ONE"?t.mul(m(n(o.one))).toFixed(2):c.value==="TWO"?t.mul(m(n(o.one))).add(t.mul(m(n(o.two)))).toFixed(2):t.mul(m(n(o.one))).add(t.mul(m(n(o.two)))).add(t.mul(m(n(o.three)))).toFixed(2):c.value==="ONE"?n(o.one).toFixed(2):c.value==="TWO"?n(o.one).add(n(o.two)).toFixed(2):n(o.one).add(n(o.two)).add(n(o.three)).toFixed(2):i.value.shareType==="RATE"?c.value==="ONE"?t.mul(m(i.value.one)).toFixed(2):c.value==="TWO"?t.mul(m(i.value.one)).add(t.mul(m(i.value.two))).toFixed(2):t.mul(m(i.value.one)).add(t.mul(m(i.value.two))).add(t.mul(m(i.value.three))).toFixed(2):c.value==="ONE"?new $(i.value.one).toFixed(2):c.value==="TWO"?new $(i.value.one).add(i.value.two).toFixed(2):new $(i.value.one).add(i.value.two).add(i.value.three).toFixed(2);return(t,o)=>{const y=e.resolveComponent("el-tab-pane"),d=e.resolveComponent("el-tabs"),k=e.resolveComponent("el-button"),C=e.resolveComponent("el-table-column"),T=e.resolveComponent("el-tooltip"),A=e.resolveComponent("el-image"),Z=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ne,{"v-model":r,columns:a,onChangeFormItem:B,onSearchHandle:E,onHandleReset:x},null,8,["v-model"]),e.createVNode(d,{modelValue:r.distributionStatus,"onUpdate:modelValue":o[0]||(o[0]=p=>r.distributionStatus=p),class:"demo-tabs tab_container",onTabChange:M},{default:e.withCtx(()=>[e.createVNode(y,{label:"全部",name:"ALL"}),e.createVNode(y,{label:"分销中",name:"IN_DISTRIBUTION"}),e.createVNode(y,{label:"取消分销",name:"CANCEL_DISTRIBUTION"})]),_:1},8,["modelValue"]),r.distributionStatus!=="CANCEL_DISTRIBUTION"?(e.openBlock(),e.createElementBlock("div",Se,[e.createVNode(k,{round:"",disabled:f.value.length===0,onClick:O},{default:e.withCtx(()=>o[1]||(o[1]=[e.createTextVNode("取消分销")])),_:1},8,["disabled"])])):e.createCommentVNode("",!0),e.createElementVNode("div",De,[e.createVNode(Z,{data:r.list,"header-cell-style":{background:"#F7F8FA",height:"48px",color:"#333"},"cell-style":{height:"100px"},onSelectionChange:D},{default:e.withCtx(()=>[r.distributionStatus!=="CANCEL_DISTRIBUTION"?(e.openBlock(),e.createBlock(C,{key:0,type:"selection",width:"50"})):e.createCommentVNode("",!0),e.createVNode(C,{width:"140",label:"店铺信息",align:"left"},{default:e.withCtx(({row:p})=>[p.shopName.length>=14?(e.openBlock(),e.createBlock(T,{key:0,class:"box-item",effect:"dark",content:p.shopName,placement:"top"},{default:e.withCtx(()=>[e.createElementVNode("div",Ie,e.toDisplayString(p.shopName),1)]),_:2},1032,["content"])):(e.openBlock(),e.createElementBlock("div",Be,e.toDisplayString(p.shopName),1))]),_:1}),e.createVNode(C,{label:"商品信息",width:"290",align:"left"},{default:e.withCtx(({row:p})=>[e.createElementVNode("div",$e,[e.createVNode(A,{class:"com__img",src:p.pic},null,8,["src"]),e.createElementVNode("div",Oe,[p.name.length>=30?(e.openBlock(),e.createBlock(T,{key:0,class:"box-item",effect:"dark",content:p.name,placement:"top"},{default:e.withCtx(()=>[e.createElementVNode("div",Me,e.toDisplayString(p.name),1)]),_:2},1032,["content"])):(e.openBlock(),e.createElementBlock("div",Pe,e.toDisplayString(p.name),1)),p.originSalePrices.length>1?(e.openBlock(),e.createElementBlock("div",Ae," ￥"+e.toDisplayString(e.unref(n)(p.originSalePrices[0]))+" ~ ￥"+e.toDisplayString(e.unref(n)(p.originSalePrices[p.originSalePrices.length-1])),1)):(e.openBlock(),e.createElementBlock("div",Fe,"￥"+e.toDisplayString(e.unref(n)(p.originSalePrices[0])),1))])])]),_:1}),e.createVNode(C,{label:"总库存",width:"100",align:"left"},{default:e.withCtx(({row:p})=>[e.createElementVNode("div",Ue,e.toDisplayString(p.stock),1)]),_:1}),e.createVNode(C,{label:"状态",width:"100",align:"left"},{default:e.withCtx(({row:p})=>[e.createElementVNode("div",ze,e.toDisplayString(j(p.status)),1)]),_:1}),e.createVNode(C,{label:"分销状态",width:"110",align:"left"},{default:e.withCtx(({row:p})=>[e.createElementVNode("div",Re,e.toDisplayString(p.distributionStatus==="IN_DISTRIBUTION"?"分销中":"取消分销"),1)]),_:1}),e.createVNode(C,{label:"分佣参数",width:"110",align:"left"},{default:e.withCtx(({row:p})=>[e.createElementVNode("div",qe,[o[2]||(o[2]=e.createTextVNode(" 一级:")),e.createElementVNode("span",{class:e.normalizeClass([p.shareType==="UNIFIED"?i.value.shareType==="FIXED_AMOUNT"?"amount":"percentage":p.shareType==="FIXED_AMOUNT"?"amount":"percentage"])},e.toDisplayString(P(p.shareType,p.one)),3)]),c.value!=="ONE"&&p.two?(e.openBlock(),e.createElementBlock("div",Le,[o[3]||(o[3]=e.createTextVNode(" 二级:")),e.createElementVNode("span",{class:e.normalizeClass([p.shareType==="UNIFIED"?i.value.shareType==="FIXED_AMOUNT"?"amount":"percentage":p.shareType==="FIXED_AMOUNT"?"amount":"percentage"])},e.toDisplayString(P(p.shareType,p.two)),3)])):e.createCommentVNode("",!0),c.value==="THREE"&&p.three?(e.openBlock(),e.createElementBlock("div",je,[o[4]||(o[4]=e.createTextVNode(" 三级:")),e.createElementVNode("span",{class:e.normalizeClass([p.shareType==="UNIFIED"?i.value.shareType==="FIXED_AMOUNT"?"amount":"percentage":p.shareType==="FIXED_AMOUNT"?"amount":"percentage"])},e.toDisplayString(P(p.shareType,p.three)),3)])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(C,{label:"",width:"160",align:"left"},{header:e.withCtx(()=>o[5]||(o[5]=[e.createElementVNode("label",null,"分销佣金(预计) ",-1)])),default:e.withCtx(p=>{var U,G,F,V,ee;return[e.createElementVNode("div",He,[p.row.salePrices.length>1?(e.openBlock(),e.createElementBlock("div",Xe,[p.row.salePrices[0]===((U=p.row.salePrices)==null?void 0:U.pop())?(e.openBlock(),e.createElementBlock("span",We,"￥"+e.toDisplayString(b(e.unref(n)(p.row.salePrices[0]),p.row)),1)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("span",null,"￥"+e.toDisplayString(b(e.unref(n)(p.row.salePrices[0]),p.row)),1),o[6]||(o[6]=e.createTextVNode(" ~ ")),e.createElementVNode("span",null,"￥"+e.toDisplayString(b(e.unref(n)((G=p.row.salePrices)==null?void 0:G.pop()),p.row)),1)],64))])):(e.openBlock(),e.createElementBlock("div",Ye,"￥"+e.toDisplayString(b(e.unref(n)(p.row.salePrices[0]),p.row)),1)),e.createVNode(T,{"raw-content":!0,content:e.unref(Te)(p.row.shareType,p.row.salePrices,(F=p.row)==null?void 0:F.one,(V=p.row)==null?void 0:V.two,(ee=p.row)==null?void 0:ee.three),placement:"bottom",effect:"light"},{default:e.withCtx(()=>o[7]||(o[7]=[e.createElementVNode("i",{class:"iconfont icon-wenhao",style:{color:"#4d4d4d52","margin-left":"5px"}},null,-1)])),_:2},1032,["content"])])]}),_:1}),e.createVNode(C,{label:"",width:r.distributionStatus!=="CANCEL_DISTRIBUTION"?160:"",align:"left"},{header:e.withCtx(()=>o[8]||(o[8]=[e.createElementVNode("label",null,"加入分销时间 ",-1)])),default:e.withCtx(({row:p})=>[e.createElementVNode("div",Ge,e.toDisplayString(p.createTime),1)]),_:1},8,["width"]),r.distributionStatus!=="CANCEL_DISTRIBUTION"?(e.openBlock(),e.createBlock(C,{key:1,fixed:"right",label:"操作",width:"110",align:"right"},{default:e.withCtx(({row:p})=>[p.distributionStatus==="IN_DISTRIBUTION"?(e.openBlock(),e.createBlock(k,{key:0,type:"danger",link:"",onClick:U=>N(p)},{default:e.withCtx(()=>o[9]||(o[9]=[e.createTextVNode("取消分销")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0)]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["data"])]),e.createVNode(v,{style:{border:"0"},"page-num":r.current,"page-size":r.size,total:r.total,onHandleCurrentChange:s,onHandleSizeChange:_},null,8,["page-num","page-size","total"])],64)}}}),ho="",K=(l,c)=>{const i=l.__vccOpts||l;for(const[n,m]of c)i[n]=m;return i},Ke=Object.freeze(Object.defineProperty({__proto__:null,default:K(Je,[["__scopeId","data-v-cd84aba0"]])},Symbol.toStringTag,{value:"Module"})),{divTenThousand:q}=W();function re(l,c){return q(c)}const Ze=()=>({useSingleCalculationFormula:(i,n,m)=>{var a,s;const r=(a=i==null?void 0:i.bonusShare)==null?void 0:a.shareType,f=(s=i==null?void 0:i.bonusShare)==null?void 0:s[n];return r==="RATE"?`${q(i==null?void 0:i.dealPrice)} * ${i==null?void 0:i.num} * ${re(r,f)}% = ${m}`:r==="FIXED_AMOUNT"?`${i==null?void 0:i.num} * ${re(r,f)} = ${m}`:re(r,f)},useTotalPrice:i=>{let n=[],m=[],r=[],f=[];return i.items.forEach(s=>{var B,E,x,N,D,O;let _=[];s.orderStatus==="PAID"?_=r:s.orderStatus==="COMPLETED"?_=n:s.orderStatus==="CLOSED"&&(_=m),s.one.bonus&&(f.push((B=s==null?void 0:s.one)!=null&&B.userId?q(s.one.bonus):new $(0)),_.push((E=s==null?void 0:s.one)!=null&&E.userId?q(s.one.bonus):new $(0))),s.two.bonus&&(f.push((x=s==null?void 0:s.two)!=null&&x.userId?q(s.two.bonus):new $(0)),_.push((N=s==null?void 0:s.two)!=null&&N.userId?q(s.two.bonus):new $(0))),s.three.bonus&&(f.push((D=s==null?void 0:s.two)!=null&&D.userId?q(s.three.bonus):new $(0)),_.push((O=s==null?void 0:s.two)!=null&&O.userId?q(s.three.bonus):new $(0))),s.purchase&&s.one.userId&&(f.push(q(s.one.bonus)),_.push(q(s.one.bonus)))}),{completePrice:n.join(" + ")+" = "+n.reduce((s,_)=>s.plus(_),new $(0)),closedPrice:m.join(" + ")+" = "+m.reduce((s,_)=>s.plus(_),new $(0)),toSelledPrice:r.join(" + ")+" = "+r.reduce((s,_)=>s.plus(_),new $(0)),totalPrice:f.join(" + ")+" = "+f.reduce((s,_)=>s.plus(_),new $(0))}}}),Qe={style:{"margin-top":"10px",width:"100%"}},ve={class:"head"},et={class:"buyer-container"},tt={class:"buyer"},ot={style:{color:"#f00"}},nt={key:0,style:{color:"#f54319","margin-left":"5px"}},lt={key:0},at={key:1},rt={style:{color:"#f54319"}},it={class:"ellipsis last"},dt={class:"content"},st={class:"goods"},ct={class:"goods__pic"},pt=["src"],ft={class:"goods__info"},mt={class:"goods__info-flex"},ht={class:"goods__info-flex--name",style:{"line-height":"16px"}},gt={key:1,class:"goods__info-flex--name",style:{"line-height":"16px"}},bt={class:"goods__info-flex--num"},xt={class:"goods__info-flex"},ut={class:"goods__info-flex--specs"},Nt={key:1,class:"goods__info-flex--specs"},_t={class:"goods__info-flex--price"},yt={class:"content__right1"},Vt={class:"content__right1--item"},Ct={style:{color:"#f54319"},class:"cup"},wt={class:"content__right1--item"},Et={style:{color:"#f54319"}},kt={class:"content__right1--item"},Tt={style:{color:"#f54319"}},St={class:"content__right2"},Dt={class:"content__right3"},It={key:0,class:"content__right3--item"},Bt={key:1,class:"content__right3--item"},$t={key:2,class:"content__right3--item"},Ot={class:"content__right3--item"},Mt=e.defineComponent({__name:"DistributionOrderTableP",props:{orderInfo:{type:Object,default(){return{id:null,type:null,name:"",url:"",append:""}}},toolsDisabled:{type:Boolean,default:!1}},setup(l){const{useSingleCalculationFormula:c,useTotalPrice:i}=Ze();he();const{divTenThousand:n}=W(),m=ge.useRouter(),r=l;function f(E,x){let N=new $(0);return"items"in r.orderInfo&&r.orderInfo.items.length&&r.orderInfo.items.forEach(D=>{(x||D[E].userId)&&(N=N.add(n(D[E].bonus||0)))}),N}function a(E){let x=new $(0);return"items"in r.orderInfo&&r.orderInfo.items.length&&r.orderInfo.items.forEach(N=>{E&&N.orderStatus!==E||(N.one.bonus&&(x=x.add(n(N.one.bonus))),N.two.bonus&&(x=x.add(n(N.two.bonus))),N.three.bonus&&(x=x.add(n(N.three.bonus))),N.purchase&&N.one.userId&&(x=x.add(n(N.one.bonus))))}),x.toNumber()}function s(E){return E==="COMPLETED"?"已赚":E==="CLOSED"?"已失效":"待结算"}const _=E=>{m.push({path:"/order/details",query:{orderNo:E.orderNo,shopId:E.shopId}})},B=E=>{m.push({name:"vipDetailsIndex",query:{userId:E}})};return(E,x)=>{var I,j,M,P,R,b,t,o,y;const N=e.resolveComponent("el-tooltip"),D=e.resolveComponent("el-table-column"),O=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Qe,[e.createElementVNode("div",ve,[e.createElementVNode("div",null,"订单号："+e.toDisplayString(l.orderInfo.orderNo),1),e.createElementVNode("div",null,"下单时间："+e.toDisplayString(l.orderInfo.createTime),1),e.createElementVNode("div",et,[e.createVNode(N,{disabled:l.toolsDisabled,content:"买家："+l.orderInfo.buyerNickname,"raw-content":!0},{default:e.withCtx(()=>[e.createElementVNode("span",tt,"买家："+e.toDisplayString(l.orderInfo.buyerNickname),1)]),_:1},8,["disabled","content"]),l.orderInfo.items[0].purchase?(e.openBlock(),e.createBlock(N,{key:0,disabled:l.toolsDisabled,"raw-content":!0,content:(I=l.orderInfo.items)!=null&&I[0].purchase?e.unref(c)((j=l.orderInfo.items)==null?void 0:j[0],"one",f("one",(M=l.orderInfo.items)==null?void 0:M[0].purchase)):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d,k;return[e.createElementVNode("span",null,[x[4]||(x[4]=e.createElementVNode("span",null,"(",-1)),e.createElementVNode("span",ot,"￥"+e.toDisplayString(l.orderInfo.items[0].one.userId||(d=l.orderInfo.items)!=null&&d[0].purchase?f("one",(k=l.orderInfo.items)==null?void 0:k[0].purchase):0),1),x[5]||(x[5]=e.createElementVNode("span",null,")",-1)),l.orderInfo.items[0].purchase?(e.openBlock(),e.createElementBlock("span",nt,"内购")):e.createCommentVNode("",!0)])]}),_:1},8,["disabled","content"])):e.createCommentVNode("",!0)]),e.createElementVNode("div",null,[l.orderInfo.status==="PAID"||l.orderInfo.status==="COMPLETED"||l.orderInfo.status==="CLOSED"?(e.openBlock(),e.createElementBlock("span",lt,"实付款：")):e.createCommentVNode("",!0),l.orderInfo.status==="UNPAID"?(e.openBlock(),e.createElementBlock("span",at,"应付款：")):e.createCommentVNode("",!0),e.createElementVNode("span",rt,"￥"+e.toDisplayString(e.unref(n)(l.orderInfo.payAmount).toFixed(2)),1)]),e.createElementVNode("div",it,[e.createVNode(N,{disabled:l.toolsDisabled,content:"店铺："+l.orderInfo.shopName,"raw-content":!0},{default:e.withCtx(()=>[e.createTextVNode(" 店铺："+e.toDisplayString(l.orderInfo.shopName),1)]),_:1},8,["disabled","content"])]),e.createElementVNode("p",{style:{color:"#555cfd",cursor:"pointer","margin-left":"auto","margin-right":"77px"},onClick:x[0]||(x[0]=d=>_(l.orderInfo))},"查看详情")]),e.createElementVNode("div",dt,[e.createVNode(O,{data:l.orderInfo.items,border:"",style:{width:"433px","flex-shrink":"0"},"row-style":{height:"100px"}},{default:e.withCtx(()=>[e.createVNode(D,{prop:"name"},{default:e.withCtx(({row:d})=>[e.createElementVNode("div",st,[e.createElementVNode("div",ct,[e.createElementVNode("img",{src:d.image,style:{width:"68px",height:"68px"}},null,8,pt)]),e.createElementVNode("div",ft,[e.createElementVNode("div",mt,[d.productName.length>32?(e.openBlock(),e.createBlock(N,{key:0,disabled:l.toolsDisabled,class:"box-item",effect:"dark",content:d.productName,placement:"bottom"},{default:e.withCtx(()=>[e.createElementVNode("div",ht,e.toDisplayString(d.productName),1)]),_:2},1032,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",gt,e.toDisplayString(d.productName),1)),e.createElementVNode("div",bt,"￥"+e.toDisplayString(e.unref(n)(d.dealPrice)),1)]),e.createElementVNode("div",xt,[d.specs.join("、").length>16?(e.openBlock(),e.createBlock(N,{key:0,disabled:l.toolsDisabled,class:"box-item",effect:"dark",content:d.specs.join("、"),placement:"bottom"},{default:e.withCtx(()=>[e.createElementVNode("div",ut,e.toDisplayString(d.specs&&d.specs.join("、")),1)]),_:2},1032,["disabled","content"])):(e.openBlock(),e.createElementBlock("div",Nt,e.toDisplayString(d.specs&&d.specs.join("、")),1)),e.createElementVNode("div",_t,"x"+e.toDisplayString(d.num),1)])])])]),_:1})]),_:1},8,["data"]),e.createElementVNode("div",yt,[e.createElementVNode("div",Vt,[e.createElementVNode("span",{class:"name",onClick:x[1]||(x[1]=d=>B(l.orderInfo.items[0].one.userId))},e.toDisplayString(l.orderInfo.items[0].one.name),1),e.createElementVNode("span",null,e.toDisplayString(l.orderInfo.items[0].one.mobile),1),e.createElementVNode("span",null,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:l.orderInfo.items[0].one.userId?e.unref(c)((P=l.orderInfo.items)==null?void 0:P[0],"one",f("one",(R=l.orderInfo.items)==null?void 0:R[0].purchase)):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d;return[e.createElementVNode("span",null,[x[6]||(x[6]=e.createTextVNode(" 一级佣金：")),e.createElementVNode("span",Ct,"￥"+e.toDisplayString(l.orderInfo.items[0].one.userId?f("one",(d=l.orderInfo.items)==null?void 0:d[0].purchase):0),1)])]}),_:1},8,["disabled","content"])])]),e.createElementVNode("div",wt,[e.createElementVNode("span",{class:"name",onClick:x[2]||(x[2]=d=>B(l.orderInfo.items[0].two.userId))},e.toDisplayString(l.orderInfo.items[0].two.name),1),e.createElementVNode("span",null,e.toDisplayString(l.orderInfo.items[0].two.mobile),1),e.createElementVNode("span",null,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:l.orderInfo.items[0].two.userId?e.unref(c)((b=l.orderInfo.items)==null?void 0:b[0],"two",f("two",(t=l.orderInfo.items)==null?void 0:t[0].purchase)):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d;return[e.createElementVNode("span",null,[x[7]||(x[7]=e.createTextVNode(" 二级佣金：")),e.createElementVNode("span",Et,"￥"+e.toDisplayString(f("two",(d=l.orderInfo.items)==null?void 0:d[0].purchase)),1)])]}),_:1},8,["disabled","content"])])]),e.createElementVNode("div",kt,[e.createElementVNode("span",{class:"name",onClick:x[3]||(x[3]=d=>B(l.orderInfo.items[0].three.userId))},e.toDisplayString(l.orderInfo.items[0].three.name),1),e.createElementVNode("span",null,e.toDisplayString(l.orderInfo.items[0].three.mobile),1),e.createElementVNode("span",null,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:l.orderInfo.items[0].three.userId?e.unref(c)((o=l.orderInfo.items)==null?void 0:o[0],"three",f("three",(y=l.orderInfo.items)==null?void 0:y[0].purchase)):"该层级无分销员，不计算对应佣金",placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d;return[e.createElementVNode("span",null,[x[8]||(x[8]=e.createTextVNode(" 三级佣金：")),e.createElementVNode("span",Tt,"￥"+e.toDisplayString(f("three",(d=l.orderInfo.items)==null?void 0:d[0].purchase)),1)])]}),_:1},8,["disabled","content"])])])]),e.createElementVNode("div",St,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.orderInfo.items,d=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"content__right2--item",style:e.normalizeStyle({color:s(d.orderStatus)==="待结算"?"#FD9224":s(d.orderStatus)==="已赚"?"#00BB2C":"#999"})},e.toDisplayString(s(d.orderStatus)),5))),128))]),e.createElementVNode("div",Dt,[a("PAID")?(e.openBlock(),e.createElementBlock("div",It,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:e.unref(i)(l.orderInfo).toSelledPrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d,k,C,T;return[e.createTextVNode("待结算："+e.toDisplayString((T=(C=(k=(d=l.orderInfo)==null?void 0:d.items)==null?void 0:k[0])==null?void 0:C.one)!=null&&T.userId?a("PAID"):0),1)]}),_:1},8,["disabled","content"])])):e.createCommentVNode("",!0),a("COMPLETED")?(e.openBlock(),e.createElementBlock("div",Bt,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:e.unref(i)(l.orderInfo).completePrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d,k,C,T;return[e.createTextVNode("已赚："+e.toDisplayString((T=(C=(k=(d=l.orderInfo)==null?void 0:d.items)==null?void 0:k[0])==null?void 0:C.one)!=null&&T.userId?a("COMPLETED"):0),1)]}),_:1},8,["disabled","content"])])):e.createCommentVNode("",!0),a("CLOSED")?(e.openBlock(),e.createElementBlock("div",$t,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:e.unref(i)(l.orderInfo).closedPrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d,k,C,T;return[e.createTextVNode("已失效："+e.toDisplayString((T=(C=(k=(d=l.orderInfo)==null?void 0:d.items)==null?void 0:k[0])==null?void 0:C.one)!=null&&T.userId?a("CLOSED"):0),1)]}),_:1},8,["disabled","content"])])):e.createCommentVNode("",!0),e.createElementVNode("div",Ot,[e.createVNode(N,{disabled:l.toolsDisabled,"raw-content":!0,content:e.unref(i)(l.orderInfo).totalPrice.toString(),placement:"bottom",effect:"light"},{default:e.withCtx(()=>{var d,k,C,T;return[e.createTextVNode("佣金合计："+e.toDisplayString((T=(C=(k=(d=l.orderInfo)==null?void 0:d.items)==null?void 0:k[0])==null?void 0:C.one)!=null&&T.userId?a():0),1)]}),_:1},8,["disabled","content"])])])])])}}}),xo="",Pt=K(Mt,[["__scopeId","data-v-edd24644"]]),At={style:{padding:"16px"}},Ft={class:"count"},Ut=e.defineComponent({__name:"DistributionOrderP",setup(l){const c=new be,{divTenThousand:i}=W(),n=e.reactive({orderNo:"",productName:"",shopName:"",buyerNickname:"",date:"",startTime:"",endTime:"",status:""}),m=e.reactive({current:1,size:10,total:0}),r=e.ref([]),f=e.ref({total:"",unsettled:"",invalid:""}),a=[{label:"订单号",labelWidth:60,prop:"orderNo",valueType:"copy",fieldProps:{placeholder:"请输入订单号",maxlength:20}},{label:"商品名称",prop:"productName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称",maxlength:30}},{label:"店铺名称",prop:"shopName",valueType:"copy",fieldProps:{placeholder:"请输入店铺名称",maxlength:30}},{label:"买家昵称",prop:"buyerNickname",valueType:"copy",fieldProps:{placeholder:"请输入买家昵称",maxlength:30}},{label:"下单时间",prop:"date",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"YYYY-MM-DD HH:mm:ss"}}];s();async function s(){const{code:b,data:t,msg:o}=await Ve({current:m.current,size:m.size,...n});b===200&&t?(r.value=t.page.records,f.value=t.statistic,m.total=t.page.total):w.ElMessage.error(o||"获取分销订单失败")}const _=b=>{b&&Object.keys(b).forEach(t=>n[t]=b[t])},B=()=>{m.current=1,(n==null?void 0:n.date.length)>0&&(n.startTime=n.date[0],n.endTime=n.date[1]),s()},E=()=>{n.orderNo="",n.productName="",n.shopName="",n.buyerNickname="",n.date="",n.startTime="",n.endTime="",m.current=1,s()},x=b=>{m.current=b,s()},N=b=>{m.current=1,m.size=b,s()},D=e.ref(" "),O=e.ref("全部订单"),I=b=>{n.status=b,s()},j=b=>{if(D.value=" ",O.value=b,O.value==="近一个月订单"){const t=c.getLastMonth(new Date);M(t)}else if(O.value==="近三个月订单"){const t=c.getLastThreeMonth(new Date);M(t)}else n.startTime="",n.endTime="",s()},M=async b=>{const t=c.getYMDs(new Date);n.startTime=b,n.endTime=t,s()},P=e.ref(!1),R=async()=>{P.value=!0,await e.nextTick(),P.value=!1};return(b,t)=>{const o=e.resolveComponent("el-icon"),y=e.resolveComponent("el-dropdown-item"),d=e.resolveComponent("el-dropdown-menu"),k=e.resolveComponent("el-dropdown"),C=e.resolveComponent("el-tab-pane"),T=e.resolveComponent("el-tabs");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ne,{"v-model":n,columns:a,"has-unfold":"",onChangeFormItem:_,onSearchHandle:B,onHandleReset:E},null,8,["v-model"]),e.createElementVNode("div",At,[e.createElementVNode("div",Ft,[e.createElementVNode("span",null,"累计总佣金： ￥ "+e.toDisplayString(e.unref(i)(f.value.total)),1),e.createElementVNode("span",null,"待结算总佣金： ￥ "+e.toDisplayString(e.unref(i)(f.value.unsettled)),1),e.createElementVNode("span",null,"已失效总佣金： ￥"+e.toDisplayString(e.unref(i)(f.value.invalid)),1)])]),e.createVNode(T,{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=A=>D.value=A),style:{padding:"0 16px"},onTabChange:I},{default:e.withCtx(()=>[e.createVNode(C,{name:" "},{label:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(O.value),1),e.createVNode(k,{placement:"bottom-end",trigger:"click",onCommand:j},{dropdown:e.withCtx(()=>[e.createVNode(d,null,{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(["近一个月订单","近三个月订单","全部订单"],A=>e.createVNode(y,{key:A,command:A},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(A),1)]),_:2},1032,["command"])),64))]),_:1})]),default:e.withCtx(()=>[e.createElementVNode("span",{class:"el-dropdown-link",style:{height:"40px"},onClick:e.withModifiers(()=>{},["stop"])},[e.createVNode(o,{class:"el-icon--right",style:{position:"relative",top:"12px"}},{default:e.withCtx(()=>[e.createVNode(o,null,{default:e.withCtx(()=>[e.createVNode(e.unref(xe.ArrowDownBold))]),_:1})]),_:1})])]),_:1})]),_:1}),e.createVNode(C,{label:"已付款",name:"PAID"}),e.createVNode(C,{label:"已完成",name:"COMPLETED"}),e.createVNode(C,{label:"已关闭",name:"CLOSED"})]),_:1},8,["modelValue"]),e.createElementVNode("div",{class:"distribution_order_table_container",onScroll:R},[t[1]||(t[1]=e.createStaticVNode('<div class="tbhead" data-v-3bdd85a6><div class="tbhead__goods" data-v-3bdd85a6>商品信息</div><div class="tbhead__detail" data-v-3bdd85a6>分佣详情</div><div class="tbhead__state" data-v-3bdd85a6>结算状态</div><div class="tbhead__total" data-v-3bdd85a6>佣金结算</div></div>',1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,A=>(e.openBlock(),e.createBlock(Pt,{toolsDisabled:P.value,key:A.orderNo,"order-info":A},null,8,["toolsDisabled","order-info"]))),128))],32),e.createVNode(v,{"page-num":m.current,"page-size":m.size,total:m.total,onHandleCurrentChange:x,onHandleSizeChange:N},null,8,["page-num","page-size","total"])],64)}}}),uo="",zt=Object.freeze(Object.defineProperty({__proto__:null,default:K(Ut,[["__scopeId","data-v-3bdd85a6"]])},Symbol.toStringTag,{value:"Module"})),Rt={class:"tab_container",style:{position:"relative"}},qt={key:0,class:"tool"},Lt={class:"tool__btn handle_container"},jt={style:{height:"83px",display:"flex","flex-direction":"column","justify-content":"center"}},Ht={class:"f12 color51",style:{"margin-left":"6px"}},Xt={class:"ellipsis"},Wt=["onClick"],Yt=["onClick"],Gt=["onClick"],Jt={key:3},Kt={style:{display:"flex","align-items":"center"}},Zt=["src"],Qt={style:{display:"flex","align-items":"center",padding:"10px 0"}},vt={class:"dialog-footer"},eo=e.defineComponent({__name:"WholeSalerP",setup(l){const c=e.reactive({name:"",mobile:"",date:"",startTime:"",endTime:"",status:"SUCCESS"}),{divTenThousand:i}=W(),n=e.reactive({current:1,size:10,total:0}),m=e.ref([]),r=e.ref([]),f=e.ref(!1),a=e.reactive({current:1,total:0,size:10,list:[],userId:""}),s=e.ref(!1),_=e.reactive({current:1,total:0,size:10,list:[],userId:"",rank:""}),B=[{label:"姓名",labelWidth:45,prop:"name",valueType:"copy",fieldProps:{placeholder:"请输入姓名",maxlength:20}},{label:"手机号",prop:"mobile",labelWidth:60,valueType:"copy",fieldProps:{placeholder:"请输入手机号",maxlength:30}},{label:"申请时间",prop:"date",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"YYYY-MM-DD HH:mm:ss"}}];F();const E=()=>{F()},x=u=>{n.current=u,F()},N=u=>{n.current=1,n.size=u,F()},D=u=>{u&&Object.keys(u).forEach(g=>c[g]=u[g])},O=()=>{n.current=1,c.date.length>0&&(console.log("searchConfig.date",c.date),c.startTime=c.date[0],c.endTime=c.date[1]),F()},I=u=>{C(!0,[u])},j=()=>{r.value.length?C(!0,r.value.map(u=>u.userId)):w.ElMessage.warning("请勾选分销商")},M=e.ref(!1),P=e.ref(),R=e.ref(""),b=u=>{M.value=!0,P.value=u},t=e.ref(""),o=async u=>{if(!u.rejectReason){const{code:g,data:S,msg:te}=await ke(u.id);g===200&&S?(t.value=S,u.rejectReason=!0):(te&&w.ElMessage.warning(te),t.value="",u.rejectReason=!0)}},y=u=>{u.rejectReason=!1},d=()=>{const u=R.value;if(u===""){w.ElMessage.warning("请填写拒绝原因");return}fe(!1,P.value,u).then(g=>{g.code&&g.code===200?(w.ElMessage.success("操作成功"),M.value=!1,F()):w.ElMessage.error("操作失败")})},k=()=>{r.value.length?b(r.value.map(u=>u.id)):w.ElMessage.warning("请勾选分销商")};async function C(u,g){w.ElMessageBox.confirm("确定需要继续操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{code:S}=await fe(u,g);S&&S===200?(w.ElMessage.success("操作成功"),F()):w.ElMessage.error("操作失败")})}const T=u=>{c.status==="SUCCESS"&&(f.value=!0,a.userId=u,V(u))},A=()=>{s.value=!0,ee()},Z=()=>{a.current=1,a.size=10,a.list=[],a.userId=""},p=()=>{_.current=1,_.size=10,_.list=[],_.userId="",_.rank=""},U=u=>{a.current=u,V()},G=u=>{a.current=1,a.size=u,V()};async function F(){const{code:u,data:g}=await Ce({...c,...n});u===200?(m.value=g.records.map(S=>({...S,rejectReason:!1,flag:!1})),n.total=g.total):w.ElMessage.error("获取分销商失败")}async function V(u){const{code:g,data:S}=await we({userId:u||a.userId,current:a.current,size:a.size});g&&g===200?(a.list=S.records,a.total=S.total,f.value=!0):(w.ElMessage.error("获取下线失败"),f.value=!1)}async function ee(u){const{code:g,data:S}=await Ee({userId:u||_.userId,current:_.current,size:_.size});g&&g===200?(_.list=S.records,_.total=S.total,_.rank=S.rank,s.value=!0):(w.ElMessage.error("获取排行失败"),s.value=!1)}const so=()=>{n.current=1,c.date="",c.endTime="",c.startTime="",c.mobile="",c.name="",F()};return(u,g)=>{const S=e.resolveComponent("el-tab-pane"),te=e.resolveComponent("el-tabs"),oe=e.resolveComponent("el-link"),Q=e.resolveComponent("el-button"),co=e.resolveComponent("el-image"),po=e.resolveComponent("el-row"),fo=e.resolveComponent("el-tooltip"),Y=e.resolveComponent("el-table-column"),me=e.resolveComponent("el-table"),ie=e.resolveComponent("el-dialog"),mo=e.resolveComponent("el-input");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ne,{"v-model":c,columns:B,"has-unfold":"",onChangeFormItem:D,onSearchHandle:O,onHandleReset:so},null,8,["v-model"]),e.createElementVNode("div",Rt,[e.createVNode(te,{modelValue:c.status,"onUpdate:modelValue":g[0]||(g[0]=h=>c.status=h),class:"demo-tabs",onTabChange:E},{default:e.withCtx(()=>[e.createVNode(S,{label:"分销列表",name:"SUCCESS"}),e.createVNode(S,{label:"待审核",name:"APPLYING"}),e.createVNode(S,{label:"已拒绝",name:"CLOSED"})]),_:1},8,["modelValue"]),e.createVNode(oe,{style:{position:"absolute",top:"11px",right:"20px",color:"#555cfd"},onClick:A},{default:e.withCtx(()=>g[7]||(g[7]=[e.createTextVNode("佣金排行榜")])),_:1})]),c.status==="APPLYING"?(e.openBlock(),e.createElementBlock("div",qt,[e.createElementVNode("div",Lt,[e.createVNode(Q,{plain:"",round:"",onClick:j},{default:e.withCtx(()=>g[8]||(g[8]=[e.createTextVNode("批量同意")])),_:1}),e.createVNode(Q,{plain:"",round:"",onClick:k},{default:e.withCtx(()=>g[9]||(g[9]=[e.createTextVNode("批量拒绝")])),_:1})])])):e.createCommentVNode("",!0),e.createVNode(e.unref(ue),{"checked-item":r.value,"onUpdate:checkedItem":g[1]||(g[1]=h=>r.value=h),data:m.value,selection:!0,"no-border":"",class:"q-table"},{default:e.withCtx(()=>[e.createVNode(z,{label:"分销商信息",width:"300"},{default:e.withCtx(({row:h})=>[e.createElementVNode("div",jt,[e.createVNode(po,{justify:"space-between"},{default:e.withCtx(()=>[e.createVNode(co,{src:h.avatar,style:{width:"52px",height:"52px"}},null,8,["src"]),e.createElementVNode("div",Ht,[e.createElementVNode("div",Xt,e.toDisplayString(h.name),1),e.createElementVNode("div",null,e.toDisplayString(h.mobile),1)])]),_:2},1024)])]),_:1}),c.status==="SUCCESS"?(e.openBlock(),e.createBlock(z,{key:0,label:"团队成员",width:"100",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("div",{class:"column",onClick:H=>T(h.userId)},[e.createVNode(oe,{type:"primary",link:""},{default:e.withCtx(()=>[e.createTextVNode("一级："+e.toDisplayString(h.one),1)]),_:2},1024),e.createVNode(oe,{type:"primary",link:""},{default:e.withCtx(()=>[e.createTextVNode("二级："+e.toDisplayString(h.two),1)]),_:2},1024),e.createVNode(oe,{type:"primary",link:""},{default:e.withCtx(()=>[e.createTextVNode("三级："+e.toDisplayString(h.three),1)]),_:2},1024)],8,Wt)]),_:1})):e.createCommentVNode("",!0),c.status==="SUCCESS"?(e.openBlock(),e.createBlock(z,{key:1,label:"累计佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(i)(h.total)),1)]),_:1})):e.createCommentVNode("",!0),c.status==="SUCCESS"?(e.openBlock(),e.createBlock(z,{key:2,label:"待提现佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(i)(h.undrawn)),1)]),_:1})):e.createCommentVNode("",!0),c.status==="SUCCESS"?(e.openBlock(),e.createBlock(z,{key:3,label:"待结算佣金(元)",width:"150",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(i)(h.unsettled)),1)]),_:1})):e.createCommentVNode("",!0),e.createVNode(z,{label:"累积消费金额(元)",width:"150",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(i)(h.consumption)),1)]),_:1}),e.createVNode(z,{label:"邀请人",width:"150",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(h.referrer||"平台"),1)]),_:1}),e.createVNode(z,{label:"申请时间",width:"200",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(h.createTime),1)]),_:1}),c.status!=="APPLYING"?(e.openBlock(),e.createBlock(z,{key:4,label:"审批时间",width:"200",align:"left"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",null,e.toDisplayString(h.passTime),1)]),_:1})):e.createCommentVNode("",!0),e.createVNode(z,{label:"",width:"1"}),c.status==="APPLYING"?(e.openBlock(),e.createBlock(z,{key:5,label:"操作",width:"150",align:"right"},{default:e.withCtx(({row:h})=>[e.createElementVNode("span",{style:{cursor:"pointer",color:"#555cfd","margin-left":"10px"},onClick:H=>I(h.id)},"通过",8,Yt),e.createElementVNode("span",{style:{cursor:"pointer",color:"#f54319","margin-left":"10px"},onClick:H=>b([h.id])},"拒绝",8,Gt)]),_:1})):e.createCommentVNode("",!0),c.status==="CLOSED"?(e.openBlock(),e.createBlock(z,{key:6,label:"操作",width:"150",align:"right"},{default:e.withCtx(({row:h})=>[e.createVNode(fo,{visible:t.value!==""&&h.rejectReason},{content:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.value),1)]),default:e.withCtx(()=>[e.createVNode(Q,{type:"primary",link:"",underline:!1,onMouseover:H=>o(h),onMouseleave:H=>y(h)},{default:e.withCtx(()=>g[10]||(g[10]=[e.createTextVNode(" 拒绝原因 ")])),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["visible"])]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["checked-item","data"]),e.createVNode(v,{"page-num":n.current,"page-size":n.size,total:n.total,onHandleCurrentChange:x,onHandleSizeChange:N},null,8,["page-num","page-size","total"]),e.createVNode(ie,{modelValue:f.value,"onUpdate:modelValue":g[2]||(g[2]=h=>f.value=h),width:"554px",title:"团队成员",onClose:Z},{default:e.withCtx(()=>[e.createVNode(me,{data:a.list,"header-cell-style":{background:"#f6f8fa",fontSize:"12px",color:"#909399","font-weight":"bold"},"cell-style":{fontSize:"12px",color:"#333333"},height:"400"},{default:e.withCtx(()=>[e.createVNode(Y,{label:"姓名",align:"center"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(h.name?h.name:h.nickname),1)]),_:1}),e.createVNode(Y,{label:"层级",align:"center"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(h.level==="ONE"?"一级":h.level==="TWO"?"二级":"三级"),1)]),_:1}),e.createVNode(Y,{label:"累计消费",align:"center",prop:"consumption"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(e.unref(i)(h.consumption)),1)]),_:1}),e.createVNode(Y,{label:"订单数",align:"center",prop:"orderCount"})]),_:1},8,["data"]),e.createVNode(v,{"page-num":a.current,"page-size":a.size,total:a.total,onHandleCurrentChange:U,onHandleSizeChange:G},null,8,["page-num","page-size","total"])]),_:1},8,["modelValue"]),e.createVNode(ie,{modelValue:s.value,"onUpdate:modelValue":g[3]||(g[3]=h=>s.value=h),width:"717px",class:"ranking",style:{"margin-top":"70px"},title:"佣金排行榜",onClose:p},{default:e.withCtx(()=>[e.createVNode(me,{data:_.list,"header-cell-style":{background:"#f6f8fa",fontSize:"14px",color:"#333","font-weight":"bold"},"cell-style":{fontSize:"12px",color:"#333333"}},{default:e.withCtx(()=>[e.createVNode(Y,{label:"排名",align:"center",type:"index",width:"140"},{default:e.withCtx(({row:h,$index:H})=>[H===0?(e.openBlock(),e.createBlock(le,{key:0,name:"icon-svg2",svg:"",style:{width:"24px",height:"26px"}})):H===1?(e.openBlock(),e.createBlock(le,{key:1,name:"icon-a-svg1",svg:"",style:{width:"24px",height:"26px"}})):H===2?(e.openBlock(),e.createBlock(le,{key:2,name:"icon-a-svg2",svg:"",style:{width:"24px",height:"26px"}})):(e.openBlock(),e.createElementBlock("span",Jt,e.toDisplayString(H+1),1))]),_:1}),e.createVNode(Y,{label:"用户昵称",prop:"name"},{default:e.withCtx(({row:h})=>[e.createElementVNode("div",Kt,[e.createElementVNode("img",{src:h.avatar,alt:"",style:{width:"50px",height:"50px","margin-right":"5px"}},null,8,Zt),e.createElementVNode("span",null,e.toDisplayString(h.name),1)])]),_:1}),e.createVNode(Y,{label:"累计佣金(元)",align:"center",prop:"total"},{default:e.withCtx(({row:h})=>[e.createTextVNode(e.toDisplayString(e.unref(i)(h.total).toFixed(2)),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e.createVNode(ie,{modelValue:M.value,"onUpdate:modelValue":g[6]||(g[6]=h=>M.value=h),title:"分销商审核",width:"690"},{footer:e.withCtx(()=>[e.createElementVNode("div",vt,[e.createVNode(Q,{onClick:g[5]||(g[5]=h=>M.value=!1)},{default:e.withCtx(()=>g[12]||(g[12]=[e.createTextVNode("取消")])),_:1}),e.createVNode(Q,{type:"primary",onClick:d},{default:e.withCtx(()=>g[13]||(g[13]=[e.createTextVNode("确认")])),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("div",Qt,[g[11]||(g[11]=e.createElementVNode("div",{style:{color:"#666666",width:"85px"}},"拒绝原因",-1)),e.createVNode(mo,{modelValue:R.value,"onUpdate:modelValue":g[4]||(g[4]=h=>R.value=h),"show-word-limit":"",type:"text",maxlength:"20",placeholder:"请输入拒绝原因"},null,8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}}),_o="",to=Object.freeze(Object.defineProperty({__proto__:null,default:K(eo,[["__scopeId","data-v-233cefdb"]])},Symbol.toStringTag,{value:"Module"})),oo={style:{"background-color":"#fff","overflow-y":"auto"}},no={class:"save"},lo={class:"dialog-footer"},ao={class:"dialog-footer"},ro=e.defineComponent({__name:"DistributionSetP",setup(l){const{divHundred:c,mulHundred:i,mulTenThousand:n,divTenThousand:m}=W(),r=e.ref(!1),f=e.ref(!1),a=e.reactive({config:{level:"ONE",condition:{types:["APPLY","CONSUMPTION"],requiredAmount:0},precompute:"DISTRIBUTOR",protocol:"111",playMethods:"333",purchase:!1,shareType:"FIXED_AMOUNT",one:0,two:0,three:0}}),s=e.computed(()=>a.config.level==="ONE"?1:a.config.level==="TWO"?2:3),_=e.reactive({level:[{required:!0,message:"",trigger:"blur"}],poster:[{required:!0,message:"请设置推广海报",trigger:"blur"}],purchase:[{required:!0,message:"",trigger:"blur"}],precompute:[{required:!0,message:"",trigger:"blur"}],condition:[{required:!0,validator:O,trigger:"blur"}],protocol:[{required:!0,message:"请设置协议",trigger:"blur"}],playMethods:[{required:!0,message:"请设置攻略玩法",trigger:"blur"}],shareType:[{required:!0,message:"",trigger:"blur"}],one:[{required:!0,validator:I,trigger:"change"}],two:[{required:!0,validator:j,trigger:"change"}],three:[{required:!0,validator:M,trigger:"change"}]}),B=e.ref();R();const E=()=>{r.value=!0},x=()=>{f.value=!0},N=async()=>{B.value&&B.value.validate(async(b,t)=>{if(b){const o=JSON.parse(JSON.stringify(a.config));o.condition.requiredAmount=n(o.condition.requiredAmount),a.config.shareType==="RATE"?(o.one=i(o.one),o.two=i(o.two),o.three=i(o.three)):(o.one=n(o.one),o.two=n(o.two),o.three=n(o.three));const{code:y}=await _e(P(o));y===200?w.ElMessage.success("保存成功"):w.ElMessage.error("保存失败")}})},D=()=>{a.config.one=0,a.config.two=0,a.config.three=0};function O(b,t,o){if(t.types.length){if(t.types.includes("CONSUMPTION")&&Number(t.requiredAmount)<=0)return o(new Error("设置金额应大于零"))}else return o(new Error("请选择分销商条件"));o()}function I(b,t,o){const y=a.config.shareType;if(y==="UNIFIED")return o();const d=Number(t);if(d<=0)return o(new Error("一级佣金应大于等于零"));if(a.config.level!=="ONE"&&a.config.two&&d<=Number(a.config.two))return o(new Error("一级佣金值应大于二级佣金"));if(y==="RATE"&&(d>100||d<0))return o(new Error("一级佣金比例应设置在0-100之间"));if(y==="FIXED_AMOUNT"&&(d>9e3||d<0))return o(new Error("一级佣金应设置在0-9000之间"));o()}function j(b,t,o){const y=a.config.shareType;if(y==="UNIFIED"||a.config.level==="ONE")return o();const d=Number(t);if(y==="RATE"&&(d>100||d<0))return o(new Error("一级佣金比例应设置在0-100之间"));if(y==="FIXED_AMOUNT"&&(d>9e3||d<0))return o(new Error("一级佣金应设置在0-9000之间"));if(a.config.one&&d>=Number(a.config.one))return o(new Error("二级佣金应小于一级佣金"));if(a.config.level==="THREE"&&a.config.three&&d<=Number(a.config.three))return o(new Error("二级佣金应大于三级佣金"));o()}function M(b,t,o){const y=a.config.shareType;if(y==="UNIFIED"||a.config.level!=="THREE")return o();const d=Number(t);if(y==="RATE"&&(d>100||d<0))return o(new Error("一级佣金比例应设置在1-100之间"));if(y==="FIXED_AMOUNT"&&(d>9e3||d<0))return o(new Error("一级佣金应设置在0-9000之间"));if(a.config.two&&d>=Number(a.config.two))return o(new Error("三级佣金应小于二级佣金"));o()}function P(b){return b.level==="ONE"?(delete b.two,delete b.three):b.level==="TWO"&&delete b.three,b}async function R(){const{code:b,data:t}=await ce();b===200?(t.shareType==="RATE"?(t.one=c(t.one),t.two=c(t.two),t.three=c(t.three)):(t.one=m(t.one),t.two=m(t.two),t.three=m(t.three)),t.condition.requiredAmount=m(t.condition.requiredAmount),a.config=t):w.ElMessage.error("获取分销配置失败")}return(b,t)=>{const o=e.resolveComponent("el-radio"),y=e.resolveComponent("el-radio-group"),d=e.resolveComponent("el-form-item"),k=e.resolveComponent("el-checkbox"),C=e.resolveComponent("el-col"),T=e.resolveComponent("el-input"),A=e.resolveComponent("el-row"),Z=e.resolveComponent("el-checkbox-group"),p=e.resolveComponent("el-tooltip"),U=e.resolveComponent("el-button"),G=e.resolveComponent("el-form"),F=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock("div",oo,[e.createVNode(G,{ref_key:"formRef",ref:B,model:a.config,"label-width":"120",rules:_,style:{"margin-left":"16px"}},{default:e.withCtx(()=>[t[36]||(t[36]=e.createElementVNode("div",{class:"col mb26"},[e.createElementVNode("div",{class:"col__icon",style:{background:"#555CFD"}}),e.createElementVNode("div",null,"基础设置")],-1)),e.createVNode(d,{label:"分销层级",class:"mb33",prop:"level"},{default:e.withCtx(()=>[e.createVNode(y,{modelValue:a.config.level,"onUpdate:modelValue":t[0]||(t[0]=V=>a.config.level=V)},{default:e.withCtx(()=>[e.createVNode(o,{value:"ONE"},{default:e.withCtx(()=>t[17]||(t[17]=[e.createTextVNode("一级分销")])),_:1}),e.createVNode(o,{value:"TWO"},{default:e.withCtx(()=>t[18]||(t[18]=[e.createTextVNode("二级分销")])),_:1}),e.createVNode(o,{value:"THREE"},{default:e.withCtx(()=>t[19]||(t[19]=[e.createTextVNode("三级分销")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e.createVNode(d,{label:"成为分销商条件",class:"mb33",prop:"condition"},{default:e.withCtx(()=>[e.createVNode(Z,{modelValue:a.config.condition.types,"onUpdate:modelValue":t[2]||(t[2]=V=>a.config.condition.types=V)},{default:e.withCtx(()=>[e.createVNode(k,{label:"APPLY"},{default:e.withCtx(()=>t[20]||(t[20]=[e.createTextVNode("申请")])),_:1}),t[23]||(t[23]=e.createElementVNode("br",null,null,-1)),e.createVNode(k,{label:"CONSUMPTION"},{default:e.withCtx(()=>[e.createVNode(A,{justify:"start",align:"middle",style:{width:"240px"}},{default:e.withCtx(()=>[e.createVNode(C,{span:12},{default:e.withCtx(()=>t[21]||(t[21]=[e.createTextVNode("累计金额大于等于")])),_:1}),e.createVNode(C,{span:12},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:a.config.condition.requiredAmount,"onUpdate:modelValue":t[1]||(t[1]=V=>a.config.condition.requiredAmount=V),type:"number",controls:!1,style:{width:"142px"}},{append:e.withCtx(()=>t[22]||(t[22]=[e.createTextVNode("元")])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.createVNode(d,{label:"分销内购",class:"mb33",prop:"purchase"},{default:e.withCtx(()=>[e.createVNode(y,{modelValue:a.config.purchase,"onUpdate:modelValue":t[3]||(t[3]=V=>a.config.purchase=V)},{default:e.withCtx(()=>[e.createVNode(o,{value:!1},{default:e.withCtx(()=>t[24]||(t[24]=[e.createTextVNode("关闭")])),_:1}),e.createVNode(o,{value:!0},{default:e.withCtx(()=>t[25]||(t[25]=[e.createTextVNode("开启")])),_:1})]),_:1},8,["modelValue"]),t[26]||(t[26]=e.createElementVNode("span",{style:{"margin-left":"30px",color:"#9a9a9a"}},"开启后分销员自己购买分销商品可获得一级佣金",-1))]),_:1}),e.createVNode(d,{label:"预计赚",class:"mb33",prop:"precompute"},{default:e.withCtx(()=>[e.createVNode(y,{modelValue:a.config.precompute,"onUpdate:modelValue":t[4]||(t[4]=V=>a.config.precompute=V)},{default:e.withCtx(()=>[e.createVNode(o,{value:"DISTRIBUTOR"},{default:e.withCtx(()=>t[27]||(t[27]=[e.createTextVNode("只对分销商(员)展示【预计赚】 ")])),_:1}),e.createVNode(p,{class:"box-item",effect:"dark",content:"控制是否在商品详情页内展示【预计赚】",placement:"top"},{default:e.withCtx(()=>t[28]||(t[28]=[e.createElementVNode("i",{class:"iconfont icon-wenhao",style:{position:"relative",left:"-30px",color:"#999"}},null,-1)])),_:1}),e.createVNode(o,{value:"NEVER"},{default:e.withCtx(()=>t[29]||(t[29]=[e.createTextVNode("对所有人都不展示")])),_:1}),e.createVNode(o,{value:"ALL"},{default:e.withCtx(()=>t[30]||(t[30]=[e.createTextVNode("对所有人展示【预计赚】")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e.createVNode(d,{label:"协议内容",prop:"protocol"},{default:e.withCtx(()=>[e.createVNode(U,{link:"",type:"primary",onClick:E},{default:e.withCtx(()=>t[31]||(t[31]=[e.createTextVNode("编辑")])),_:1})]),_:1}),e.createVNode(d,{label:"赚钱攻略"},{default:e.withCtx(()=>[e.createVNode(U,{link:"",type:"primary",onClick:x},{default:e.withCtx(()=>t[32]||(t[32]=[e.createTextVNode("编辑")])),_:1})]),_:1}),t[37]||(t[37]=e.createElementVNode("div",{class:"col mb26"},[e.createElementVNode("div",{class:"col__icon",style:{background:"#555CFD"}}),e.createElementVNode("div",null,"佣金设置")],-1)),e.createVNode(d,{label:"佣金设置",prop:"shareType"},{default:e.withCtx(()=>[e.createVNode(y,{modelValue:a.config.shareType,"onUpdate:modelValue":t[5]||(t[5]=V=>a.config.shareType=V),onChange:D},{default:e.withCtx(()=>[e.createVNode(o,{value:"FIXED_AMOUNT"},{default:e.withCtx(()=>t[33]||(t[33]=[e.createTextVNode("固定金额")])),_:1}),e.createVNode(o,{value:"RATE"},{default:e.withCtx(()=>t[34]||(t[34]=[e.createTextVNode("百分比")])),_:1}),e.createVNode(p,{class:"box-item",effect:"dark",content:"百分比佣金 = 商品实售价 * 购买商品数 * 百分比；固定金额佣金 = 固定金额 * 购买商品数",placement:"top"},{default:e.withCtx(()=>t[35]||(t[35]=[e.createElementVNode("i",{class:"iconfont icon-wenhao",style:{position:"relative",left:"-25px",color:"#999"}},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1}),s.value>=1?(e.openBlock(),e.createBlock(d,{key:0,label:"一级佣金",prop:"one"},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:a.config.one,"onUpdate:modelValue":t[6]||(t[6]=V=>a.config.one=V),type:"number",style:{width:"200px"}},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.config.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0),s.value>=2?(e.openBlock(),e.createBlock(d,{key:1,label:"二级佣金",prop:"two"},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:a.config.two,"onUpdate:modelValue":t[7]||(t[7]=V=>a.config.two=V),type:"number",style:{width:"200px"}},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.config.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0),s.value===3?(e.openBlock(),e.createBlock(d,{key:2,label:"三级佣金",prop:"three"},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:a.config.three,"onUpdate:modelValue":t[8]||(t[8]=V=>a.config.three=V),type:"number",style:{width:"200px"}},{append:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.config.shareType==="FIXED_AMOUNT"?"元":"%"),1)]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["model","rules"]),e.createElementVNode("div",no,[e.createVNode(U,{type:"primary",round:"",onClick:N},{default:e.withCtx(()=>t[38]||(t[38]=[e.createTextVNode("保存")])),_:1})]),e.createVNode(F,{modelValue:r.value,"onUpdate:modelValue":t[12]||(t[12]=V=>r.value=V),title:"编辑协议"},{footer:e.withCtx(()=>[e.createElementVNode("span",lo,[e.createVNode(U,{onClick:t[10]||(t[10]=V=>r.value=!1)},{default:e.withCtx(()=>t[39]||(t[39]=[e.createTextVNode("取消")])),_:1}),e.createVNode(U,{type:"primary",onClick:t[11]||(t[11]=V=>r.value=!1)},{default:e.withCtx(()=>t[40]||(t[40]=[e.createTextVNode("确认")])),_:1})])]),default:e.withCtx(()=>[e.createVNode(de,{content:a.config.protocol,"onUpdate:content":t[9]||(t[9]=V=>a.config.protocol=V)},null,8,["content"])]),_:1},8,["modelValue"]),e.createVNode(F,{modelValue:f.value,"onUpdate:modelValue":t[16]||(t[16]=V=>f.value=V),title:"编辑攻略"},{footer:e.withCtx(()=>[e.createElementVNode("span",ao,[e.createVNode(U,{onClick:t[14]||(t[14]=V=>f.value=!1)},{default:e.withCtx(()=>t[41]||(t[41]=[e.createTextVNode("取消")])),_:1}),e.createVNode(U,{type:"primary",onClick:t[15]||(t[15]=V=>f.value=!1)},{default:e.withCtx(()=>t[42]||(t[42]=[e.createTextVNode("确认")])),_:1})])]),default:e.withCtx(()=>[e.createVNode(de,{content:a.config.playMethods,"onUpdate:content":t[13]||(t[13]=V=>a.config.playMethods=V)},null,8,["content"])]),_:1},8,["modelValue"])])}}}),Vo="",io=Object.freeze(Object.defineProperty({__proto__:null,default:K(ro,[["__scopeId","data-v-1768cef0"]])},Symbol.toStringTag,{value:"Module"}));return Ne});
