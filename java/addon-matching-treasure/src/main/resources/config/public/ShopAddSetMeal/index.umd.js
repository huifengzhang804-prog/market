(function(e,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("vue"),require("vue-router"),require("@/components/q-choose-goods-popup/q-choose-goods-popup.vue"),require("element-plus"),require("@/composables/useConvert"),require("@/apis/http"),require("@/utils/date"),require("@/store/modules/shopInfo"),require("@/views/material/selectMaterial.vue"),require("lodash-es")):typeof define=="function"&&define.amd?define(["vue","vue-router","@/components/q-choose-goods-popup/q-choose-goods-popup.vue","element-plus","@/composables/useConvert","@/apis/http","@/utils/date","@/store/modules/shopInfo","@/views/material/selectMaterial.vue","lodash-es"],y):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopAddSetMeal=y(e.ShopAddSetMealContext.Vue,e.ShopAddSetMealContext.VueRouter,e.ShopAddSetMealContext.QChooseGoodsPopup,e.ShopAddSetMealContext.ElementPlus,e.ShopAddSetMealContext.UseConvert,e.ShopAddSetMealContext.Request,e.ShopAddSetMealContext.DateUtil,e.ShopAddSetMealContext.ShopInfoStore,e.ShopAddSetMealContext.selectMaterial,e.ShopAddSetMealContext.Lodash))})(this,function(e,y,Q,T,W,Z,re,v,ie,ee){"use strict";var te=document.createElement("style");te.textContent=`@charset "UTF-8";.com[data-v-df180bb7]{display:flex;justify-content:center;align-items:center}.com__pic[data-v-df180bb7]{width:62px;height:62px}.com__name[data-v-df180bb7]{font-size:14px;display:flex;align-items:center;flex-direction:column;justify-content:center;margin-left:10px;align-items:baseline}.com__name--text[data-v-df180bb7]{width:113px;height:50px;line-height:24px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.flex[data-v-df180bb7]{display:flex;justify-content:space-around;align-items:center}[data-v-df180bb7].el-table .cell{line-height:20px}.add[data-v-a326f3b0]{scrollbar-width:none;-ms-overflow-style:none;height:100%;position:relative;display:flex;flex-direction:column;overflow-y:scroll;padding:40px 40px 0}.add[data-v-a326f3b0]::-webkit-scrollbar{display:none}.add .position_tool[data-v-a326f3b0]{margin-top:auto;width:calc(100% + 80px);align-items:center;position:sticky;bottom:0;padding:15px 0;display:flex;justify-content:center;box-shadow:0 0 10px #d5d5d5;background-color:#fff;transform:translate(-40px);z-index:100}.bargaining_amount[data-v-a326f3b0]{position:relative;width:100%}.bargaining_amount__description[data-v-a326f3b0]{position:absolute;top:-35px;right:0;width:480px}.title[data-v-a326f3b0]{font-size:14px;color:#606266;font-weight:700;margin-bottom:40px}.msg[data-v-a326f3b0]{font-size:12px;margin-left:12px;color:#c4c4c4}.use_discount[data-v-a326f3b0]{display:flex;width:100%}.discount_msg[data-v-a326f3b0]{display:inline-block;width:400px;flex:1}.rules[data-v-a326f3b0]{display:flex;margin-top:10px;height:50px}.period-validity[data-v-a326f3b0]{width:300px;display:flex}.text[data-v-a326f3b0]{font-size:14px;color:#333}.goodsData[data-v-a326f3b0]{border:1px solid #ccc}.goods-list[data-v-a326f3b0]{width:90%;margin-top:20px;height:300px;border:1px solid transparent}.goods-list__info[data-v-a326f3b0]{display:flex}.goods-list__goods-list__info-name[data-v-a326f3b0]{display:flex;flex-direction:column;justify-content:space-around;align-items:flex-start;padding:0 16px}.goods-list__goods-list__info-name--name[data-v-a326f3b0]{width:462px;font-size:14px;color:#2e99f3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.goods-list__goods-list__info-name--price[data-v-a326f3b0]{font-size:14px;text-align:LEFT;color:#f12f22}.goods-list__goods-list__info-name--price[data-v-a326f3b0]:before{content:"￥";font-size:12px;text-align:LEFT;color:#f12f22}.my-header[data-v-a326f3b0]{font-size:16px}.ruleform-date[data-v-a326f3b0]{width:100%;display:flex;align-items:center}.flex[data-v-a326f3b0]{margin-top:10px;height:50px}.flex-item[data-v-a326f3b0]{width:40%}.coupon-rules[data-v-a326f3b0]{height:60px;display:flex;justify-content:center;align-items:center}.nav-button[data-v-a326f3b0]{position:fixed;left:50%;bottom:30px}.selectMaterialStyle[data-v-a326f3b0]{width:100px;height:100px;border-radius:5px;overflow:hidden;border:1px dashed #ccc;cursor:pointer;display:flex;justify-content:center;align-items:center}.selectMaterialStyle__span[data-v-a326f3b0]{color:#999;font-size:20px}
`,document.head.appendChild(te);const de={class:"com"},se={class:"com__name"},ce={class:"com__name--text",style:{"margin-top":"5px"}},pe={class:"flex"},ue={class:"dialog-footer"},me=e.defineComponent({__name:"select-goods-table",props:{productList:{type:Array,default(){return[]}},isEdit:{type:Boolean,default:!1},flatGoodList:{type:Array,default(){return[]}},productAttributes:{type:String,default:"MAIN_PRODUCT"}},setup(V,{expose:_}){const b=V,{divTenThousand:w,mulTenThousand:k}=W(),h=e.ref([]),x=e.ref(!1);e.watch(()=>b.productList,o=>{console.log("表格变化",o);const n=U(o);console.log("flatGoodList",n),h.value=I(n)},{deep:!0}),e.watch(()=>b.flatGoodList,o=>{h.value=I(o)});function N(o){return o.skuItem.stockType==="LIMITED"?Number(o.skuItem.skuStock):1e5}function S(o){return w(o.skuItem.skuPrice).toNumber()}function U(o,n){if(!o.length)return[];const m=[];return o.forEach(d=>{d.skuIds.forEach((f,c)=>{(d.stocks[c]>0&&d.stockTypes[c]==="LIMITED"||d.stockTypes[c]==="UNLIMITED")&&m.push({productId:d.productId,productName:d.productName,productPic:d.pic,shopId:d.shopId,skuItem:{productId:d.productId,skuId:f,skuName:d.specs[c],skuPrice:d.salePrices[c],skuStock:d.stocks[c],stockType:d.stockTypes[c]},rowTag:0,matchingStock:1,isJoin:!0,matchingPrice:.01})})}),m}function I(o,n){let m=0,d=o.length;for(let f=0;f<d;f++){const c=o[f];f===0&&(c.rowTag=1,m=0),f!==0&&(c.productId===o[f-1].productId?(c.rowTag=0,o[m].rowTag=o[m].rowTag+1):(c.rowTag=1,m=f))}return o}const l=({row:o,column:n,rowIndex:m,columnIndex:d})=>{if(d===0)return{rowspan:o.rowTag,colspan:o.rowTag?1:0}};function u(o){return o.stockType==="UNLIMITED"?"无限库存":`${"库存"+o.skuStock}`}function F(){return e.toRaw(h.value).filter(n=>n.isJoin).map(n=>{const{setMealId:m,productId:d,productPic:f,matchingPrice:c,productName:R,matchingStock:B,shopId:i,skuItem:{skuId:M,skuStock:H,skuPrice:z,skuName:j,stockType:J}}=n;return{setMealId:m||"",shopId:i,productId:d,productPic:f,productName:R,productAttributes:b.productAttributes,skuId:M,skuName:j,skuStock:+H,skuPrice:z,stockType:J,matchingPrice:k(c).toString(),matchingStock:B}})}function P(){let o=!0;const n=h.value;if(!n.length)T.ElMessage.warning("请选择商品"),o=!1;else for(let m=0;m<n.length;m++)if(n[m].isJoin&&!n[m].matchingStock){T.ElMessage.warning("商品库存必须大于零"),o=!1;break}return o}const g=e.ref({stock:1,price:.01}),E=e.ref("0"),A=o=>{E.value=o.productId,x.value=!0},q=()=>{g.value={stock:1,price:.01},x.value=!1},L=()=>{h.value.forEach(o=>{o.productId===E.value&&(o.matchingStock=g.value.stock>N(o)?N(o):g.value.stock,o.matchingPrice=g.value.price>S(o)?S(o):g.value.price)}),x.value=!1};return _({getProduct:F,validateProduct:P}),(o,n)=>{const m=e.resolveComponent("el-image"),d=e.resolveComponent("el-button"),f=e.resolveComponent("el-table-column"),c=e.resolveComponent("el-input-number"),R=e.resolveComponent("el-table"),B=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(R,{data:h.value,"max-height":500,"span-method":l},{default:e.withCtx(()=>[e.createVNode(f,{label:"商品信息",width:"215"},{default:e.withCtx(({row:i})=>[e.createElementVNode("div",de,[e.createVNode(m,{src:i.productPic,class:"com__pic"},null,8,["src"]),e.createElementVNode("div",se,[b.isEdit?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(d,{key:0,class:"com__batch",type:"primary",link:"",onClick:M=>A(i)},{default:e.withCtx(()=>n[4]||(n[4]=[e.createTextVNode(" 批量设置 ")])),_:2},1032,["onClick"])),e.createElementVNode("div",ce,e.toDisplayString(i.productName),1)])])]),_:1}),e.createVNode(f,{label:"规格"},{default:e.withCtx(({row:i})=>[e.createTextVNode(e.toDisplayString(i.skuItem.skuName),1)]),_:1}),e.createVNode(f,{label:"套餐库存"},{default:e.withCtx(({row:i})=>[e.createElementVNode("div",null,[e.createVNode(c,{controls:!1,disabled:b.isEdit,max:N(i),min:0,"model-value":+i.matchingStock,precision:0,style:{width:"80px"},"onUpdate:modelValue":M=>i.matchingStock=M},null,8,["disabled","max","model-value","onUpdate:modelValue"])]),e.createElementVNode("div",null,e.toDisplayString(u(i.skuItem)),1)]),_:1}),e.createVNode(f,{label:"套餐价（元）"},{default:e.withCtx(({row:i})=>[e.createElementVNode("div",null,[e.createVNode(c,{controls:!1,disabled:b.isEdit,max:S(i),min:.01,"model-value":+i.matchingPrice,precision:2,style:{width:"80px"},"onUpdate:modelValue":M=>i.matchingPrice=M},null,8,["disabled","max","model-value","onUpdate:modelValue"])]),e.createElementVNode("div",null,"销售价"+e.toDisplayString(S(i)),1)]),_:1})]),_:1},8,["data"]),e.createVNode(B,{modelValue:x.value,"onUpdate:modelValue":n[3]||(n[3]=i=>x.value=i),title:"批量设置",width:"500","destroy-on-close":"",center:"",top:"30vh",onClose:q},{footer:e.withCtx(()=>[e.createElementVNode("div",ue,[e.createVNode(d,{onClick:n[2]||(n[2]=i=>x.value=!1)},{default:e.withCtx(()=>n[7]||(n[7]=[e.createTextVNode("取消")])),_:1}),e.createVNode(d,{type:"primary",onClick:L},{default:e.withCtx(()=>n[8]||(n[8]=[e.createTextVNode(" 确定 ")])),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("div",pe,[n[5]||(n[5]=e.createTextVNode(" 套餐库存 ")),e.createVNode(c,{modelValue:g.value.stock,"onUpdate:modelValue":n[0]||(n[0]=i=>g.value.stock=i),precision:0,controls:!1,min:0,onChange:o.handleChange},null,8,["modelValue","onChange"]),n[6]||(n[6]=e.createTextVNode(" 套餐价 ")),e.createVNode(c,{modelValue:g.value.price,"onUpdate:modelValue":n[1]||(n[1]=i=>g.value.price=i),precision:2,controls:!1,min:.01,onChange:o.handleChange},null,8,["modelValue","onChange"])])]),_:1},8,["modelValue"])])}}}),Pe="",oe=(V,_)=>{const b=V.__vccOpts||V;for(const[w,k]of _)b[w]=k;return b},ae=oe(me,[["__scopeId","data-v-df180bb7"]]),le="addon-matching-treasure/setMeal",fe=V=>Z.post({url:le,data:V}),ge=(V,_)=>Z.get({url:`${le}/${V}/${_}`}),be={class:"add"},he={class:"ruleform-date"},xe=["src"],Ve={class:"use_discount"},Me={class:"position_tool"},_e=e.defineComponent({__name:"ShopAddSetMeal",setup(V){const _=y.useRouter(),b=y.useRoute(),w=new re,k=e.ref(),h=e.ref(),x=e.ref(),N=e.ref(),S=e.reactive({form:{setMealId:"",shopId:"",shopName:v.useShopInfoStore().shopInfo.name,setMealName:"",setMealDescription:"",setMealMainPicture:"",setMealType:"FIXED_COMBINATION",setMealStatus:"NOT_STARTED",startTime:"",endTime:"",stackable:{coupon:!1,vip:!1,full:!1},mainProduct:[],matchingProducts:[],distributionMode:""},isEditDisable:!1,fullReductionTime:[],rules:{setMealName:[{required:!0,message:"请输入套餐名称",trigger:"blur"}],setMealDescription:[{required:!0,message:"请输入套餐描述",trigger:"blur"}],product:[{required:!0,message:"请选择商品",trigger:["blur","change"]}],startTime:[{required:!0,message:"请选择开始日期",trigger:["blur","change"]},{validator:z,trigger:["blur","change"]}],endTime:[{required:!0,message:"请选择结束日期",trigger:["blur","change"]},{validator:j,trigger:["blur","change"]}],setMealMainPicture:[{required:!0,message:"请添加套餐主图",trigger:["blur","change"]}],setMealType:[{required:!0,message:"请选择套餐类型",trigger:["blur","change"]}]},flatMainGoodList:[],flatMatchingGoodList:[],choosedMainGoods:[],choosedMatchingGoods:[],choosedMainGoodsPopup:!1,choosedMatchingGoodsPopup:!1}),U=e.reactive({maxPrice:"",minPrice:"",keyword:"",categoryFirstId:"",excludeProductIds:[]}),I=e.reactive({maxPrice:"",minPrice:"",keyword:"",categoryFirstId:"",excludeProductIds:[]}),{form:l,isEditDisable:u,rules:F,choosedMainGoodsPopup:P,choosedMatchingGoodsPopup:g,choosedMainGoods:E,choosedMatchingGoods:A,flatMainGoodList:q,flatMatchingGoodList:L}=e.toRefs(S),o=e.ref(),{divTenThousand:n}=W();m();async function m(a=b.query){if(u.value=!!a.isLookUp,a.shopId&&a.setMealId){const{code:t,data:s,msg:p}=await ge(a.shopId,a.setMealId);if(t!==200)return T.ElMessage.error(p||"获取活动详情失败");l.value=s,q.value=d(s.mainProduct),L.value=d(s.matchingProducts)}}function d(a){return a.map(t=>{const{productId:s,shopId:p,skuPrice:D,productPic:O,productName:C,skuId:$,skuStock:G,stockType:K,skuName:r,setMealId:Te,matchingPrice:we,matchingStock:Se,productAttributes:Ie}=t;return{isJoin:!0,productId:s,shopId:p,productName:C,productPic:O,setMealId:Te,matchingPrice:n(we).toString(),matchingStock:Se,productAttributes:Ie,skuItem:{productId:s,skuId:$,skuName:r,skuPrice:D,skuStock:G,stockType:K}}})}const f=async()=>{if(!(!o.value||!await o.value.validate())&&!(!k.value&&!h.value)&&k.value.validateProduct()&&h.value.validateProduct()){l.value.mainProduct=k.value.getProduct(),l.value.matchingProducts=h.value.getProduct();const{code:t,data:s,msg:p}=await fe(l.value);if(t===200)return c();T.ElMessage.error(p||"添加活动失败")}};function c(){T.ElMessage.success("添加活动成功"),_.push({name:"bundlePriceIndex",query:{flag:"true"}})}const R=a=>{U.excludeProductIds=a.tempGoods.map(t=>t.productId),A.value=ee.cloneDeep(a.tempGoods),x.value.retrieveCommodity()},B=a=>{console.log(a.tempGoods),I.excludeProductIds=[a.tempGoods[0].productId],E.value=ee.cloneDeep(a.tempGoods),N.value.retrieveCommodity()};function i(a){const t=w.getYMD(new Date),s=w.getYMD(a);return t===s?!1:new Date().getTime()>a.getTime()}const M=async a=>l.value.distributionMode?H(a):T.ElMessage.error({message:"请先选择配送方式"});function H(a){if(a==="main"){P.value=!0;return}g.value=!0}function z(a,t,s){t?t&&l.value.endTime?Y(new Date(l.value.endTime).getTime(),s,"开始日期和结束日期最少间隔5分钟",new Date(t).getTime(),1e3*60*5):Y(new Date(t).getTime(),s,"开始日期必须是一个将来的时间",new Date().getTime(),1e3):s(new Error("请选择活动开始日期"))}function j(a,t,s){t?t&&l.value.startTime?Y(new Date(t).getTime(),s,"开始日期和结束日期最少间隔5分钟",new Date(l.value.startTime).getTime(),1e3*60*5):Y(new Date(t).getTime(),s,"结束日期最少大当前时间5分钟",new Date().getTime()+1e3,1e3*60*5):s(new Error("请选择活动结束日期"))}function J(a,t=new Date().getTime()){const s=a-t;return(p=1e3)=>s>=p}function Y(a,t,s,p,D){J(a,p)(D)?t():t(new Error(s))}const X=e.ref(!1),ke=a=>{X.value=a},ne=()=>{u.value||(X.value=!0)},Ne=a=>{l.value.setMealMainPicture=a},Ce=a=>{l.value.setMealMainPicture=(a==null?void 0:a.shift())||""},ye=()=>{L.value=[],A.value=[],q.value=[],E.value=[],x.value.allChecked=!1,N.value.allChecked=!1,x.value.handleGetAll(),N.value.handleGetAll()};return(a,t)=>{const s=e.resolveComponent("el-input"),p=e.resolveComponent("el-form-item"),D=e.resolveComponent("el-date-picker"),O=e.resolveComponent("el-checkbox"),C=e.resolveComponent("el-radio"),$=e.resolveComponent("el-radio-group"),G=e.resolveComponent("el-button"),K=e.resolveComponent("el-form");return e.openBlock(),e.createElementBlock("div",be,[t[31]||(t[31]=e.createElementVNode("h1",{class:"title"},"基本信息",-1)),e.createVNode(K,{ref_key:"ruleFormRef",ref:o,"inline-message":!1,model:e.unref(l),rules:e.unref(F),"label-position":"left","label-width":"auto"},{default:e.withCtx(()=>[e.createVNode(p,{label:"套餐名称",prop:"setMealName"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:e.unref(l).setMealName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.unref(l).setMealName=r),modelModifiers:{trim:!0},disabled:e.unref(u),maxlength:"10",placeholder:"限10个字",style:{width:"551px"}},null,8,["modelValue","disabled"])]),_:1}),e.createVNode(p,{label:"套餐描述",prop:"setMealDescription"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:e.unref(l).setMealDescription,"onUpdate:modelValue":t[1]||(t[1]=r=>e.unref(l).setMealDescription=r),modelModifiers:{trim:!0},disabled:e.unref(u),maxlength:"40",placeholder:"套餐描述不超过40个字",style:{width:"551px"}},null,8,["modelValue","disabled"])]),_:1}),e.createVNode(p,{label:"活动日期",required:""},{default:e.withCtx(()=>[e.createElementVNode("div",he,[e.createVNode(p,{"inline-message":!1,prop:"startTime"},{default:e.withCtx(()=>[e.createVNode(D,{modelValue:e.unref(l).startTime,"onUpdate:modelValue":t[2]||(t[2]=r=>e.unref(l).startTime=r),disabled:e.unref(u),"disabled-date":i,format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择开始时间",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","disabled"]),t[16]||(t[16]=e.createElementVNode("span",{style:{margin:"0 10px"}},"至",-1))]),_:1}),e.createVNode(p,{"inline-message":!1,prop:"endTime"},{default:e.withCtx(()=>[e.createVNode(D,{modelValue:e.unref(l).endTime,"onUpdate:modelValue":t[3]||(t[3]=r=>e.unref(l).endTime=r),disabled:e.unref(u),"disabled-date":i,format:"YYYY/MM/DD HH:mm:ss",placeholder:"请选择结束时间",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","disabled"])]),_:1})])]),_:1}),e.createVNode(p,{label:"套餐主图",prop:"setMealMainPicture"},{default:e.withCtx(()=>[e.unref(l).setMealMainPicture?(e.openBlock(),e.createElementBlock("img",{key:1,src:e.unref(l).setMealMainPicture,alt:"",class:"selectMaterialStyle",onClick:ne},null,8,xe)):(e.openBlock(),e.createElementBlock("div",{key:0,class:"selectMaterialStyle",onClick:ne},t[17]||(t[17]=[e.createElementVNode("span",{class:"selectMaterialStyle__span"},"+",-1)])))]),_:1}),e.createVNode(p,{label:"优惠叠加"},{default:e.withCtx(()=>[e.createElementVNode("div",Ve,[e.createVNode(O,{modelValue:e.unref(l).stackable.vip,"onUpdate:modelValue":t[4]||(t[4]=r=>e.unref(l).stackable.vip=r),disabled:e.unref(u),label:"会员价"},null,8,["modelValue","disabled"]),e.createVNode(O,{modelValue:e.unref(l).stackable.coupon,"onUpdate:modelValue":t[5]||(t[5]=r=>e.unref(l).stackable.coupon=r),disabled:e.unref(u),label:"优惠券"},null,8,["modelValue","disabled"]),e.createVNode(O,{modelValue:e.unref(l).stackable.full,"onUpdate:modelValue":t[6]||(t[6]=r=>e.unref(l).stackable.full=r),disabled:e.unref(u),label:"满减"},null,8,["modelValue","disabled"]),t[18]||(t[18]=e.createElementVNode("div",{class:"msg discount_msg"},[e.createTextVNode(" 优惠叠加可能导致实付金额为 "),e.createElementVNode("strong",{style:{color:"red"}},"0"),e.createTextVNode(" (实付金额 = 活动价 - 会员优惠 - 优惠券优惠 - 满减优惠) ")],-1))])]),_:1}),e.createVNode(p,{label:"套餐类型",prop:"setMealType"},{default:e.withCtx(()=>[e.createVNode($,{modelValue:e.unref(l).setMealType,"onUpdate:modelValue":t[7]||(t[7]=r=>e.unref(l).setMealType=r),disabled:e.unref(u),class:"ml-4"},{default:e.withCtx(()=>[e.createVNode(C,{value:"OPTIONAL_PRODUCT"},{default:e.withCtx(()=>t[19]||(t[19]=[e.createTextVNode("自选商品套餐")])),_:1}),e.createVNode(C,{value:"FIXED_COMBINATION"},{default:e.withCtx(()=>t[20]||(t[20]=[e.createTextVNode("固定套餐")])),_:1})]),_:1},8,["modelValue","disabled"]),t[21]||(t[21]=e.createElementVNode("span",{class:"msg"},"自选套餐：主商品+至少1种搭配商品以上 ；固定套餐：主商品+库存不为0的所有搭配商品各1件以上",-1))]),_:1}),e.createVNode(p,{label:"配送方式",prop:"distributionMode",required:""},{default:e.withCtx(()=>[e.createVNode($,{modelValue:e.unref(l).distributionMode,"onUpdate:modelValue":t[8]||(t[8]=r=>e.unref(l).distributionMode=r),class:"ml-4",disabled:e.unref(u),onChange:ye},{default:e.withCtx(()=>{var r;return[e.createVNode(C,{value:"EXPRESS"},{default:e.withCtx(()=>t[22]||(t[22]=[e.createTextVNode("快递配送")])),_:1}),e.createVNode(C,{value:"INTRA_CITY_DISTRIBUTION"},{default:e.withCtx(()=>t[23]||(t[23]=[e.createTextVNode("同城配送")])),_:1}),e.createVNode(C,{value:"SHOP_STORE"},{default:e.withCtx(()=>t[24]||(t[24]=[e.createTextVNode("到店自提")])),_:1}),((r=e.unref(v.useShopInfoStore)().shopInfo)==null?void 0:r.mode)!=="O2O"?(e.openBlock(),e.createBlock(C,{key:0,value:"VIRTUAL"},{default:e.withCtx(()=>t[25]||(t[25]=[e.createTextVNode("虚拟配送")])),_:1})):e.createCommentVNode("",!0)]}),_:1},8,["modelValue","disabled"])]),_:1}),e.createVNode(p,{label:"主商品(限1种商品)",required:""},{default:e.withCtx(()=>[e.createVNode(G,{disabled:e.unref(u),plain:"",round:"",type:"primary",onClick:t[9]||(t[9]=r=>M("main"))},{default:e.withCtx(()=>t[26]||(t[26]=[e.createTextVNode(" 选择商品 ")])),_:1},8,["disabled"]),t[27]||(t[27]=e.createElementVNode("span",{class:"msg"},"主商品：必买商品，此商品详情页展示搭配套餐 搭配商品：用户选择购买",-1))]),_:1})]),_:1},8,["model","rules"]),e.createVNode(ae,{ref_key:"selectMainGoodsTableRef",ref:k,flatGoodList:e.unref(q),isEdit:e.unref(u),productList:e.unref(E),style:{"margin-bottom":"20px"}},null,8,["flatGoodList","isEdit","productList"]),e.createVNode(p,{label:"搭配商品（限4种）",required:""},{default:e.withCtx(()=>[e.createVNode(G,{disabled:e.unref(u),plain:"",round:"",type:"primary",onClick:t[10]||(t[10]=r=>M("matching"))},{default:e.withCtx(()=>t[28]||(t[28]=[e.createTextVNode(" 选择商品 ")])),_:1},8,["disabled"]),t[29]||(t[29]=e.createElementVNode("span",{class:"msg"},"是否参与：SKU的粒度设置商品是否参与活动，是(默认)则参与活动，反则否",-1))]),_:1}),e.createVNode(ae,{ref_key:"selectMatchingGoodsTableRef",ref:h,flatGoodList:e.unref(L),isEdit:e.unref(u),productList:e.unref(A),productAttributes:"MATCHING_PRODUCTS"},null,8,["flatGoodList","isEdit","productList"]),e.createElementVNode("div",Me,[e.createVNode(G,{plain:"",round:"",onClick:t[11]||(t[11]=r=>e.unref(_).back())},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(u)?"返回":"取消"),1)]),_:1}),e.unref(u)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(G,{key:0,round:"",type:"primary",onClick:f},{default:e.withCtx(()=>t[30]||(t[30]=[e.createTextVNode("确定")])),_:1}))]),e.createVNode(Q,{ref_key:"choosedMainGoodsRef",ref:x,modelValue:e.unref(P),"onUpdate:modelValue":t[12]||(t[12]=r=>e.isRef(P)?P.value=r:null),searchParam:U,"onUpdate:searchParam":t[13]||(t[13]=r=>U=r),searchConsignmentProduct:!0,distributionMode:e.unref(l).distributionMode,quota:1,onOnConfirm:B},null,8,["modelValue","searchParam","distributionMode"]),e.createVNode(Q,{ref_key:"choosedMatchingGoodsRef",ref:N,modelValue:e.unref(g),"onUpdate:modelValue":t[14]||(t[14]=r=>e.isRef(g)?g.value=r:null),searchParam:I,"onUpdate:searchParam":t[15]||(t[15]=r=>I=r),searchConsignmentProduct:!0,distributionMode:e.unref(l).distributionMode,quota:4,onOnConfirm:R},null,8,["modelValue","searchParam","distributionMode"]),e.createVNode(ie,{"dialog-visible":X.value,"upload-files":1,onSelectMaterialFn:ke,onCroppedFileChange:Ne,onCheckedFileLists:Ce},null,8,["dialog-visible"])])}}}),Ee="";return oe(_e,[["__scopeId","data-v-a326f3b0"]])});
