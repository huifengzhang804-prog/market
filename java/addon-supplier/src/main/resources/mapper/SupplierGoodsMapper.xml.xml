<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.medusa.gruul.addon.supplier.mp.mapper.SupplierStorageRecordMapper">

  <select id="queryHasProductStorageOrder" resultType="java.lang.String">
    SELECT  r.order_no
    FROM t_supplier_storage_record r
           JOIN JSON_TABLE(r.sku_records, '$[*]' COLUMNS (value INT PATH '$.value')) AS jt
    WHERE jt.value >0 and r.order_no IN
    <foreach collection="orderNos" item="orderNo" open="(" separator="," close=")">
      #{orderNo}
    </foreach>

  </select>
</mapper>
