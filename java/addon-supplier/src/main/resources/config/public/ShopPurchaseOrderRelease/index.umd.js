(function(e,j){typeof exports=="object"&&typeof module<"u"?module.exports=j(require("vue"),require("vue-router"),require("lodash-es"),require("@/composables/useConvert"),require("element-plus"),require("@element-plus/icons-vue"),require("@/components/q-upload/q-upload.vue"),require("@/q-plugin/cityDistribution/CityDistributionCheckbox.vue"),require("@/q-plugin/freight/FreightCheckBox.vue"),require("@/store/modules/shopInfo"),require("@/apis/upload"),require("@/components/element-plus-table-drag/drag-table.vue"),require("vue-draggable-next"),require("@/apis/http"),require("@/components/q-edit/q-edit.vue"),require("@/assets/images/ex_img.png")):typeof define=="function"&&define.amd?define(["vue","vue-router","lodash-es","@/composables/useConvert","element-plus","@element-plus/icons-vue","@/components/q-upload/q-upload.vue","@/q-plugin/cityDistribution/CityDistributionCheckbox.vue","@/q-plugin/freight/FreightCheckBox.vue","@/store/modules/shopInfo","@/apis/upload","@/components/element-plus-table-drag/drag-table.vue","vue-draggable-next","@/apis/http","@/components/q-edit/q-edit.vue","@/assets/images/ex_img.png"],j):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopPurchaseOrderRelease=j(e.ShopPurchaseOrderReleaseContext.Vue,e.ShopPurchaseOrderReleaseContext.VueRouter,e.ShopPurchaseOrderReleaseContext.Lodash,e.ShopPurchaseOrderReleaseContext.UseConvert,e.ShopPurchaseOrderReleaseContext.ElementPlus,e.ShopPurchaseOrderReleaseContext.ElementPlusIconsVue,e.ShopPurchaseOrderReleaseContext.QUpload,e.ShopPurchaseOrderReleaseContext.CityDistributionCheckbox,e.ShopPurchaseOrderReleaseContext.FreightCheckBox,e.ShopPurchaseOrderReleaseContext.ShopInfoStore,e.ShopPurchaseOrderReleaseContext.UploadAPI,e.ShopPurchaseOrderReleaseContext.dragTable,e.ShopPurchaseOrderReleaseContext.VueDraggableNext,e.ShopPurchaseOrderReleaseContext.Request,e.ShopPurchaseOrderReleaseContext.QEdit,e.ShopPurchaseOrderReleaseContext.exampleImg))})(this,function(e,j,oe,le,R,Z,Q,_e,ge,ne,he,ae,se,z,xe,be){"use strict";var ie=document.createElement("style");ie.textContent=`@charset "UTF-8";.navLine[data-v-4688013e]{margin:25px 0;height:40px;line-height:40px;background-color:#f8f8f8;padding-left:15px;font-weight:700}.release .scroll[data-v-4688013e]{overflow-y:scroll;padding:30px 16px 10px}.release__step[data-v-4688013e]{width:100%;margin:0 auto;position:sticky;top:0;padding-top:16px;background:white;z-index:100;padding-bottom:10px}.release__tool[data-v-4688013e]{align-items:center;position:sticky;bottom:0;padding:15px 0;display:flex;justify-content:center;box-shadow:0 0 10px #d5d5d5;background-color:#fff;z-index:100;margin-top:auto}[data-v-4688013e] .el-step__head.is-process{color:#fff}[data-v-4688013e] .el-step__head.is-process .el-step__icon.is-text{background-color:#4b80ff;border-color:#4b80ff}[data-v-4688013e] .el-step__title.is-process{font-weight:400}[data-v-4688013e] .el-step__title.is-finish{color:var(--el-text-color-primary)}[data-v-4688013e] .el-step__head.is-finish{color:#fff}[data-v-4688013e] .el-step__head.is-finish .el-step__icon.is-text{background-color:#4b80ff;border-color:#4b80ff}[data-v-4688013e] .el-step__head.is-wait{color:#fff}[data-v-4688013e] .el-step__head.is-wait .el-step__icon.is-text{background-color:#d7dce4;border-color:#d7dce4}[data-v-4688013e] .el-step.is-center .el-step__line{left:65%;right:-30%}.title[data-v-11ef647c]{display:flex;justify-content:flex-start;align-items:center}.title__release[data-v-11ef647c]{height:20px;color:#333;font-size:16px;line-height:20px;border-left:4px solid #4b80ff;padding-left:8px}[data-v-f38bdf74] .el-tag__content{max-width:214px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.norm[data-v-f38bdf74]{font-size:14px;margin:20px 0;display:flex;justify-content:"flex-start";align-items:"flex-start"}.norm__title[data-v-f38bdf74]{margin:0 20px 0 30px}.norm__item[data-v-f38bdf74]{color:#606266}.norm__item__name[data-v-f38bdf74]{display:flex}.norm__item__name--del[data-v-f38bdf74]{margin-left:10px}.norm__item__value[data-v-f38bdf74]{display:flex;justify-content:"flex-start";align-items:center}.norm__item__value--mg34[data-v-f38bdf74]{margin-right:34px}.norm__item__value__content[data-v-f38bdf74]{display:flex;justify-content:center;align-items:center;margin:20px 0;cursor:move}.specDetail[data-v-f38bdf74]{font-size:14px;text-align:center;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table[data-v-f38bdf74]{width:800px;display:flex;flex-direction:column;overflow-x:auto;background:#fcfcfc}.specDetail__title[data-v-f38bdf74]{margin:0 30px}.specDetail__table__title[data-v-f38bdf74]{line-height:50px;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__title--primary[data-v-f38bdf74]{flex-shrink:0;width:150px}.specDetail__table__title--custom[data-v-f38bdf74]{flex-shrink:0;width:100px}.specDetail__table__title--header[data-v-f38bdf74]{display:flex;justify-content:center;align-items:center;flex-shrink:0}.specDetail__table__item[data-v-f38bdf74]{display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__item--font[data-v-f38bdf74]{flex-shrink:0;width:100px;line-height:70px;color:#606266}.specDetail__table__item--input[data-v-f38bdf74]{flex-shrink:0;width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item--input>.el-input[data-v-f38bdf74]{width:80%}.specDetail__table__item--input>.el-input__inner[data-v-f38bdf74]{width:80%}.specDetail__table__item--upload[data-v-f38bdf74]{width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item .el-form-item--small.el-form-item[data-v-f38bdf74]{margin:0!important}.batch[data-v-f38bdf74]{margin:30px;display:flex;justify-content:flex-start;align-items:center}.batch__list[data-v-f38bdf74]{display:flex;justify-content:flex-start;align-items:center;cursor:pointer;color:#409eff;margin-left:20px}.batch__list-item[data-v-f38bdf74]{display:flex;justify-content:center;align-items:center;margin-right:10px}.com__input--width[data-v-f38bdf74]{width:500px}.serveMsg[data-v-f38bdf74]{width:400px;display:flex}.FreightTemplateChoose[data-v-f38bdf74]{position:absolute}.inputWidth[data-v-f38bdf74]{width:calc(100% - 120px)}.com__attr[data-v-f38bdf74]{margin-top:10px;width:620px;padding:20px;border:1px solid #d7d7d7}.com__attr-header[data-v-f38bdf74]{display:flex;justify-content:space-between;align-items:center}.com__attr-content[data-v-f38bdf74]{display:flex;justify-content:space-between;align-items:center;margin:10px 0}.com__attr-input[data-v-f38bdf74]{width:230px}.com__attr-del[data-v-f38bdf74]{color:red}.com__imgText[data-v-f38bdf74]{position:absolute;right:0;bottom:0;font-size:12px;text-align:center;width:100%;background-color:#0000004d;border-radius:0 0 6px 6px;color:#fff}.goodsType .title[data-v-f38bdf74]{font-weight:400;font-size:16px;margin-bottom:20px}.goodsType .is-active .title[data-v-f38bdf74]{font-weight:700}.el-link.is-disabled[data-v-f38bdf74]{color:#999}.mleft-form-item .el-form-item__content{padding-left:100px}.el-popper.is-effect-tooltip{background-color:#fff;color:#9d9d9d;box-shadow:0 0 10px #00000026}.el-popper.is-effect-tooltip .el-popper__arrow:before{background:#fff;right:0}.goodsType .el-radio-button__original-radio:checked+.el-radio-button__inner{color:#333;background-color:unset}.goodsType .el-radio-button__inner{padding:20px 40px}.avatar-uploader .el-upload{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:var(--el-transition-duration-fast)}.main-uploader .el-upload{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;width:100px;height:100px;transition:var(--el-transition-duration-fast)}.avatar-uploader .el-upload:hover,.main-uploader .el-upload:hover{border-color:var(--el-color-primary)}.el-icon.avatar-uploader-icon{font-size:28px;color:#8c939d;width:250px;height:120px;text-align:center}.el-icon.main-uploader-icon{font-size:28px;color:#8c939d;width:100px;height:100px;text-align:center}.norm__list[data-v-a708f5c4]{padding-bottom:30px}.el-row[data-v-a708f5c4]{padding:15px;background-color:#f8f8f8}.norm__item__name--left[data-v-a708f5c4]{display:flex}.norm__item__name--left>.el-form-item--small.el-form-item[data-v-a708f5c4]{margin:0!important}.button-new-tag[data-v-a708f5c4]{margin-left:10px!important;height:32px;line-height:30px;padding-top:0;padding-bottom:0;margin-top:0!important}.el-tag[data-v-a708f5c4]{margin-bottom:10px}.el-tag+.el-tag[data-v-a708f5c4]{margin-left:10px}.norm__item__value__content[data-v-a708f5c4],.el-form-item[data-v-a708f5c4]{margin:0 9px}.norm__item__value__content[data-v-a708f5c4]{justify-content:start}.el-button[data-v-a708f5c4]{margin:10px 9px}.input-new-tag[data-v-a708f5c4]{width:90px;margin-left:10px;vertical-align:bottom}.avatar-uploader .avatar[data-v-4a049eb7]{width:150px;height:50px;display:block}.avatar-uploader .el-upload[data-v-4a049eb7]{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:var(--el-transition-duration-fast)}.avatar-uploader .el-upload[data-v-4a049eb7]:hover{border-color:var(--el-color-primary)}.el-icon.avatar-uploader-icon[data-v-4a049eb7]{font-size:28px;color:#8c939d;width:50px;height:50px;text-align:center;border:1px dashed #ccc;border-radius:10px}.input-group[data-v-4a049eb7]{display:flex;align-items:center}.input-group__prefix[data-v-4a049eb7]{background-color:#f7f7f7;height:32px;line-height:32px;padding:0 9px;border:1px solid #dcdfe6;border-radius:4px;display:inline-block}.table-container[data-v-4a049eb7]{padding-bottom:30px}[data-v-4a049eb7] .qupload{width:fit-content;margin:0 auto}.spac[data-v-3a7de3d4]{background-color:#f8f8f8;padding-top:1px}.spac .goodsAttribut[data-v-3a7de3d4]{background-color:#fff;padding:10px;border-radius:5px;margin-top:20px}.spac .goodsAttribut .title[data-v-3a7de3d4]{font-weight:700;background-color:#fff;padding:15px;margin:0 -10px}.spac .goodsAttribut .el-button[data-v-3a7de3d4]{margin:0 20px}.spac .goodsAttribut .line[data-v-3a7de3d4]{display:flex;align-items:center;margin:20px 0}.spac .goodsAttribut .line .item[data-v-3a7de3d4]{border:1px solid #bbbbbb;padding:5px;margin-right:7px;border-radius:3px}.spac .goodsAttribut .line .deleteItem[data-v-3a7de3d4]{cursor:pointer;font-weight:700}.spac .goodsAttribut .el-tag[data-v-3a7de3d4]{margin:5px}.norm{font-size:14px;margin:20px 0;display:flex;justify-content:"flex-start";align-items:"flex-start"}.norm__title{margin:0 20px 0 30px}.norm__item{color:#606266}.norm__item__name{display:flex}.norm__item__name--del{margin-left:10px}.norm__item__value{display:flex;justify-content:"flex-start";align-items:center}.norm__item__value--mg34{margin-right:34px}.norm__item__value__content{display:flex;justify-content:center;align-items:center;margin:20px 0;cursor:move}.specDetail{font-size:14px;text-align:center;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table{width:800px;display:flex;flex-direction:column;overflow-x:auto;background:#fcfcfc}.specDetail__title{margin:0 30px}.specDetail__table__title{line-height:50px;display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__title--primary{flex-shrink:0;width:150px}.specDetail__table__title--custom{flex-shrink:0;width:100px}.specDetail__table__title--header{display:flex;justify-content:center;align-items:center;flex-shrink:0}.specDetail__table__item{display:flex;justify-content:"flex-start";align-items:"flex-start"}.specDetail__table__item--font{flex-shrink:0;width:100px;line-height:70px;color:#606266}.specDetail__table__item--input{flex-shrink:0;width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item--input>.el-input{width:80%}.specDetail__table__item--input>.el-input__inner{width:80%}.specDetail__table__item--upload{width:150px;display:flex;justify-content:center;align-items:center}.specDetail__table__item .el-form-item--small.el-form-item{margin:0!important}.batch{margin:30px;display:flex;justify-content:flex-start;align-items:center}.batch__list{display:flex;justify-content:flex-start;align-items:center;cursor:pointer;color:#409eff;margin-left:20px}.batch__list-item{display:flex;justify-content:center;align-items:center;margin-right:10px}.com__input--width{width:500px}.serveMsg{width:400px;display:flex}.inputnumber{position:relative}.inputnumber__icon{width:34px;height:30px;position:absolute;right:1px;top:1px;background:#e6e8eb;color:#909399;text-align:center}.input_number .el-input__inner{text-align:left}.com__input--width{width:100%}.info[data-v-5c0ce97d]{display:flex}.info__edit[data-v-5c0ce97d]{border:1px solid #ccc;margin-top:18px;z-index:99}.info__edit[data-v-5c0ce97d] ::-webkit-scrollbar{display:none}
`,document.head.appendChild(ie);const ye=(p,T)=>z.get({url:`addon-supplier/supplier/order/publish/product/${p}`,params:{supplierId:T}}),Ve=(p,T,k=!1)=>z.get({url:`gruul-mall-storage/storage/shop/${p}/product/${T}?isSupplier=${k}`}),Ce=()=>z.get({url:"gruul-mall-addon-platform/platform/shop/signing/category/choosable/list"}),Ne=(p,T)=>z.get({url:"gruul-mall-freight/logistics/template/get/list",params:{current:p,size:T}}),ke=p=>z.post({url:"gruul-mall-goods/manager/product/issue",data:p}),de=p=>z.get({url:"gruul-mall-goods/manager/feature/list",params:p}),we=p=>z.get({url:"gruul-mall-goods/manager/supplier/list",params:p}),Ie=p=>z.get({url:"gruul-mall-goods/goods/product/category",params:p}),Te=()=>z.get({url:"addon-intra-city-distribution/intraCityDistribution/config"}),Be=p=>z.get({url:`gruul-mall-goods/goods/product/label/searchByShopType/${p}`,params:{size:1e3}}),Ee={class:"release fdc1 overh"},Se={class:"release__step"},Le={class:"fdc1 overh scroll"},Ae={class:"release__tool"},De=e.defineComponent({__name:"ShopPurchaseOrderRelease",props:{properties:{type:Object,default:()=>({})}},setup(p){const k=p.properties.VITE_BASE_URL,B=e.ref("NewBasicInfo"),L=j.useRoute(),w=j.useRouter(),{mulTenThousand:G}=le(),a=e.ref({name:"",saleDescribe:"",platformCategoryId:"",categoryId:"",providerId:"",labelId:"",widePic:"",distributionMode:[],videoUrl:"",albumPics:"",productType:"REAL_PRODUCT",specGroups:[],platformCategory:{one:null,two:null,three:null},shopCategory:{one:null,two:null,three:null},skus:[{id:"",image:"",initSalesVolume:0,limitNum:0,limitType:"UNLIMITED",price:0,productId:"",initStock:0,salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0,specs:[]}],productParameters:[],productAttributes:[],serviceIds:[],detail:"",freightTemplateId:"0",status:"SELL_ON",brandId:"",sellType:"PURCHASE"}),s=e.ref([]),U=e.ref(""),m=e.ref(""),D=e.ref("");e.provide("form",{submitForm:a,commodityImgList:s,copyGoodsJD:D,copyGoodsAL:m,copyGoodsTB:U});const _=e.ref(),y={NewBasicInfo:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Je)),NewSaleInfo:e.defineAsyncComponent(()=>Promise.resolve().then(()=>gt)),NewProductInfo:e.defineAsyncComponent(()=>Promise.resolve().then(()=>Vt))},f={NewBasicInfo:{prev:"",next:"NewSaleInfo",stepIndex:0},NewSaleInfo:{prev:"NewBasicInfo",next:"NewProductInfo",stepIndex:1},NewProductInfo:{prev:"NewSaleInfo",next:"",stepIndex:2}},l=[];j.onBeforeRouteLeave((c,P,E)=>{["/goods/category","/goods/supplier","/goods/attribute","/freight/logistics","/goods/purchase"].includes(c.path)||(a.value={name:"",saleDescribe:"",platformCategoryId:"",categoryId:"",labelId:"",providerId:"",distributionMode:[],productType:"REAL_PRODUCT",widePic:"",videoUrl:"",albumPics:"",specGroups:[],platformCategory:{one:null,two:null,three:null},shopCategory:{one:null,two:null,three:null},skus:[{id:"",image:"",initSalesVolume:0,limitNum:0,limitType:"UNLIMITED",price:0,productId:"",initStock:0,salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0,specs:[]}],productParameters:[],productAttributes:[],serviceIds:[],detail:"",freightTemplateId:"0",status:"SELL_ON",brandId:"",sellType:"PURCHASE"},s.value=[],D.value="",m.value="",U.value="",B.value="NewBasicInfo"),E()});const i=e.computed(()=>f[B.value]),V=e.computed(()=>i.value.stepIndex),d=e.computed(()=>i.value.prev),C=e.computed(()=>i.value.next),r=()=>{l[V.value]||l.push(_.value)},t=()=>l[V.value]?l[V.value]:_.value,b=()=>{r(),B.value=d.value},I=async()=>{var P,E,W;let c=!0;if(C.value==="NewProductInfo"){const F=(P=t())==null?void 0:P.GoodOnlyRef.handleSpacObj();if(F){const{productAttribute:A,productParameter:Y}=F;a.value.productAttributes=A,a.value.productParameters=Y}a.value.specGroups.length!==0&&(c=n())}c&&((E=t())!=null&&E.currentFormRef)&&((W=t())==null?void 0:W.currentFormRef).validate(A=>{A&&(r(),B.value=C.value)})};function n(){const c=a.value.skus;if(c.length>0){const P=c.map(E=>E.price<=0?"请修改指导价且大于0":Number(E.salePrice)<=0?"请修改实售价且大于0":Number(E.salePrice)>Number(E.price)?"商品实售价大于指导价":"").filter(Boolean);if(P.length>0)return R.ElMessage.error(P[0]),!1}else return R.ElMessage.error("请完善商品规格信息"),!1;return!0}const h=()=>{w.replace("/goods/purchase")},u=async()=>{const c=oe.cloneDeep(a.value);Array.isArray(c.categoryId)&&(c.categoryId=c.categoryId[2]),Array.isArray(c.platformCategoryId)&&(c.platformCategoryId=c.platformCategoryId[2]),c.skus=c.skus.map(E=>(E.price=G(E.price).toNumber(),E.salePrice=G(E.salePrice).toNumber(),E)),c.specGroups.length===0&&(c.skus[0].image=c.albumPics.split(",")[0]),c.status="SELL_ON",c.supplierId=L.query.supplierId,c.sellType="PURCHASE",c.id=L.query.id,c.productType==="VIRTUAL_PRODUCT"&&(c.distributionMode=["VIRTUAL"]);const{code:P}=await ke(c);if(P!==200)return R.ElMessage.error("上传商品失败");R.ElMessage.success("上传成功"),l[0].resetServiceAssuranceList(),w.replace("/goods/purchase")};return(c,P)=>{var A,Y;const E=e.resolveComponent("el-step"),W=e.resolveComponent("el-steps"),F=e.resolveComponent("el-button");return e.openBlock(),e.createElementBlock("div",Ee,[e.createElementVNode("div",Se,[e.createVNode(W,{active:V.value,"align-center":""},{default:e.withCtx(()=>[e.createVNode(E,{title:"1.编辑基本信息"}),e.createVNode(E,{title:"2.编辑销售信息"}),e.createVNode(E,{title:"3.编辑商品信息"})]),_:1},8,["active"])]),e.createElementVNode("div",Le,[(e.openBlock(),e.createBlock(e.KeepAlive,{exclude:["NewProductInfoAddon"]},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(y[B.value]),{VITE_BASE_URL:e.unref(k),ref_key:"componentRef",ref:_},null,8,["VITE_BASE_URL"]))],1024))]),e.createElementVNode("div",Ae,[d.value!==""?(e.openBlock(),e.createBlock(F,{key:0,type:"primary",round:"",onClick:b},{default:e.withCtx(()=>P[0]||(P[0]=[e.createTextVNode("上一步")])),_:1})):e.createCommentVNode("",!0),C.value!==""?(e.openBlock(),e.createBlock(F,{key:1,type:"primary",round:"",onClick:I},{default:e.withCtx(()=>P[1]||(P[1]=[e.createTextVNode("下一步")])),_:1})):e.createCommentVNode("",!0),C.value===""&&((A=a.value)==null?void 0:A.status)==="PLATFORM_SELL_OFF"?(e.openBlock(),e.createBlock(F,{key:2,type:"primary",round:"",onClickOnce:h},{default:e.withCtx(()=>P[2]||(P[2]=[e.createTextVNode(" 返回 ")])),_:1})):e.createCommentVNode("",!0),C.value===""&&((Y=a.value)==null?void 0:Y.status)!=="PLATFORM_SELL_OFF"?(e.openBlock(),e.createBlock(F,{key:3,type:"primary",round:"",onClick:u},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L).query.id?"更新":"上架"),1)]),_:1})):e.createCommentVNode("",!0)])])}}}),Ut="",K=(p,T)=>{const k=p.__vccOpts||p;for(const[B,L]of T)k[B]=L;return k},Pe=K(De,[["__scopeId","data-v-4688013e"]]),Ue={class:"title"},Re={class:"title__release"},Me=e.defineComponent({__name:"ReleaseTitle",props:{title:{default:""}},setup(p){return(T,k)=>(e.openBlock(),e.createElementBlock("div",Ue,[e.createElementVNode("div",Re,e.toDisplayString(T.title),1),e.renderSlot(T.$slots,"default",{},void 0,!0)]))}}),Rt="",J=K(Me,[["__scopeId","data-v-11ef647c"]]),$e=[{name:"包邮",state:!1,text:"购买该商品无需支付运费",enum:"NO_FREIGHT"},{name:"7天退换",state:!1,text:"商家承诺7天无理由退换货",enum:"SEVEN_END_BACK"},{name:"48小时发货",state:!1,text:"商家承诺订单在48小时内发布",enum:"TWO_DAY_SEND"},{name:"假一赔十",state:!1,text:"若收到商品是假冒品牌，可获得十倍赔偿",enum:"FAKE_COMPENSATE"},{name:"正品保证",state:!1,text:"商家承诺商品正品质量",enum:"ALL_ENSURE"}],Oe=p=>{const T=e.ref($e);function k(){p.value.serviceIds=T.value.filter(w=>w.state).map(w=>w.enum)}function B(){p.value.serviceIds.length&&(T.value=T.value.map(w=>(p.value.serviceIds.includes(w.enum)&&(w.state=!0),w)))}return e.onActivated(()=>B()),{serviceAssuranceList:T,updateserviceIds:k,resetServiceAssuranceList:()=>{for(let w=0;w<T.value.length;w++)T.value[w].state=!1}}},qe=["src"],Fe={key:1,class:"com__imgText"},je={key:0},Ge={class:"serveMsg"},ze={style:{width:"120px"}},He={style:{color:"#c6c6c6"}},We=e.defineComponent({__name:"NewBasicInfo",props:{VITE_BASE_URL:{type:String,default:""}},setup(p,{expose:T}){const k=p,B=j.useRoute(),L=j.useRouter(),w=e.ref(),G=k.VITE_BASE_URL+"gruul-mall-carrier-pigeon/oss/upload",a=e.inject("form"),s=a.submitForm,U=e.ref([]),m=a.commodityImgList,D=e.ref([]),_=e.ref([]),y=e.ref([]),f=e.ref([]),l=e.ref(null),i=e.ref(null),V={expandTrigger:"hover",label:"name",value:"id"},d=e.reactive({name:[{required:!0,message:"请填写商品名称",trigger:"blur"}],categoryId:[{required:!0,message:"请选择店铺分类",trigger:"blur"}],albumPics:[{required:!0,message:"请添加商品主图",trigger:"blur"}],platformCategoryId:[{required:!0,message:"请选择平台分类",trigger:"change"}],distributionMode:[{required:!0,message:"请选择配送方式",trigger:"change",type:"array"}]}),C=ne.useShopInfoStore(),r=e.computed(()=>C.shopInfo.mode!=="O2O");e.onActivated(async()=>{L.options.history.state.forward!=="/freight/logistics?from=releaseGoods"&&await Ct(),Promise.all([A(),Y()]).then(()=>{ee("platformCategory").then(()=>{}),ee("shopCategory").then(()=>{})}),W(),wt(),F()}),e.onMounted(()=>{n()}),e.watch(s.value,(g,o)=>{Nt()},{immediate:!0});const{serviceAssuranceList:t,updateserviceIds:b,resetServiceAssuranceList:I}=Oe(s);async function n(){const{code:g,data:o}=await Ne(1,1e3);if(g!==200)return R.ElMessage.error("获取物流列表失败");U.value=o.records}const h=g=>{const o=["video/mp4"],O=g.size<5242880;return o.includes(g.type)?O?!0:(R.ElMessage.error("上传视频大小不超过5M!"),!1):(R.ElMessage.error("上传视频只能是 mp4 格式!"),!1)},u=(g,o)=>{s.value.videoUrl=g.data},c=(g,o)=>{m.value.push(g),s.value.albumPics=E(m)},P=g=>{m.value.splice(g,1),s.value.albumPics=E(m)};function E(g){return g.value.join(",")}async function W(){const{code:g,data:o}=await we({current:1,size:1e3,status:"REVIEW"});if(g!==200){R.ElMessage.error("获取供应商失败");return}D.value=o.records}async function F(){const{code:g,data:o}=await Be(C.shopInfo.shopType);if(g!==200){R.ElMessage.error("获取商品标签失败");return}_.value=o}async function A(){const{code:g,data:o,success:O}=await Ce();if(g!==200){R.ElMessage.error("获取平台分类失败");return}y.value=re(1,o)}async function Y(){const{code:g,data:o}=await Ie({current:1,size:500});if(g!==200){R.ElMessage.error("获取店铺分类失败");return}f.value=re(1,o.records)}async function Ct(){var g,o,O,M,S;if(B.query.id){const{code:q,data:N}=await ye(B.query.id,B.query.supplierId);if(q!==200){R.ElMessage.error("获取商品信息失败");return}m.value=(g=N==null?void 0:N.product)==null?void 0:g.albumPics.split(",");const $=(N==null?void 0:N.product)||{};$.freightTemplateId="0",s.value=Object.assign(s.value,$),(O=(o=N==null?void 0:N.product)==null?void 0:o.distributionMode)!=null&&O.includes("VIRTUAL")&&(s.value.distributionMode=["VIRTUAL"]),s.value.distributionMode=[],te.value=(S=(M=N==null?void 0:N.product)==null?void 0:M.distributionMode)==null?void 0:S.includes("VIRTUAL")}}function re(g,o){const O=g===3;for(let M=0;M<o.length;){const S=o[M];if(O){S.disabled=!1,M++;continue}const q=S.children||S.secondCategoryVos||S.categoryThirdlyVos;delete S.secondCategoryVos,delete S.categoryThirdlyVos;const N=!q||q.length===0;if(S.disabled=N,N){o.splice(M,1);continue}if(re(g+1,q),q.length===0){o.splice(M,1);continue}S.children=q,M++}return o}function Nt(){let g=[];s.value.albumPics&&(g=s.value.albumPics.split(",")),m.value=g}const ee=async g=>{const o=g==="platformCategory",O=o?l.value:i.value;if(!O)return;const M=await O.getCheckedNodes();let S=s.value[g];if(!S){const $={one:null,two:null,three:null};s.value[g]=$,S=$}if(!M||M.length===0){S.one=null,S.two=null,S.three=null;return}const q=M[0].pathValues,N=!q||q.length===0;if(o){const $=M[0].pathNodes[0].data.categoryId;S.one=N?null:$}else S.one=N?null:q[0];S.two=N?null:q[1],S.three=N?null:q[2]},kt=e.ref(!1);async function wt(){const g=await Te();kt.value=!!g.data}const te=e.ref(!1),It=g=>{g.includes("VIRTUAL")&&(s.value.distributionMode=["VIRTUAL"]),te.value=g.includes("VIRTUAL")};T({currentFormRef:w,resetServiceAssuranceList:I});const Tt=()=>{s.value.albumPics=E(m)},Bt=g=>{s.value.templateId=g};return(g,o)=>{const O=e.resolveComponent("el-option"),M=e.resolveComponent("el-select"),S=e.resolveComponent("el-icon"),q=e.resolveComponent("el-tooltip"),N=e.resolveComponent("el-form-item"),$=e.resolveComponent("el-col"),ce=e.resolveComponent("el-input"),pe=e.resolveComponent("el-cascader"),me=e.resolveComponent("el-link"),v=e.resolveComponent("el-row"),Et=e.resolveComponent("i-ep-plus"),St=e.resolveComponent("el-upload"),Lt=e.resolveComponent("VueDraggableNext"),fe=e.resolveComponent("el-checkbox"),At=e.resolveComponent("el-checkbox-group"),Dt=e.resolveComponent("logistics-setting"),Pt=e.resolveComponent("el-form");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(J,{title:"基本信息"}),e.createVNode(Pt,{ref_key:"currentFormRef",ref:w,model:e.unref(s),rules:d},{default:e.withCtx(()=>[e.createVNode(v,{gutter:8},{default:e.withCtx(()=>[e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"商品类型","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(M,{modelValue:e.unref(s).productType,"onUpdate:modelValue":o[0]||(o[0]=x=>e.unref(s).productType=x),class:"inputWidth"},{default:e.withCtx(()=>[e.createVNode(O,{label:"实物商品（快递/同城/自提）",value:"REAL_PRODUCT"}),r.value?(e.openBlock(),e.createBlock(O,{key:0,label:"虚拟商品（无需物流）",value:"VIRTUAL_PRODUCT"})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"]),e.createVNode(q,{content:"不同的商品类型可编辑的字段内容不同，商品类型一旦发布后将不可更改！",effect:"effect-tooltip",placement:"top"},{default:e.withCtx(()=>[e.createVNode(S,{color:"#999",size:"14px",style:{"margin-left":"24px"}},{default:e.withCtx(()=>[e.createVNode(e.unref(Z.QuestionFilled))]),_:1})]),_:1})]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"商品名称","label-width":"100px",prop:"name"},{default:e.withCtx(()=>[e.createVNode(ce,{modelValue:e.unref(s).name,"onUpdate:modelValue":o[1]||(o[1]=x=>e.unref(s).name=x),class:"inputWidth",maxlength:"35",placeholder:"请填写商品名称"},null,8,["modelValue"])]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"平台类目","label-width":"100px",prop:"platformCategoryId"},{default:e.withCtx(()=>[e.createVNode(pe,{ref_key:"platformCategoryRef",ref:l,modelValue:e.unref(s).platformCategoryId,"onUpdate:modelValue":o[2]||(o[2]=x=>e.unref(s).platformCategoryId=x),options:y.value,props:V,class:"inputWidth",clearable:"",placeholder:"请选择平台类目","show-all-levels":"",style:{width:"calc(100% - 120px)"},onChange:o[3]||(o[3]=()=>ee("platformCategory"))},null,8,["modelValue","options"])]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"卖点描述","label-width":"100px",prop:"saleDescribe"},{default:e.withCtx(()=>[e.createVNode(ce,{modelValue:e.unref(s).saleDescribe,"onUpdate:modelValue":o[4]||(o[4]=x=>e.unref(s).saleDescribe=x),class:"inputWidth",maxlength:"13",placeholder:"请填写卖点描述"},null,8,["modelValue"])]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"店铺类目","label-width":"100px",prop:"categoryId"},{default:e.withCtx(()=>[e.createVNode(pe,{ref_key:"shopCategoryRef",ref:i,modelValue:e.unref(s).categoryId,"onUpdate:modelValue":o[5]||(o[5]=x=>e.unref(s).categoryId=x),options:f.value,props:V,class:"inputWidth",clearable:"",placeholder:"请选择店铺类目","show-all-levels":"",style:{width:"calc(100% - 120px)"},onChange:o[6]||(o[6]=()=>ee("shopCategory"))},null,8,["modelValue","options"]),e.createVNode(me,{underline:!1,style:{"margin-left":"15px"},type:"primary",onClick:o[7]||(o[7]=x=>e.unref(L).push({name:"goodsCategory",query:{from:"releaseGoods"}}))},{default:e.withCtx(()=>o[14]||(o[14]=[e.createTextVNode(" 前往设置 ")])),_:1})]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"供应商","label-width":"100px",prop:"providerId"},{default:e.withCtx(()=>[e.createVNode(M,{modelValue:e.unref(s).providerId,"onUpdate:modelValue":o[8]||(o[8]=x=>e.unref(s).providerId=x),class:"inputWidth",placeholder:"请选择供应商",style:{}},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(D.value,x=>(e.openBlock(),e.createBlock(O,{key:x.id,label:x.name,value:x.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.createVNode(me,{underline:!1,style:{"margin-left":"15px"},type:"primary",onClick:o[9]||(o[9]=x=>e.unref(L).push({name:"goodsSupplier",query:{from:"releaseGoods"}}))},{default:e.withCtx(()=>o[15]||(o[15]=[e.createTextVNode(" 前往设置 ")])),_:1})]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"商品标签","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(M,{modelValue:e.unref(s).labelId,"onUpdate:modelValue":o[10]||(o[10]=x=>e.unref(s).labelId=x),class:"inputWidth",placeholder:"请选择商品标签"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,x=>(e.openBlock(),e.createBlock(O,{key:x.id,label:x.name,value:x.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e.createVNode(v,{gutter:8},{default:e.withCtx(()=>[e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"商品大图","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(v,{style:{width:"100%"}},{default:e.withCtx(()=>[e.createVNode(Q,{src:e.unref(s).widePic,"onUpdate:src":o[11]||(o[11]=x=>e.unref(s).widePic=x),format:{size:1},height:120,width:250},null,8,["src"])]),_:1}),o[16]||(o[16]=e.createElementVNode("div",{style:{color:"#9d9d9d","font-size":"14px"}},"尺寸建议710x460（长方形模式）像素以上，大小1M以下的JPG、PNG格式图片",-1))]),_:1})]),_:1}),e.createVNode($,{span:12},{default:e.withCtx(()=>[e.createVNode(N,{label:"商品视频","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(v,{style:{width:"100%"}},{default:e.withCtx(()=>[e.createVNode(St,{action:G,"before-upload":h,"http-request":e.unref(he.elementUploadRequest),"on-success":u,"show-file-list":!1,class:"avatar-uploader"},{default:e.withCtx(()=>[e.unref(s).videoUrl!==""?(e.openBlock(),e.createElementBlock("video",{key:0,src:e.unref(s).videoUrl,controls:"",style:{width:"250px",height:"120px"}},null,8,qe)):(e.openBlock(),e.createBlock(S,{key:1,class:"avatar-uploader-icon"},{default:e.withCtx(()=>[e.createVNode(Et)]),_:1}))]),_:1},8,["http-request"])]),_:1}),o[17]||(o[17]=e.createElementVNode("div",{style:{color:"#9d9d9d","font-size":"14px"}},"大小为5M以下",-1))]),_:1})]),_:1})]),_:1}),e.createVNode(N,{label:"商品主图","label-width":"100px",prop:"albumPics"},{default:e.withCtx(()=>[e.createVNode(v,{style:{width:"100%"}},{default:e.withCtx(()=>[e.unref(m).length?(e.openBlock(),e.createBlock(Lt,{key:0,modelValue:e.unref(m),"onUpdate:modelValue":o[12]||(o[12]=x=>e.isRef(m)?m.value=x:null),style:{display:"flex"},onSort:Tt},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),(x,X)=>(e.openBlock(),e.createElementBlock("div",{key:x,style:{position:"relative","margin-right":"20px"}},[e.createVNode(Q,{src:e.unref(m)[X],"onUpdate:src":ue=>e.unref(m)[X]=ue,format:{size:1},height:100,width:100},null,8,["src","onUpdate:src"]),x?(e.openBlock(),e.createBlock(S,{key:0,color:"#7f7f7f",size:"20px",style:{position:"absolute",right:"-5px",top:"-5px",background:"#fff","border-radius":"50%"},onClick:ue=>P(X)},{default:e.withCtx(()=>[e.createVNode(e.unref(Z.CircleClose))]),_:2},1032,["onClick"])):e.createCommentVNode("",!0),X===0?(e.openBlock(),e.createElementBlock("div",Fe,"封面图")):e.createCommentVNode("",!0)]))),128))]),_:1},8,["modelValue"])):e.createCommentVNode("",!0),e.withDirectives(e.createVNode(Q,{format:{size:1},height:100,width:100,onChange:c},null,512),[[e.vShow,e.unref(m).length<=5]])]),_:1}),o[18]||(o[18]=e.createElementVNode("div",{style:{color:"rgba(69, 64, 60, 0.6)","font-size":"12px"}}," 尺寸建议750x750（正方形模式）像素以上，大小1M以下，最多6张 (可拖拽图片调整顺序 ) ",-1))]),_:1}),e.unref(s).productType==="REAL_PRODUCT"?(e.openBlock(),e.createElementBlock("div",je,[e.createVNode(J,{title:"物流信息"}),e.createVNode(N,{label:"配送方式（至少选一种）","label-width":"200px",required:"",style:{margin:"0"}}),e.createVNode(N,{label:"","label-width":"100px",prop:"distributionMode"},{default:e.withCtx(()=>[e.createVNode(At,{modelValue:e.unref(s).distributionMode,"onUpdate:modelValue":o[13]||(o[13]=x=>e.unref(s).distributionMode=x),onChange:It},{default:e.withCtx(()=>[e.createVNode(_e,{disable:te.value},null,8,["disable"]),o[20]||(o[20]=e.createElementVNode("br",null,null,-1)),e.createVNode(fe,{value:"SHOP_STORE"},{default:e.withCtx(()=>o[19]||(o[19]=[e.createTextVNode("到店自提")])),_:1}),o[21]||(o[21]=e.createElementVNode("br",null,null,-1)),r.value?(e.openBlock(),e.createBlock(ge,{key:0,disable:te.value,"template-change":Bt,"template-id":e.unref(s).freightTemplateId},null,8,["disable","template-id"])):e.createCommentVNode("",!0)]),_:1},8,["modelValue"]),e.unref(s).freightTemplateId!=="0"?(e.openBlock(),e.createBlock(Dt,{key:0,id:e.unref(s).freightTemplateId,data:U.value},null,8,["id","data"])):e.createCommentVNode("",!0)]),_:1})])):e.createCommentVNode("",!0),e.createVNode(J,{title:"服务保障"}),e.createVNode(N,{class:"mleft-form-item"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t),x=>(e.openBlock(),e.createElementBlock("div",{key:x.name,style:{display:"flex","flex-direction":"column"}},[e.createVNode(fe,{modelValue:x.state,"onUpdate:modelValue":X=>x.state=X,onChange:e.unref(b)},{default:e.withCtx(()=>[e.createElementVNode("div",Ge,[e.createElementVNode("span",ze,e.toDisplayString(x.name),1),e.createElementVNode("span",He,e.toDisplayString(x.text),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))]),_:1})]),_:1},8,["model","rules"])],64)}}}),$t="",Ot="",Je=Object.freeze(Object.defineProperty({__proto__:null,default:K(We,[["__scopeId","data-v-f38bdf74"]])},Symbol.toStringTag,{value:"Module"})),Ke={class:"norm__list"},Ye={class:"spec-container"},Xe=e.defineComponent({__name:"GoodNorms",props:{classArr:{type:Array,default(){return[]}}},emits:["changeClass"],setup(p,{emit:T}){const k=p,B=T,L=(f,l,i)=>{let V=k.classArr;V[l].children[i].name.indexOf(f)===0&&V[l].children.splice(i,1),B("changeClass",{type:"delSpecValue",list:e.toRaw(V)})},w=f=>{B("changeClass",{type:"sortSpecValue",list:f})},G=f=>{let l=k.classArr;l[f].inputVisble=!0},a=f=>{var l;return!!((l=f.draggedContext.element)!=null&&l.name)},s=f=>{let l=k.classArr;l[f].inputValue&&l[f].children.push({name:l[f].inputValue,children:[],inputValue:"",inputVisble:!1}),l[f].inputVisble=!1,l[f].inputValue="",y(l)?B("changeClass",{type:"addSpecValue",list:e.toRaw(l)}):(l[f].children.pop(),R.ElMessage.warning("规格名称重复"))},U=f=>{let l=k.classArr;y(l)||(R.ElMessage.warning("规格名称重复"),l[f].name="")},m=()=>{if(!k.classArr.every(l=>!!l.name.trim())){R.ElMessage.warning("请输入规格名称");return}k.classArr.push({inputValue:"",inputVisble:!1,children:[],name:"",version:""}),B("changeClass",{type:"addSpec",list:e.toRaw(k.classArr)})},D=f=>{R.ElMessageBox.confirm("确认删除该规格?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let l=k.classArr;l.splice(f,1),B("changeClass",{type:"delSpec",list:e.toRaw(l)}),R.ElMessage.success("删除成功")})},_=()=>{B("changeClass",{type:"sortSpecValue",list:e.toRaw(k.classArr)})};function y(f){const l=f.map(V=>V.name),i=f.reduce((V,d)=>V.concat(d.children.map(C=>C.name)),[]);return l.concat(i).length===Array.from(new Set(l.concat(i))).length}return(f,l)=>{const i=e.resolveComponent("el-button"),V=e.resolveComponent("el-input"),d=e.resolveComponent("el-table-column"),C=e.resolveComponent("el-tag"),r=e.resolveComponent("VueDraggableNext"),t=e.resolveComponent("el-icon"),b=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Ke,[e.createVNode(i,{type:"primary",onClick:m},{default:e.withCtx(()=>l[0]||(l[0]=[e.createTextVNode("新增规格")])),_:1}),e.createVNode(ae,{"limit-pid":!1,onChangeData:w},{default:e.withCtx(()=>[e.createVNode(b,{data:p.classArr,border:""},{default:e.withCtx(()=>[e.createVNode(d,{label:"规格名称",prop:"name",width:"160",fixed:"left"},{default:e.withCtx(({row:I,$index:n})=>[e.createVNode(V,{modelValue:I.name,"onUpdate:modelValue":h=>I.name=h,placeholder:"规格名称",style:{width:"130px"},maxlength:"20",onBlur:h=>U(n)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1}),e.createVNode(d,{label:"规格值(拖拽可调整顺序)",prop:"children","min-width":"720"},{default:e.withCtx(({row:I,$index:n})=>[e.createElementVNode("div",Ye,[I.children?(e.openBlock(),e.createBlock(r,{key:0,modelValue:I.children,"onUpdate:modelValue":h=>I.children=h,move:a,group:"tag",class:"tag-group",onSort:_},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(I.children,(h,u)=>(e.openBlock(),e.createBlock(C,{key:u,closable:"",effect:"plain",size:"large",type:"info","disable-transitions":!1,onClose:c=>L(h.name,n,u)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(h.name),1)]),_:2},1032,["onClose"]))),128)),I.inputVisble?(e.openBlock(),e.createBlock(V,{key:0,ref:"saveTagInput",modelValue:I.inputValue,"onUpdate:modelValue":h=>I.inputValue=h,class:"input-new-tag",maxlength:"20",style:{"vertical-align":"middle","margin-bottom":"10px"},onKeyup:e.withKeys(h=>s(n),["enter"]),onBlur:h=>s(n)},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):(e.openBlock(),e.createBlock(i,{key:1,class:"button-new-tag spec-container-action",round:"",onClick:h=>G(n)},{default:e.withCtx(()=>l[1]||(l[1]=[e.createTextVNode("添加新规格")])),_:2},1032,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.createCommentVNode("",!0)])]),_:1}),e.createVNode(d,{label:"操作",width:"100",fixed:"right"},{default:e.withCtx(({$index:I})=>[e.createVNode(t,{size:"22px",color:"#FF4D4D",onClick:n=>D(I)},{default:e.withCtx(()=>[e.createVNode(e.unref(Z.Delete))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),Ft="",Ze=K(Xe,[["__scopeId","data-v-a708f5c4"]]);var H=(p=>(p.指导价="price",p.实售价="salePrice",p.重量="weight",p.限购类型="limitType",p.限购数量="limitNum",p.库存类型="stockType",p.设置库存="initStock",p.sku销量="initSalesVolume",p))(H||{});const Qe={class:"table-container"},ve={class:"input-group"},et={class:"input-group"},tt={class:"table-container"},ot=e.defineComponent({__name:"GoodNormTable",props:{list:{type:Array,default(){return[]}},classArr:{type:Array,default(){return[]}},memoSpecList:{type:Array,default(){return[]}}},emits:["changeNormList"],setup(p,{expose:T,emit:k}){const B=j.useRoute(),L=e.computed(()=>B.name==="releaseCommodityEdit"?["sku图","指导价","实售价","重量","限购类型","限购数量","sku销量"]:["sku图","指导价","实售价","重量","限购类型","限购数量","库存类型","设置库存","sku销量"]),w=p;console.log("$Route.query",B.query);const G=k,a=e.computed(()=>{const D=w.memoSpecList;let _=w.list;return D.length>0&&(_=_.map((y,f)=>{const l=D.filter(i=>!!m(y.specs,i.specs));return l.length>0&&(y=l[0]),y})),_}),s=()=>a.value,U=(D,_)=>{G("changeNormList",a.value.map(y=>(y[_]=D,y)))};T({getNormList:s});function m(D,_){if(D.length!==_.length)return!1;for(let y=0;y<D.length;y++)if(D[y]!==_[y])return!1;return!0}return(D,_)=>{const y=e.resolveComponent("el-table-column"),f=e.resolveComponent("el-input-number"),l=e.resolveComponent("el-table"),i=e.resolveComponent("el-option"),V=e.resolveComponent("el-select");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(J,{title:"批量设置"}),e.createElementVNode("div",Qe,[e.createVNode(l,{data:[{}]},{default:e.withCtx(()=>[e.createVNode(y,{label:"sku图",align:"center"},{default:e.withCtx(()=>[e.createVNode(Q,{width:50,height:50,"append-to-body":"",format:{types:["image/png","image/jpg","image/gif","image/jpeg","image/avif","image/webp"]},"onUpdate:src":_[0]||(_[0]=d=>U(d,"image"))})]),_:1}),e.createVNode(y,{label:"划线价",align:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",ve,[_[7]||(_[7]=e.createElementVNode("div",{class:"input-group__prefix"},"￥",-1)),e.createVNode(f,{max:999999,precision:2,controls:!1,style:{width:"70px"},onChange:_[1]||(_[1]=d=>U(d,"price"))})])]),_:1}),e.createVNode(y,{label:"实售价",align:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",et,[_[8]||(_[8]=e.createElementVNode("div",{class:"input-group__prefix"},"￥",-1)),e.createVNode(f,{max:999999,precision:2,controls:!1,style:{width:"70px"},onChange:_[2]||(_[2]=d=>U(d,"salePrice"))})])]),_:1}),e.createVNode(y,{label:"设置库存",align:"center"},{default:e.withCtx(()=>[e.createVNode(f,{precision:0,controls:!1,style:{width:"70px"},onChange:_[3]||(_[3]=d=>U(d,"initStock"))})]),_:1}),e.createVNode(y,{label:"sku销量",align:"center"},{default:e.withCtx(()=>[e.createVNode(f,{precision:0,controls:!1,style:{width:"70px"},onChange:_[4]||(_[4]=d=>U(d,"initSalesVolume"))})]),_:1}),e.createVNode(y,{label:"限购数量",align:"center"},{default:e.withCtx(()=>[e.createVNode(f,{precision:0,controls:!1,style:{width:"70px"},onChange:_[5]||(_[5]=d=>U(d,"limitNum"))})]),_:1}),e.createVNode(y,{label:"重量",align:"center"},{default:e.withCtx(()=>[e.createVNode(f,{precision:0,controls:!1,style:{width:"70px"},onChange:_[6]||(_[6]=d=>U(d,"weight"))}),_[9]||(_[9]=e.createElementVNode("div",{class:"input-group__prefix"},"kg",-1))]),_:1})]),_:1})]),e.createVNode(J,{title:"规格明细"}),e.createElementVNode("div",tt,[e.createVNode(l,{data:a.value},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(L.value.slice(0,1),(d,C)=>(e.openBlock(),e.createBlock(y,{key:C,label:d,width:"150",fixed:"left"},{default:e.withCtx(({row:r})=>[e.createVNode(Q,{src:r.image,"onUpdate:src":t=>r.image=t,width:50,height:50,"append-to-body":"",format:{types:["image/png","image/jpg","image/gif","image/jpeg","image/avif","image/webp"]}},null,8,["src","onUpdate:src"])]),_:2},1032,["label"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.classArr,(d,C)=>(e.openBlock(),e.createBlock(y,{key:C,align:"center",width:"180",label:d.name},{default:e.withCtx(({row:r})=>{var t;return[e.createTextVNode(e.toDisplayString(Array.isArray(r.specs)?(t=r.specs)==null?void 0:t[C]:r.specs.name),1)]}),_:2},1032,["label"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(L.value.slice(1),(d,C)=>(e.openBlock(),e.createBlock(y,{key:C,align:"center",width:"180",label:d},{default:e.withCtx(({row:r})=>[e.unref(H)[d]==="limitType"?(e.openBlock(),e.createBlock(V,{key:0,modelValue:r.limitType,"onUpdate:modelValue":t=>r.limitType=t},{default:e.withCtx(()=>[e.createVNode(i,{label:"规格限购",value:"SKU_LIMITED"}),e.createVNode(i,{label:"无限库存",value:"UNLIMITED"})]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.unref(H)[d]==="stockType"?(e.openBlock(),e.createBlock(V,{key:1,modelValue:r.stockType,"onUpdate:modelValue":t=>r.stockType=t},{default:e.withCtx(()=>[e.createVNode(i,{label:"限制库存",value:"LIMITED"}),e.createVNode(i,{label:"不限制库存",value:"UNLIMITED"})]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.unref(H)[d]==="limitNum"?(e.openBlock(),e.createBlock(f,{key:2,modelValue:r.limitNum,"onUpdate:modelValue":t=>r.limitNum=t,disabled:r.limitType==="UNLIMITED",precision:0,controls:!1},null,8,["modelValue","onUpdate:modelValue","disabled"])):e.unref(H)[d]==="initStock"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[r.stockType==="UNLIMITED"?(e.openBlock(),e.createBlock(f,{key:0,"model-value":0,disabled:"",precision:0,controls:!1})):(e.openBlock(),e.createBlock(f,{key:1,modelValue:r.initStock,"onUpdate:modelValue":t=>r.initStock=t,precision:0,controls:!1},null,8,["modelValue","onUpdate:modelValue"]))],64)):["price","salePrice"].includes(e.unref(H)[d])?(e.openBlock(),e.createBlock(f,{key:4,modelValue:r[e.unref(H)[d]],"onUpdate:modelValue":t=>r[e.unref(H)[d]]=t,controls:!1,max:999999,min:0,precision:2},null,8,["modelValue","onUpdate:modelValue"])):(e.openBlock(),e.createBlock(f,{key:5,modelValue:r[e.unref(H)[d]],"onUpdate:modelValue":t=>r[e.unref(H)[d]]=t,precision:0,controls:!1},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128))]),_:1},8,["data"])])])}}}),jt="",lt=K(ot,[["__scopeId","data-v-4a049eb7"]]),at={style:{"text-align":"center","font-size":"12px"}},rt=e.defineComponent({__name:"GoodOnly",setup(p,{expose:T}){const{divTenThousand:k}=le(),B=j.useRoute();e.onActivated(()=>{a(),D()}),e.onBeforeMount(()=>{a(),D()});const L=e.inject("form"),w=e.ref([]),G=e.ref([]),a=async()=>{const{data:l}=await de({featuresType:"ATTRIBUTE",size:100}),{data:i}=await de({featuresType:"ARGUMENTS",size:100});w.value=l.records,G.value=i.records},s=()=>({featuresType:"",id:"",shopId:"",featuresValue:{featureName:"",isRequired:"",isMultiSelect:"",featureValues:[]}}),U=(l,i,V)=>l===""?"":l?V:i,m=e.ref({productAttribute:[],productParameter:[]}),D=()=>{var l,i,V,d;B.query.id?(m.value.productAttribute=((i=(l=L.submitForm.value.extra)==null?void 0:l.productAttributes)==null?void 0:i.map(C=>({id:C.id,featuresValue:C})))||[],m.value.productParameter=((d=(V=L.submitForm.value.extra)==null?void 0:V.productParameters)==null?void 0:d.map(C=>({id:C.id,featuresValue:C})))||[]):m.value={productAttribute:[],productParameter:[]}},_=(l,i,V)=>{m.value[l][i].featuresValue.featureValues=m.value[l][i].featuresValue.featureValues.filter((d,C)=>C!==V)},y=(l,i)=>{m.value[l]=m.value[l].filter((V,d)=>d!==i)};return T({handleSpacObj:()=>({productAttribute:m.value.productAttribute.map(l=>({...l.featuresValue,id:l.id})),productParameter:m.value.productParameter.map(l=>({...l.featuresValue,id:l.id}))})}),(l,i)=>{const V=e.resolveComponent("el-button"),d=e.resolveComponent("el-option"),C=e.resolveComponent("el-select"),r=e.resolveComponent("el-table-column"),t=e.resolveComponent("el-tag"),b=e.resolveComponent("el-icon"),I=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(J,{title:"商品属性"},{default:e.withCtx(()=>i[4]||(i[4]=[e.createElementVNode("span",{style:{color:"rgba(108, 108, 108, 1)","font-size":"12px","font-weight":"400","margin-left":"50px"}}," 下单时选择诸如甜度、口味、加料等商品属性不同属性值价格不同，可提升商品客单价及用户体验，拖动调整顺序 ",-1)])),_:1}),e.createVNode(V,{type:"primary",style:{margin:"15px 0"},onClick:i[0]||(i[0]=n=>m.value.productAttribute.push(s()))},{default:e.withCtx(()=>i[5]||(i[5]=[e.createTextVNode("添加属性")])),_:1}),e.createVNode(ae,{"limit-pid":!1,onChangeData:i[1]||(i[1]=n=>m.value.productAttribute=n)},{default:e.withCtx(()=>[e.createVNode(I,{data:m.value.productAttribute,border:""},{default:e.withCtx(()=>[e.createVNode(r,{label:"属性名称",width:"130"},{default:e.withCtx(({row:n,$index:h})=>[e.createVNode(C,{"model-value":n,"value-key":"id",onChange:u=>m.value.productAttribute[h]=e.unref(oe.cloneDeep)(u)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,u=>(e.openBlock(),e.createBlock(d,{key:u.id,disabled:m.value.productAttribute.some(c=>c.id===u.id),label:u.featuresValue.featureName,value:u},null,8,["disabled","label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:1}),e.createVNode(r,{label:"属性类型",width:"100"},{default:e.withCtx(({row:n})=>[e.createElementVNode("div",at,e.toDisplayString(U(n.featuresValue.isRequired,"必选","选填"))+" ， "+e.toDisplayString(U(n.featuresValue.isMultiSelect,"多选"," 单选")),1)]),_:1}),e.createVNode(r,{label:"属性值"},{default:e.withCtx(({row:n,$index:h})=>[n.featuresValue.featureValues?(e.openBlock(),e.createBlock(e.unref(se.VueDraggableNext),{key:0,modelValue:n.featuresValue.featureValues,"onUpdate:modelValue":u=>n.featuresValue.featureValues=u,group:`arrTag${h}`},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.featuresValue.featureValues,(u,c)=>(e.openBlock(),e.createBlock(t,{key:c,closable:"",effect:"plain",size:"large",type:"info","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px"},onClose:P=>_("productAttribute",h,c)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.firstValue)+" + "+e.toDisplayString(e.unref(k)(u.secondValue))+"元 ",1)]),_:2},1032,["onClose"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(r,{label:"操作",width:"100",fixed:"right"},{default:e.withCtx(({$index:n})=>[e.createVNode(b,{size:"22px",color:"#FF4D4D",onClick:h=>y("productAttribute",n)},{default:e.withCtx(()=>[e.createVNode(e.unref(Z.Delete))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e.createVNode(J,{title:"商品参数",style:{"margin-top":"15px"}},{default:e.withCtx(()=>i[6]||(i[6]=[e.createElementVNode("span",{style:{color:"rgba(108, 108, 108, 1)","font-weight":"400","font-size":"12px","margin-left":"50px"}}," 可拖动调整顺序 ",-1)])),_:1}),e.createVNode(V,{type:"primary",style:{margin:"15px 0"},onClick:i[2]||(i[2]=n=>m.value.productParameter.push(s()))},{default:e.withCtx(()=>i[7]||(i[7]=[e.createTextVNode("添加参数")])),_:1}),e.createVNode(ae,{"limit-pid":!1,onChangeData:i[3]||(i[3]=n=>m.value.productParameter=n)},{default:e.withCtx(()=>[e.createVNode(I,{data:m.value.productParameter,border:""},{default:e.withCtx(()=>[e.createVNode(r,{label:"参数名称",width:"130"},{default:e.withCtx(({row:n,$index:h})=>[e.createVNode(C,{"model-value":n,"value-key":"id",onChange:u=>m.value.productParameter[h]=e.unref(oe.cloneDeep)(u)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(G.value,u=>(e.openBlock(),e.createBlock(d,{key:u.id,disabled:m.value.productParameter.some(c=>c.id===u.id),label:u.featuresValue.featureName,value:u},null,8,["disabled","label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:1}),e.createVNode(r,{label:"参数值"},{default:e.withCtx(({row:n,$index:h})=>[n.featuresValue.featureValues?(e.openBlock(),e.createBlock(e.unref(se.VueDraggableNext),{key:0,modelValue:n.featuresValue.featureValues,"onUpdate:modelValue":u=>n.featuresValue.featureValues=u,group:`goodArrTag${h}`},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.featuresValue.featureValues,(u,c)=>(e.openBlock(),e.createBlock(t,{key:c,closable:"",effect:"plain",size:"large",type:"info","disable-transitions":!1,onClose:P=>_("productParameter",h,c)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.firstValue),1)]),_:2},1032,["onClose"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(r,{label:"操作",width:"100",fixed:"right"},{default:e.withCtx(({$index:n})=>[e.createVNode(b,{size:"22px",color:"#FF4D4D",onClick:h=>y("productParameter",n)},{default:e.withCtx(()=>[e.createVNode(e.unref(Z.Delete))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}}),Gt="",nt=K(rt,[["__scopeId","data-v-3a7de3d4"]]),st={key:0},it={key:1},dt={class:"inputnumber"},ct={class:"inputnumber"},pt={class:"inputnumber"},mt={class:"inputnumber"},ft={class:"inputnumber"},ut={class:"inputnumber"},_t=e.defineComponent({__name:"NewSaleInfo",setup(p,{expose:T}){const k=j.useRoute(),{divTenThousand:B}=le(),L=e.ref(),w=e.ref(),a=e.inject("form").submitForm,s=e.ref([]),U=e.ref(),m=(r,t,b)=>{t<=0?b(new Error("输入数值请大于0")):Number(a.value.skus[0].price)<Number(t)?b(new Error("实售价大于指导价")):b()},D=(r,t,b)=>{t<=0?b(new Error("输入数值请大于0")):Number(a.value.skus[0].salePrice)>Number(t)?b(new Error("实售价大于指导价")):b()},_=e.reactive({"skus[0].price":[{required:!0,validator:D,trigger:"blur"}],"skus[0].salePrice":[{required:!0,validator:m,trigger:"blur"}]});e.onActivated(()=>{l()});const y=async r=>{const{type:t,list:b}=r;if(!b.length){a.value.skus=[{id:"",image:"",initSalesVolume:0,limitNum:0,initStock:0,limitType:"UNLIMITED",price:0,productId:"",salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0}];return}a.value.specGroups=b,t!=="addSpec"&&(a.value.skus=i(b))},f=r=>{a.value.skus=r};async function l(){var r,t,b,I;if(k.query.id){const n=((r=a.value)==null?void 0:r.sellType)==="CONSIGNMENT"?(t=a.value)==null?void 0:t.supplierId:ne.useShopInfoStore().shopInfo.id,{code:h,data:u}=await Ve(n,k.query.id);if(h!==200){R.ElMessage.error("获取商品sku失败");return}u.skus.forEach(c=>{c.initStock=0,c.price=Number(B(c.price)),c.salePrice=Number(B(c.salePrice))}),a.value=Object.assign(a.value,u),C(((I=(b=a.value)==null?void 0:b.skus)==null?void 0:I.length)>1?"MUTI_SPEC":"SINGLE_SPEC")}}function i(r){let t=[];return t=r.map(b=>b.children),t.length<=1?t=t[0]:t=t.reduce((b,I)=>{let n=[];return b.forEach(h=>{I.forEach(u=>{h instanceof Array?n.push([...h,u]):n.push([h,u])})}),n}),t.map(b=>V(b))}function V(r){let t=[];Array.isArray(r)?t=r.map(I=>I.name):t.push(r.name);const b=a.value.skus.find(I=>I.specs.every(n=>t.includes(n)));return b&&(b.specs=t),b||{specs:t,stockType:"LIMITED",initSalesVolume:0,limitType:"UNLIMITED",limitNum:0,image:"",price:0,initStock:0,salePrice:0,weight:"0"}}T({currentFormRef:L,GoodOnlyRef:w});const d=e.ref("SINGLE_SPEC"),C=r=>{r==="SINGLE_SPEC"&&a.value.specGroups.length&&(a.value.skus=[{id:"",image:"",initSalesVolume:0,limitNum:0,initStock:0,limitType:"UNLIMITED",price:0,productId:"",salePrice:0,shopId:"",stockType:"UNLIMITED",weight:0}],a.value.specGroups=[]),d.value=r};return e.onMounted(()=>{var r,t;C(((t=(r=a.value)==null?void 0:r.skus)==null?void 0:t.length)>1?"MUTI_SPEC":"SINGLE_SPEC")}),(r,t)=>{const b=e.resolveComponent("el-radio"),I=e.resolveComponent("el-radio-group"),n=e.resolveComponent("el-form-item"),h=e.resolveComponent("el-input-number"),u=e.resolveComponent("el-col"),c=e.resolveComponent("el-option"),P=e.resolveComponent("el-select"),E=e.resolveComponent("el-row"),W=e.resolveComponent("el-form");return e.openBlock(),e.createBlock(W,{ref_key:"currentFormRef",ref:L,model:e.unref(a),rules:_,"label-width":"100px"},{default:e.withCtx(()=>{var F;return[e.createVNode(J,{title:"规格类型"}),e.createVNode(n,{label:"规格类型",style:{"margin-top":"10px"}},{default:e.withCtx(()=>[e.createVNode(I,{"model-value":d.value,size:"small",onChange:C},{default:e.withCtx(()=>[e.createVNode(b,{value:"SINGLE_SPEC"},{default:e.withCtx(()=>t[8]||(t[8]=[e.createTextVNode("单规格")])),_:1}),e.createVNode(b,{value:"MUTI_SPEC"},{default:e.withCtx(()=>t[9]||(t[9]=[e.createTextVNode("多规格")])),_:1})]),_:1},8,["model-value"])]),_:1}),d.value==="MUTI_SPEC"?(e.openBlock(),e.createElementBlock("div",st,[e.createVNode(Ze,{"class-arr":e.unref(a).specGroups,onChangeClass:y},null,8,["class-arr"]),e.unref(a).specGroups&&e.unref(a).specGroups.length>0?(e.openBlock(),e.createBlock(lt,{key:0,ref_key:"goodNormTable",ref:U,list:e.unref(a).skus,"class-arr":e.unref(a).specGroups,"memo-spec-list":s.value,onChangeNormList:f},null,8,["list","class-arr","memo-spec-list"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),d.value==="SINGLE_SPEC"&&((F=e.unref(a).skus)!=null&&F.length)?(e.openBlock(),e.createElementBlock("div",it,[e.createVNode(E,{gutter:8},{default:e.withCtx(()=>[e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"指导价",prop:"skus[0].price"},{default:e.withCtx(()=>[e.createElementVNode("div",dt,[e.createVNode(h,{modelValue:e.unref(a).skus[0].price,"onUpdate:modelValue":t[0]||(t[0]=A=>e.unref(a).skus[0].price=A),controls:!1,max:999999,precision:2,class:"input_number com__input--width"},null,8,["modelValue"]),t[10]||(t[10]=e.createElementVNode("div",{class:"inputnumber__icon"},"元",-1))])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"销售价",prop:"skus[0].salePrice"},{default:e.withCtx(()=>[e.createElementVNode("div",ct,[e.createVNode(h,{modelValue:e.unref(a).skus[0].salePrice,"onUpdate:modelValue":t[1]||(t[1]=A=>e.unref(a).skus[0].salePrice=A),max:999999,precision:2,controls:!1,class:"input_number com__input--width"},null,8,["modelValue"]),t[11]||(t[11]=e.createElementVNode("div",{class:"inputnumber__icon"},"元",-1))])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"初始销量"},{default:e.withCtx(()=>[e.createElementVNode("div",pt,[e.createVNode(h,{modelValue:e.unref(a).skus[0].initSalesVolume,"onUpdate:modelValue":t[2]||(t[2]=A=>e.unref(a).skus[0].initSalesVolume=A),placeholder:"0",controls:!1,class:"input_number com__input--width"},null,8,["modelValue"]),t[12]||(t[12]=e.createElementVNode("div",{class:"inputnumber__icon"},"个",-1))])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"重量"},{default:e.withCtx(()=>[e.createElementVNode("div",mt,[e.createVNode(h,{modelValue:e.unref(a).skus[0].weight,"onUpdate:modelValue":t[3]||(t[3]=A=>e.unref(a).skus[0].weight=A),controls:!1,class:"input_number com__input--width"},{append:e.withCtx(()=>t[13]||(t[13]=[e.createTextVNode(".com")])),_:1},8,["modelValue"]),t[14]||(t[14]=e.createElementVNode("div",{class:"inputnumber__icon"},"kg",-1))])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"限购类型"},{default:e.withCtx(()=>[e.createVNode(P,{modelValue:e.unref(a).skus[0].limitType,"onUpdate:modelValue":t[4]||(t[4]=A=>e.unref(a).skus[0].limitType=A)},{default:e.withCtx(()=>[e.createVNode(c,{label:"商品限购",value:"PRODUCT_LIMITED"}),e.unref(a).specGroups.length?(e.openBlock(),e.createBlock(c,{key:0,label:"规格限购",value:"SKU_LIMITED"})):e.createCommentVNode("",!0),e.createVNode(c,{label:"无限库存",value:"UNLIMITED"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"库存类型"},{default:e.withCtx(()=>[e.createVNode(P,{modelValue:e.unref(a).skus[0].stockType,"onUpdate:modelValue":t[5]||(t[5]=A=>e.unref(a).skus[0].stockType=A)},{default:e.withCtx(()=>[e.createVNode(c,{label:"限制库存",value:"LIMITED"}),e.createVNode(c,{label:"不限制库存",value:"UNLIMITED"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"限购数量"},{default:e.withCtx(()=>[e.createElementVNode("div",ft,[e.createVNode(h,{modelValue:e.unref(a).skus[0].limitNum,"onUpdate:modelValue":t[6]||(t[6]=A=>e.unref(a).skus[0].limitNum=A),disabled:e.unref(a).skus[0].limitType==="UNLIMITED",min:0,controls:!1,class:"input_number com__input--width"},null,8,["modelValue","disabled"]),t[15]||(t[15]=e.createElementVNode("div",{class:"inputnumber__icon"},"个",-1))])]),_:1})]),_:1}),e.createVNode(u,{span:12},{default:e.withCtx(()=>[e.createVNode(n,{label:"设置库存",prop:"skus[0].initStock"},{default:e.withCtx(()=>[e.createElementVNode("div",ut,[e.createVNode(h,{modelValue:e.unref(a).skus[0].initStock,"onUpdate:modelValue":t[7]||(t[7]=A=>e.unref(a).skus[0].initStock=A),disabled:e.unref(a).skus[0].stockType==="UNLIMITED",max:999999,min:0,precision:0,controls:!1,class:"input_number com__input--width"},null,8,["modelValue","disabled"]),t[16]||(t[16]=e.createElementVNode("div",{class:"inputnumber__icon"},"个",-1))])]),_:1})]),_:1})]),_:1})])):e.createCommentVNode("",!0),e.createVNode(nt,{ref_key:"GoodOnlyRef",ref:w},null,512)]}),_:1},8,["model","rules"])}}}),zt="",gt=Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"})),ht={class:"info"},xt=["src"],bt={class:"info__edit"},yt=e.defineComponent({name:"NewProductInfoAddon",__name:"NewProductInfo",setup(p){const k=e.inject("form").submitForm;return(B,L)=>(e.openBlock(),e.createElementBlock("div",ht,[e.createElementVNode("img",{src:e.unref(be),class:"info__img"},null,8,xt),e.createElementVNode("div",bt,[e.createVNode(xe,{content:e.unref(k).detail,"onUpdate:content":L[0]||(L[0]=w=>e.unref(k).detail=w),height:"711px"},null,8,["content"])])]))}}),Ht="",Vt=Object.freeze(Object.defineProperty({__proto__:null,default:K(yt,[["__scopeId","data-v-5c0ce97d"]])},Symbol.toStringTag,{value:"Module"}));return Pe});
