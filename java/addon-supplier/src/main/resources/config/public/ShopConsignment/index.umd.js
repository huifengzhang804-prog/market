(function(e,M){typeof exports=="object"&&typeof module<"u"?module.exports=M(require("vue"),require("@/components/ChromeTab.vue"),require("@/components/PageManage.vue"),require("@/components/qszr-core/packages/q-table/QTable"),require("@/components/qszr-core/packages/q-table/q-table-column.vue"),require("lodash-es"),require("@/components/SchemaForm.vue"),require("@/composables/useConvert"),require("element-plus"),require("vue-router"),require("@/store/modules/shopInfo"),require("@/components/q-icon/q-icon.vue"),require("@/apis/http")):typeof define=="function"&&define.amd?define(["vue","@/components/ChromeTab.vue","@/components/PageManage.vue","@/components/qszr-core/packages/q-table/QTable","@/components/qszr-core/packages/q-table/q-table-column.vue","lodash-es","@/components/SchemaForm.vue","@/composables/useConvert","element-plus","vue-router","@/store/modules/shopInfo","@/components/q-icon/q-icon.vue","@/apis/http"],M):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopConsignment=M(e.ShopConsignmentContext.Vue,e.ShopConsignmentContext.ChromeTabs,e.ShopConsignmentContext.PageManageTwo,e.ShopConsignmentContext.QTable,e.ShopConsignmentContext.QTableColumn,e.ShopConsignmentContext.Lodash,e.ShopConsignmentContext.SchemaForms,e.ShopConsignmentContext.UseConvert,e.ShopConsignmentContext.ElementPlus,e.ShopConsignmentContext.VueRouter,e.ShopConsignmentContext.ShopInfoStore,e.ShopConsignmentContext.QIcon,e.ShopConsignmentContext.Request))})(this,function(e,M,O,A,S,z,G,L,R,U,j,H,w){"use strict";var Y=document.createElement("style");Y.textContent=`@charset "UTF-8";.preview[data-v-158170d2]{line-height:1.5rem}.preview__image span[data-v-158170d2]{vertical-align:top}.commodity-info[data-v-1ff62bac]{display:flex;align-items:center}.commodity-info img[data-v-1ff62bac]{width:60px;height:60px}.commodity-info span[data-v-1ff62bac]{overflow:hidden;text-overflow:ellipsis;display:box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-left:10px}[data-v-1ff62bac] .el-form-item .el-form-item{margin-top:8px}[data-v-835c6a84]{font-size:14px}.table[data-v-835c6a84]{overflow-y:auto}.commodity-info[data-v-835c6a84]{display:flex;align-items:center}.commodity-info img[data-v-835c6a84]{width:68px;height:68px}.commodity-info .name[data-v-835c6a84]{width:217px;overflow:hidden;text-overflow:ellipsis;display:box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-left:10px}.customer[data-v-835c6a84]{width:100%;display:flex;flex-direction:column;justify-content:space-around;font-size:14px;color:#333}.customer div[data-v-835c6a84]{display:flex;align-items:center}.customer__name[data-v-835c6a84]{display:inline-block;max-width:156px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:3px}.customer img[data-v-835c6a84]{width:16.25px;height:15.32px;margin-left:5px;cursor:pointer}.explainData>div[data-v-822906c4]{display:flex;margin-top:8px}.explainData>div img[data-v-822906c4]{margin-top:6px}.explainData .explainData_label[data-v-822906c4]{width:80px;text-align:right;margin-right:8px}.violation-evidence[data-v-822906c4]{width:100px;height:100px;vertical-align:top}.violation-evidence+.violation-evidence[data-v-822906c4]{margin-left:5px}.good[data-v-e7d893db]{padding:0 30px 0 45px;box-sizing:border-box;font-size:12px;font-family:Microsoft YaHei,Microsoft YaHei-Normal;font-weight:400;color:#000}.good__info[data-v-e7d893db]{margin-bottom:24px}.good__img[data-v-e7d893db]{display:flex;justify-content:flex-start;align-items:flex-start}.good__spec[data-v-e7d893db]{width:758px}.b[data-v-e7d893db]{font-size:12px;color:#000}[data-v-25b478af]{font-size:14px}.commodity-info[data-v-25b478af]{display:flex;align-items:center}.commodity-info img[data-v-25b478af]{width:68px;height:68px}.commodity-info span[data-v-25b478af]{display:inline-block;width:217px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-left:10px}.customer[data-v-25b478af]{width:100%;display:flex;flex-direction:column;justify-content:space-around;font-size:14px;color:#333}.customer div[data-v-25b478af]{display:flex;align-content:center}.customer__name[data-v-25b478af]{display:inline-block;max-width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:3px}.customer img[data-v-25b478af]{width:16.25px;height:15.32px;margin-left:5px;cursor:pointer}.settings[data-v-ac5f4ef8]{padding:16px}.settings__explain[data-v-ac5f4ef8]{padding:25px 20px;background-color:#555cfd0f;color:#333}.settings__title[data-v-ac5f4ef8]{padding:0 15px;line-height:1.3}.settings__container[data-v-ac5f4ef8]{padding:0 15px}.settings__container--line[data-v-ac5f4ef8]{line-height:1.3}.settings__container .text-red[data-v-ac5f4ef8]{color:red}.settings__form[data-v-ac5f4ef8]{margin-top:30px;display:flex}.settings__form>span[data-v-ac5f4ef8]{margin-right:15px;margin-top:8px}.settings__footer[data-v-ac5f4ef8]{margin-top:auto;width:100%;padding:17px 0;display:flex;align-items:center;justify-content:center;box-shadow:0 0 10px #2e2c2c4d}
`,document.head.appendChild(Y);const ne={class:"q_plugin_container"},oe=e.defineComponent({__name:"ShopConsignment",setup(a){const c=e.ref("goodSource"),t={goodSource:e.defineAsyncComponent(()=>Promise.resolve().then(()=>ze)),shipped:e.defineAsyncComponent(()=>Promise.resolve().then(()=>lt)),settings:e.defineAsyncComponent(()=>Promise.resolve().then(()=>pt))},r=[{name:"goodSource",label:"货源"},{name:"shipped",label:"已铺货"},{name:"settings",label:"代销设置"}],o=f=>{f&&(c.value=f)};return(f,m)=>(e.openBlock(),e.createElementBlock("div",ne,[e.createVNode(M,{"tab-list":r,value:c.value,onHandleTabs:o},null,8,["value"]),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t[c.value])))]))}}),ae=a=>w.get({url:"addon-supplier/supplier/manager/product/getSupplyList",params:{...a}}),K=(a,c)=>w.post({url:`gruul-mall-carrier-pigeon/pigeon/group-chat-rooms/${a}/${c}`}),W=(a={})=>w.get({url:"gruul-mall-shop/shop/info/getSupplierInfo",params:a}),X=()=>w.get({url:"gruul-mall-addon-platform/platform/shop/signing/category/choosable/list"}),le=a=>w.get({url:"gruul-mall-goods/goods/product/category",params:a}),J=()=>w.get({url:"gruul-mall-goods/consignment/config"}),ie=a=>w.post({url:"gruul-mall-goods/consignment/config",data:a}),re=a=>w.get({url:"gruul-mall-goods/consignment/pave/goods",params:a}),se=a=>w.post({url:"gruul-mall-goods/consignment/pave/goods",data:a}),ce=e.defineComponent({__name:"search",emits:["search"],setup(a,{emit:c}){const t=e.ref([]),r=e.ref([]),o=e.reactive({supplierId:"",platformCategoryParentId:"",supplierGoodsName:""}),f=[{label:"商品名称",prop:"supplierGoodsName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称"}},{label:"供应商名称",labelWidth:85,prop:"supplierId",valueType:"select",options:t,fieldProps:{placeholder:"请输入店铺名称",props:{value:"id",label:"name",expandTrigger:"hover"},filterable:!0,remote:!0,reserveKeyword:!0,remoteMethod:s=>{i(s)}}},{label:"平台类目",valueType:"cascader",options:r,fieldProps:{placeholder:"请选择平台类目",props:{expandTrigger:"hover",label:"name",value:"id",children:"secondCategoryVos"},onChange:s=>{s.length>1&&(o.platformCategoryParentId=s[s.length-1])}}}],m=c,n=async()=>{const{data:s,code:l}=await X();r.value=s};e.onMounted(()=>n());const y=s=>{s&&Object.keys(s).forEach(l=>o[l]=s[l])},_=()=>{const s=z.cloneDeep(o);delete s.undefined,m("search",s)},i=async(s="")=>{var g;const l=await W({supplierName:s});l.data&&((g=l.data)!=null&&g.length)&&(t.value=l.data.map(p=>({value:p.id,label:p.name})))},h=()=>{Object.keys(o).forEach(s=>o[s]=""),_()};return(s,l)=>(e.openBlock(),e.createBlock(G,{"v-model":o,columns:f,"show-number":3,onChangeFormItem:y,onSearchHandle:_,onHandleReset:h},null,8,["v-model"]))}}),de={class:"preview"},pe={class:"preview__name"},me={class:"preview__image"},fe=e.defineComponent({__name:"preview",props:{commodityItem:{type:Object,default:()=>({}),required:!0}},setup(a){const{divTenThousand:c}=L();return(t,r)=>{var n,y;const o=e.resolveComponent("el-image"),f=e.resolveComponent("el-table-column"),m=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",de,[e.createElementVNode("div",pe,"商品名称："+e.toDisplayString(a.commodityItem.productName),1),e.createElementVNode("div",me,[r[0]||(r[0]=e.createElementVNode("span",null,"商品图片：",-1)),e.createVNode(o,{src:(y=(n=a.commodityItem.albumPics)==null?void 0:n.split(","))==null?void 0:y.shift(),style:{width:"80px",height:"80px"}},null,8,["src"])]),e.createVNode(m,{data:a.commodityItem.storageSkus},{default:e.withCtx(()=>[e.createVNode(f,{label:"商品规格"},{default:e.withCtx(({row:_})=>{var i,h;return[e.createTextVNode(e.toDisplayString(((i=a.commodityItem.storageSkus)==null?void 0:i.length)===1?"单规格":(h=_==null?void 0:_.specs)==null?void 0:h.join(";")),1)]}),_:1}),e.createVNode(f,{label:"供货价"},{default:e.withCtx(({row:_})=>[e.createTextVNode(e.toDisplayString(e.unref(c)(_==null?void 0:_.salePrice)),1)]),_:1}),e.createVNode(f,{label:"库存"},{default:e.withCtx(({row:_})=>[e.createTextVNode(e.toDisplayString((_==null?void 0:_.stockType)==="UNLIMITED"?"无限库存":_==null?void 0:_.stock),1)]),_:1})]),_:1},8,["data"])])}}}),mt="",$=(a,c)=>{const t=a.__vccOpts||a;for(const[r,o]of c)t[r]=o;return t},ge=$(fe,[["__scopeId","data-v-158170d2"]]),{divTenThousand:Z,mulTenThousand:F}=L(),ue={expandTrigger:"hover",label:"name",value:"id"};function Q(a,c){const t=a===3;for(let r=0;r<c.length;){const o=c[r];if(t){o.disabled=!1,r++;continue}const f=o.children||o.secondCategoryVos||o.categoryThirdlyVos;delete o.secondCategoryVos,delete o.categoryThirdlyVos;const m=!f||f.length===0;if(o.disabled=m,m){c.splice(r,1);continue}if(Q(a+1,f),f.length===0){c.splice(r,1);continue}o.children=f,r++}return c}const _e=a=>{const c=e.ref(),t=e.reactive({shopCategory:"",consignmentPriceSetting:{type:"UNIFY",sale:0,scribe:0},unifyPriceSetting:{type:"",sale:0,scribe:0}}),r={shopCategory:{required:!0,message:"请选择商家分类",type:"array",trigger:"change"},"consignmentPriceSetting.scribe":{validator:(i,h,s)=>{t.consignmentPriceSetting.type==="RATE"&&(h>100&&s(new Error("划线价比率不能大于100%")),s())},trigger:"blur"},"consignmentPriceSetting.sale":{validator:(i,h,s)=>{t.consignmentPriceSetting.type==="RATE"&&(h>100&&s(new Error("销售价比率不能大于100%")),s())},trigger:"blur"}},o=e.computed(()=>i=>{const h=((i==null?void 0:i.salePrices)||[]).map(g=>Number(g)),s=Math.min(...h),l=Math.max(...h);return s===l?l/1e4:`${s/1e4}~${l/1e4}`}),f=e.computed(()=>i=>{let h=0,s=!1;return i==null||i.forEach(l=>{h+=Number(l.stock),l.stockType==="LIMITED"&&(s=!0)}),s?h:"无限库存"}),m=e.ref([]);async function n(){const{code:i,data:h}=await le({current:1,size:500});if(i!==200){R.ElMessage.error("获取店铺分类失败");return}m.value=Q(1,h.records)}const y=async()=>{const{data:i,code:h}=await J();h===200&&i&&(t.unifyPriceSetting.sale=Z(i==null?void 0:i.sale).toNumber(),t.unifyPriceSetting.scribe=Z(i==null?void 0:i.scribe).toNumber(),t.unifyPriceSetting.type=i==null?void 0:i.type)},_=()=>new Promise((i,h)=>{var l,g,p;if(c.value){const x={shopCategory:{one:(l=t.shopCategory)==null?void 0:l[0],two:(g=t.shopCategory)==null?void 0:g[1],three:(p=t.shopCategory)==null?void 0:p[2]},shopProductKeys:a.value.map(b=>({shopId:b.shopId,productId:b.id}))},V={};t.consignmentPriceSetting.type==="UNIFY"?(V.type=t.unifyPriceSetting.type,V.sale=F(t.unifyPriceSetting.sale).toString(),V.scribe=F(t.unifyPriceSetting.scribe).toString()):(V.type=t.consignmentPriceSetting.type,V.sale=F(t.consignmentPriceSetting.sale).toString(),V.scribe=F(t.consignmentPriceSetting.scribe).toString()),x.consignmentPriceSetting=V,i(x)}else h("valid error")});return y(),n(),{formRefs:c,formModel:t,formRules:r,shopCategoryList:m,shopCascaderProps:ue,computedSalePrice:o,computedSuplier:f,buildData:_}},he=e.defineComponent({__name:"batch-unify-settings",props:{type:{default:""},sale:{default:0},scribe:{default:0}},setup(a){return(c,t)=>{const r=e.resolveComponent("el-input-number"),o=e.resolveComponent("el-form-item");return c.type==="RATE"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(o,{prop:"sale"},{default:e.withCtx(()=>[t[0]||(t[0]=e.createElementVNode("span",null,"销售价 = 供货价 + （供货价 *  ",-1)),e.createVNode(r,{"model-value":c.sale,controls:!1,precision:2,disabled:""},null,8,["model-value"]),t[1]||(t[1]=e.createElementVNode("span",null," % ）",-1))]),_:1}),e.createVNode(o,{prop:"scribe"},{default:e.withCtx(()=>[t[2]||(t[2]=e.createElementVNode("span",null,"划线价 = 销售价 + （销售价 *  ",-1)),e.createVNode(r,{"model-value":c.scribe,controls:!1,precision:2,disabled:""},null,8,["model-value"]),t[3]||(t[3]=e.createElementVNode("span",null," % ）",-1))]),_:1})],64)):c.type==="REGULAR"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(o,{prop:"sale"},{default:e.withCtx(()=>[t[4]||(t[4]=e.createElementVNode("span",null,"销售价 = 供货价 +  ",-1)),e.createVNode(r,{"model-value":c.sale,controls:!1,precision:2,disabled:""},null,8,["model-value"]),t[5]||(t[5]=e.createElementVNode("span",null," 元",-1))]),_:1}),e.createVNode(o,{prop:"scribe"},{default:e.withCtx(()=>[t[6]||(t[6]=e.createElementVNode("span",null,"划线价 = 销售价 +  ",-1)),e.createVNode(r,{"model-value":c.scribe,controls:!1,precision:2,disabled:""},null,8,["model-value"]),t[7]||(t[7]=e.createElementVNode("span",null," 元",-1))]),_:1})],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[],64))}}}),ye={class:"price-settings"},xe={class:"commodity-info"},Ve=["src"],be=e.defineComponent({__name:"batch-distrubution",props:{batchItems:{type:Object,required:!0}},setup(a,{expose:c}){const t=a,r=e.computed({get(){return t.batchItems},set(s){}}),{formModel:o,formRefs:f,formRules:m,shopCategoryList:n,shopCascaderProps:y,computedSalePrice:_,computedSuplier:i,buildData:h}=_e(r);return c({buildData:h}),(s,l)=>{const g=e.resolveComponent("el-cascader"),p=e.resolveComponent("el-form-item"),x=e.resolveComponent("el-radio"),V=e.resolveComponent("el-radio-group"),b=e.resolveComponent("el-input-number"),C=e.resolveComponent("el-form"),T=e.resolveComponent("el-table-column"),q=e.resolveComponent("el-link"),N=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(C,{ref_key:"formRefs",ref:f,model:e.unref(o),rules:e.unref(m)},{default:e.withCtx(()=>[e.createVNode(p,{label:"店铺类目",prop:"shopCategory"},{default:e.withCtx(()=>[e.createVNode(g,{ref:"shopCategoryRef",modelValue:e.unref(o).shopCategory,"onUpdate:modelValue":l[0]||(l[0]=u=>e.unref(o).shopCategory=u),clearable:"",style:{width:"62.5%"},class:"inputWidth",options:e.unref(n),props:e.unref(y),placeholder:"请选择店铺分类","show-all-levels":""},null,8,["modelValue","options","props"])]),_:1}),e.createVNode(p,{label:"价格设置"},{default:e.withCtx(()=>[e.createElementVNode("div",ye,[e.createVNode(V,{modelValue:e.unref(o).consignmentPriceSetting.type,"onUpdate:modelValue":l[1]||(l[1]=u=>e.unref(o).consignmentPriceSetting.type=u)},{default:e.withCtx(()=>[e.createVNode(x,{value:"UNIFY"},{default:e.withCtx(()=>l[6]||(l[6]=[e.createTextVNode("统一设价")])),_:1}),e.createVNode(x,{value:"RATE"},{default:e.withCtx(()=>l[7]||(l[7]=[e.createTextVNode("按比例设价")])),_:1}),e.createVNode(x,{value:"REGULAR"},{default:e.withCtx(()=>l[8]||(l[8]=[e.createTextVNode("固定金额设价")])),_:1})]),_:1},8,["modelValue"]),e.unref(o).consignmentPriceSetting.type==="UNIFY"?(e.openBlock(),e.createBlock(he,{key:0,sale:e.unref(o).unifyPriceSetting.sale,scribe:e.unref(o).unifyPriceSetting.scribe,type:e.unref(o).unifyPriceSetting.type},null,8,["sale","scribe","type"])):e.unref(o).consignmentPriceSetting.type==="RATE"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(p,{prop:"consignmentPriceSetting.sale"},{default:e.withCtx(()=>[l[9]||(l[9]=e.createElementVNode("span",null,"销售价 = 供货价 + （供货价 *  ",-1)),e.createVNode(b,{modelValue:e.unref(o).consignmentPriceSetting.sale,"onUpdate:modelValue":l[2]||(l[2]=u=>e.unref(o).consignmentPriceSetting.sale=u),controls:!1,precision:2},null,8,["modelValue"]),l[10]||(l[10]=e.createElementVNode("span",null," % ）",-1))]),_:1}),e.createVNode(p,{prop:"consignmentPriceSetting.scribe"},{default:e.withCtx(()=>[l[11]||(l[11]=e.createElementVNode("span",null,"划线价 = 销售价 + （销售价 *  ",-1)),e.createVNode(b,{modelValue:e.unref(o).consignmentPriceSetting.scribe,"onUpdate:modelValue":l[3]||(l[3]=u=>e.unref(o).consignmentPriceSetting.scribe=u),controls:!1,precision:2},null,8,["modelValue"]),l[12]||(l[12]=e.createElementVNode("span",null," % ）",-1))]),_:1})],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createVNode(p,{prop:"consignmentPriceSetting.sale"},{default:e.withCtx(()=>[l[13]||(l[13]=e.createElementVNode("span",null,"销售价 = 供货价 +  ",-1)),e.createVNode(b,{modelValue:e.unref(o).consignmentPriceSetting.sale,"onUpdate:modelValue":l[4]||(l[4]=u=>e.unref(o).consignmentPriceSetting.sale=u),controls:!1,precision:2},null,8,["modelValue"]),l[14]||(l[14]=e.createElementVNode("span",null," 元",-1))]),_:1}),e.createVNode(p,{prop:"consignmentPriceSetting.scribe"},{default:e.withCtx(()=>[l[15]||(l[15]=e.createElementVNode("span",null,"划线价 = 销售价 +  ",-1)),e.createVNode(b,{modelValue:e.unref(o).consignmentPriceSetting.scribe,"onUpdate:modelValue":l[5]||(l[5]=u=>e.unref(o).consignmentPriceSetting.scribe=u),controls:!1,precision:2},null,8,["modelValue"]),l[16]||(l[16]=e.createElementVNode("span",null," 元",-1))]),_:1})],64))])]),_:1})]),_:1},8,["model","rules"]),e.createVNode(N,{data:r.value,"max-height":350},{default:e.withCtx(()=>[e.createVNode(T,{label:"商品名称",align:"left"},{default:e.withCtx(({row:u})=>{var E,P;return[e.createElementVNode("div",xe,[e.createElementVNode("img",{src:(P=(E=u.albumPics)==null?void 0:E.split(","))==null?void 0:P.shift()},null,8,Ve),e.createElementVNode("span",null,e.toDisplayString(u.productName),1)])]}),_:1}),e.createVNode(T,{label:"供货价",align:"center"},{default:e.withCtx(({row:u})=>[e.createTextVNode(" ￥"+e.toDisplayString(e.unref(_)(u)),1)]),_:1}),e.createVNode(T,{label:"库存",align:"center",width:"100"},{default:e.withCtx(({row:u})=>[e.createTextVNode(e.toDisplayString(e.unref(i)(u==null?void 0:u.storageSkus)),1)]),_:1}),e.createVNode(T,{label:"操作",width:"80"},{default:e.withCtx(({$index:u})=>[e.createVNode(q,{type:"danger",onClick:()=>r.value.splice(u,1)},{default:e.withCtx(()=>l[17]||(l[17]=[e.createTextVNode("移除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}}}),gt="",Ne=$(be,[["__scopeId","data-v-1ff62bac"]]),Ce=()=>{const a=e.ref(),c=e.ref(!1);return{previewData:a,handlePreviewData:r=>{a.value=r,c.value=!0},showPreviewDialog:c}},Se=()=>{const a=U.useRouter(),c=U.useRoute(),t=e.ref({}),r=e.reactive({page:{current:1,size:10},total:0});c.query.supplierGoodsName&&(t.value.supplierGoodsName=c.query.supplierGoodsName);const o=e.ref([]),f=e.ref([]),m=e.computed(()=>p=>{const x=((p==null?void 0:p.storageSkus)||[]).map(C=>Number(C.salePrice)),V=Math.min(...x),b=Math.max(...x);return V===b?b/1e4:`${V/1e4}~￥${b/1e4}`}),n=e.computed(()=>p=>p==null?void 0:p.reduce((x,V)=>x+Number(V.stock),0)),y=(p={})=>{t.value=p,r.page.current=1,i()},_=p=>p.storageSkus.find(b=>b.stockType==="UNLIMITED")?"UNLIMITED":p.storageSkus.some(b=>Number(b.stock)>0)?"STOCK":!1,i=async()=>{const p=await ae({...r.page,sellType:"CONSIGNMENT",...t.value});p.data&&(r.total=Number(p.data.total)),o.value=p.data.records.map(x=>({...x,disabled:!_(x)}))};return{pagination:r,tableList:o,multiSelect:f,computedSalePrice:m,computedSuplier:n,handleSearch:y,initList:i,checkLimited:_,handleDistribution:p=>{a.push({path:"/goods/consignment/distribution",query:{shopId:p.shopId,id:p.id}})},handleSizeChange:p=>{r.page.size=p,i()},handleCurrentChange:p=>{r.page.current=p,i()},handleContact:p=>{K(j.useShopInfoStore().shopInfo.id,p.shopId).then(({code:x})=>{x===200&&a.push({path:"/message/customer/supplierService",query:{id:p.shopId}})})}}},Ee=()=>{const a=e.ref(null),c=e.ref(!1),t=e.ref([]);return{batchDistrubutionRef:a,showBatchDistributionDialog:c,checkedDistributuion:t,openBatchDistributionDialog:o=>{const f=o.filter(m=>{const n=m==null?void 0:m.storageSkus;let y=0,_=!1;return n==null||n.forEach(h=>{y+=Number(h.stock),h.stockType==="LIMITED"&&(_=!0)}),(_?y:"无限库存")!==0});if(f.length===0)return R.ElMessage.error({message:"请选择需要铺货的信息"});t.value=z.cloneDeep(f),c.value=!0}}},ke={class:"handle_container",style:{"padding-top":"16px"}},Pe={key:0,style:{color:"#999"}},we={class:"commodity-info"},Te=["src"],De={slot:"content",class:"cup name"},Ie={key:1,class:"name"},$e={style:{color:"#f54319"}},Le={class:"customer"},Re={class:"customer__name"},Be={class:"dialog-footer"},Me=e.defineComponent({__name:"index",setup(a){const{previewData:c,showPreviewDialog:t,handlePreviewData:r}=Ce(),o=(N,u)=>{if(!N)return 0;if(N==="UNLIMITED")return"无限库存";if(N==="STOCK")return _.value(u==null?void 0:u.storageSkus)},{pagination:f,tableList:m,multiSelect:n,computedSalePrice:y,computedSuplier:_,handleSearch:i,checkLimited:h,initList:s,handleDistribution:l,handleSizeChange:g,handleCurrentChange:p,handleContact:x}=Se();e.onMounted(()=>{s()});const{showBatchDistributionDialog:V,openBatchDistributionDialog:b,batchDistrubutionRef:C,checkedDistributuion:T}=Ee(),q=async()=>{var D;const N=await((D=C.value)==null?void 0:D.buildData()),{code:u,success:E,msg:P}=await se(N);u===200&&E?(R.ElMessage.success({message:P||"批量铺货成功"}),s(),V.value=!1):R.ElMessage.error({message:P||"批量铺货失败"})};return(N,u)=>{const E=e.resolveComponent("el-button"),P=e.resolveComponent("el-tooltip"),D=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ce,{onSearch:e.unref(i)},null,8,["onSearch"]),e.createElementVNode("div",ke,[e.unref(n).length>=1?(e.openBlock(),e.createElementBlock("span",Pe,"已选"+e.toDisplayString(e.unref(n).length)+"条 ",1)):e.createCommentVNode("",!0),e.createVNode(E,{type:"primary",onClick:u[0]||(u[0]=d=>e.unref(b)(e.unref(n)))},{default:e.withCtx(()=>u[5]||(u[5]=[e.createTextVNode("一键铺货")])),_:1})]),e.createVNode(e.unref(A),{checkedItem:e.unref(n),"onUpdate:checkedItem":u[1]||(u[1]=d=>e.isRef(n)?n.value=d:null),data:e.unref(m),"no-border":"",selection:!0,class:"table"},{default:e.withCtx(()=>[e.createVNode(S,{label:"商品",width:"400"},{default:e.withCtx(({row:d})=>{var k,I;return[e.createElementVNode("div",we,[e.createElementVNode("img",{src:(I=(k=d.albumPics)==null?void 0:k.split(","))==null?void 0:I.shift()},null,8,Te),d.productName.length>19?(e.openBlock(),e.createBlock(P,{key:0,effect:"dark",content:d.productName,placement:"top"},{default:e.withCtx(()=>[e.createElementVNode("div",De,e.toDisplayString(d.productName),1)]),_:2},1032,["content"])):(e.openBlock(),e.createElementBlock("div",Ie,e.toDisplayString(d.productName),1))])]}),_:1}),e.createVNode(S,{label:"供货价",width:"210"},{default:e.withCtx(({row:d})=>[e.createElementVNode("span",$e,"￥"+e.toDisplayString(e.unref(y)(d)),1)]),_:1}),e.createVNode(S,{label:"供应商库存",width:"160"},{default:e.withCtx(({row:d})=>[e.createTextVNode(e.toDisplayString(o(e.unref(h)(d),d)),1)]),_:1}),e.createVNode(S,{label:"所属供应商",width:"240",prop:"supplierName"},{default:e.withCtx(({row:d})=>[e.createElementVNode("div",Le,[e.createElementVNode("div",null,[e.createElementVNode("span",Re,e.toDisplayString(d.supplierName),1),e.createVNode(H,{name:"icon-xiaoxi-copy",size:"18px",style:{cursor:"pointer"},svg:"",onClick:k=>e.unref(x)(d)},null,8,["onClick"])]),e.createElementVNode("span",null,e.toDisplayString(d.supplierContractNumber),1)])]),_:1}),e.createVNode(S,{label:"操作",align:"right",fixed:"right",width:"150"},{default:e.withCtx(({row:d})=>[e.createElementVNode("div",null,[e.createVNode(E,{link:"",type:"primary",size:"small",onClick:k=>e.unref(r)(d)},{default:e.withCtx(()=>u[6]||(u[6]=[e.createTextVNode("查看")])),_:2},1032,["onClick"]),e.createVNode(E,{link:"",type:"primary",size:"small",disabled:!e.unref(h)(d),onClick:k=>e.unref(l)(d)},{default:e.withCtx(()=>u[7]||(u[7]=[e.createTextVNode("一键铺货 ")])),_:2},1032,["disabled","onClick"])])]),_:1})]),_:1},8,["checkedItem","data"]),e.createVNode(O,{"page-size":e.unref(f).page.size,"page-num":e.unref(f).page.current,total:e.unref(f).total,onHandleSizeChange:e.unref(g),onHandleCurrentChange:e.unref(p)},null,8,["page-size","page-num","total","onHandleSizeChange","onHandleCurrentChange"]),e.createVNode(D,{modelValue:e.unref(t),"onUpdate:modelValue":u[2]||(u[2]=d=>e.isRef(t)?t.value=d:null),title:"商品详情",width:"650px",top:"6vh"},{default:e.withCtx(()=>[e.createVNode(ge,{"commodity-item":e.unref(c)},null,8,["commodity-item"])]),_:1},8,["modelValue"]),e.createVNode(D,{modelValue:e.unref(V),"onUpdate:modelValue":u[4]||(u[4]=d=>e.isRef(V)?V.value=d:null),title:"一键铺货",width:"750px","destroy-on-close":"","close-on-click-modal":!1},{footer:e.withCtx(()=>[e.createElementVNode("span",Be,[e.createVNode(E,{onClick:u[3]||(u[3]=d=>V.value=!1)},{default:e.withCtx(()=>u[8]||(u[8]=[e.createTextVNode("取消")])),_:1}),e.createVNode(E,{type:"primary",onClick:q},{default:e.withCtx(()=>u[9]||(u[9]=[e.createTextVNode("确认")])),_:1})])]),default:e.withCtx(()=>[e.createVNode(Ne,{ref_key:"batchDistrubutionRef",ref:C,"batch-items":e.unref(T)},null,8,["batch-items"])]),_:1},8,["modelValue"])],64)}}}),yt="",ze=Object.freeze(Object.defineProperty({__proto__:null,default:$(Me,[["__scopeId","data-v-835c6a84"]])},Symbol.toStringTag,{value:"Module"})),Fe=e.defineComponent({__name:"search",emits:["search"],setup(a,{emit:c}){const t=e.ref([]),r=e.ref([]),o=[{label:"商品名称",prop:"supplierGoodsName",valueType:"copy",fieldProps:{placeholder:"请输入商品名称"}},{label:"供应商名称",labelWidth:85,prop:"supplierId",valueType:"select",options:t,fieldProps:{placeholder:"请输入店铺名称",props:{value:"id",label:"name",expandTrigger:"hover"},filterable:!0,remote:!0,reserveKeyword:!0,remoteMethod:s=>{i(s)}}},{label:"平台类目",valueType:"cascader",options:r,fieldProps:{placeholder:"请选择平台类目",props:{expandTrigger:"hover",label:"name",value:"id",children:"secondCategoryVos"},onChange:s=>{(s==null?void 0:s.length)>1?n.platformCategoryParentId=s[s.length-1]:n.platformCategoryParentId=""}}}],f=c,m=async()=>{const{data:s,code:l}=await X();r.value=s};e.onMounted(()=>m());const n=e.reactive({supplierId:"",platformCategoryParentId:"",supplierGoodsName:""}),y=s=>{s&&Object.keys(s).forEach(l=>n[l]=s[l])},_=()=>{const s=z.cloneDeep(n);delete s.undefined,f("search",s)},i=async(s="")=>{var g;const l=await W({supplierName:s});l.data&&((g=l.data)!=null&&g.length)&&(t.value=l.data.map(p=>({value:p.id,label:p.name})))},h=()=>{Object.keys(n).forEach(s=>n[s]=""),_()};return(s,l)=>(e.openBlock(),e.createBlock(G,{"v-model":n,columns:o,"show-number":3,onChangeFormItem:y,onSearchHandle:_,onHandleReset:h},null,8,["v-model"]))}});var v=(a=>(a.SELL_ON="已上架",a.SELL_OFF="已下架",a.SUPPLIER_SELL_OFF="供应商下架",a.PLATFORM_SELL_OFF="违规下架",a))(v||{});const{divTenThousand:B}=L(),qe=()=>{const a=U.useRouter(),c=e.ref([]),t=e.ref([]),r=e.reactive({page:{current:1,size:10},total:0}),o=e.ref({status:""}),f=(g={})=>{o.value={...g,status:o.value.status},r.page.current=1,n()},m=e.computed(()=>g=>{let p=0,x=!1;return g==null||g.forEach(V=>{p+=Number(V.stock),V.stockType==="LIMITED"&&(x=!0)}),x?p:"无限库存"}),n=async()=>{const g=await re({...r.page,...o.value});g.data&&(r.total=Number(g.data.total),c.value=g.data.records)},y=e.computed(()=>g=>{var b;const p=(b=(g==null?void 0:g.salePrices)||[])==null?void 0:b.map(C=>parseInt(C)),x=Math.min(...p),V=Math.max(...p);return x===V?B(x):`${B(x)}~￥${B(V)}`}),_=e.computed(()=>g=>{var b;const p=(b=(g==null?void 0:g.storageSkus)||[])==null?void 0:b.map(C=>parseInt(C.salePrice)),x=Math.min(...p),V=Math.max(...p);return x===V?B(x):`${B(x)}~￥${B(V)}`});return{searchCondition:o,tableList:c,multiSelect:t,handleSearch:f,initList:n,pagination:r,computedSalePrice:y,computedSalePriceRange:_,computedSuplierStock:m,changeStatus:g=>{o.value.status=g,r.page.current=1,n()},StatusMap:v,handleSizeChange:g=>{r.page.size=g,n()},handleCurrentChange:g=>{r.page.current=g,n()},handleContact:(g,p="shopId")=>{K(j.useShopInfoStore().shopInfo.id,g[p]).then(({code:x})=>{x===200&&a.push({path:"/message/customer/supplierService",query:{id:g[p]}})})}}},Ue=()=>{const a=e.ref(),c=e.ref(!1);return{currentRow:a,showPreviewDialog:c,openPreviewDialog:r=>{a.value=r,c.value=!0}}},Oe=()=>{const a=e.ref(!1),c=e.ref();return{violationReason:c,showViolationReason:a,openViolationReasonDialog:r=>{c.value=r,a.value=!0}}},Ae={style:{"line-height":"30px"},class:"explainData"},Ge=["src"],je=e.defineComponent({__name:"violation-reason",props:{productViolation:{type:Object,default:()=>({})}},setup(a){const c={PROHIBITED:"违禁品",COUNTERFEIT:"假冒伪劣",EXCESSIVE_PLATFORM_INTERVENTION:"平台介入率太高",TITLE_IRREGULARITY:"标题有问题",OTHER:"其他"},t=a,r=e.computed(()=>{var o,f,m;return{...t.productViolation,violationType:c[(o=t.productViolation)==null?void 0:o.violationType],violationEvidence:(m=(f=t.productViolation)==null?void 0:f.violationEvidence)==null?void 0:m.split(",")}});return(o,f)=>(e.openBlock(),e.createElementBlock("div",Ae,[e.createElementVNode("div",null,[f[0]||(f[0]=e.createElementVNode("p",{class:"explainData_label"},"检查员：",-1)),e.createTextVNode(" "+e.toDisplayString(r.value.rummager),1)]),e.createElementVNode("div",null,[f[1]||(f[1]=e.createElementVNode("p",{class:"explainData_label"},"检查时间：",-1)),e.createTextVNode(" "+e.toDisplayString(r.value.examineDateTime),1)]),e.createElementVNode("div",null,[f[2]||(f[2]=e.createElementVNode("p",{class:"explainData_label"},"类型：",-1)),e.createTextVNode(" "+e.toDisplayString(r.value.violationType),1)]),e.createElementVNode("div",null,[f[3]||(f[3]=e.createElementVNode("p",{class:"explainData_label"},"原因：",-1)),e.createTextVNode(" "+e.toDisplayString(r.value.violationExplain),1)]),e.createElementVNode("div",null,[f[4]||(f[4]=e.createElementVNode("p",{class:"explainData_label"},"相关证据：",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value.violationEvidence,(m,n)=>(e.openBlock(),e.createElementBlock("img",{key:n,src:m,class:"violation-evidence"},null,8,Ge))),128))])]))}}),Ct="",He=$(je,[["__scopeId","data-v-822906c4"]]),Ye={class:"good"},Ke={class:"good__info"},We={class:"good__info"},Xe={class:"good__img"},Je=e.defineComponent({__name:"preview",props:{currentProduct:{type:Object,default:()=>({})}},setup(a){const c=a,{divTenThousand:t}=L();return(r,o)=>{var y,_;const f=e.resolveComponent("el-image"),m=e.resolveComponent("el-table-column"),n=e.resolveComponent("el-table");return e.openBlock(),e.createElementBlock("div",Ye,[e.createElementVNode("div",Ke,"店铺名称："+e.toDisplayString((y=c.currentProduct)==null?void 0:y.supplierName),1),e.createElementVNode("div",We,"商品名称："+e.toDisplayString((_=c.currentProduct)==null?void 0:_.name),1),e.createElementVNode("div",Xe,[o[0]||(o[0]=e.createElementVNode("text",null,"商品图片：",-1)),e.createVNode(f,{style:{width:"100px",height:"100px"},src:c.currentProduct.pic,"preview-src-list":[c.currentProduct.pic]},null,8,["src","preview-src-list"])]),o[1]||(o[1]=e.createElementVNode("div",null,"规格：",-1)),e.createVNode(n,{data:a.currentProduct.storageSkus,height:"350",stripe:"","header-row-style":{"font-size":"12px",color:"#000000"}},{default:e.withCtx(()=>[e.createVNode(m,{label:"规格",align:"center"},{default:e.withCtx(({row:i})=>[e.createElementVNode("span",null,e.toDisplayString(i!=null&&i.specs?i==null?void 0:i.specs.join("-"):""),1)]),_:1}),e.createVNode(m,{label:"sku图",align:"center"},{default:e.withCtx(({row:i})=>[e.createVNode(f,{src:i==null?void 0:i.image,style:{width:"50px",height:"50px"}},null,8,["src"])]),_:1}),e.createVNode(m,{label:"销售价(元)",align:"center"},{default:e.withCtx(({row:i})=>[e.createElementVNode("span",null,e.toDisplayString(i.salePrice&&e.unref(t)(i.salePrice)),1)]),_:1}),e.createVNode(m,{prop:"originalPrice",label:"划线价(元)",align:"center"},{default:e.withCtx(({row:i})=>[e.createElementVNode("span",null,e.toDisplayString(i.price&&e.unref(t)(i.price)),1)]),_:1}),e.createVNode(m,{prop:"weight",label:"重量(kg)",align:"center"},{default:e.withCtx(({row:i})=>[e.createElementVNode("span",null,e.toDisplayString(i.weight),1)]),_:1})]),_:1},8,["data"])])}}}),St="",Ze=$(Je,[["__scopeId","data-v-e7d893db"]]),Qe={class:"commodity-info"},ve=["src"],et={class:"commodity-info__main"},tt={style:{color:"#f54319"}},nt={class:"customer"},ot={class:"customer__name"},at=e.defineComponent({__name:"index",setup(a){const{tableList:c,searchCondition:t,computedSalePrice:r,computedSalePriceRange:o,handleSearch:f,pagination:m,initList:n,multiSelect:y,computedSuplierStock:_,changeStatus:i,StatusMap:h,handleSizeChange:s,handleCurrentChange:l,handleContact:g}=qe();e.onMounted(()=>{n()}),L();const{violationReason:p,showViolationReason:x,openViolationReasonDialog:V}=Oe(),{currentRow:b,showPreviewDialog:C,openPreviewDialog:T}=Ue();return(q,N)=>{const u=e.resolveComponent("el-tab-pane"),E=e.resolveComponent("el-tabs"),P=e.resolveComponent("el-button"),D=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(Fe,{onSearch:e.unref(f)},null,8,["onSearch"]),e.createVNode(E,{"model-value":e.unref(t).status,class:"tab_container","onUpdate:modelValue":e.unref(i)},{default:e.withCtx(()=>[e.createVNode(u,{name:"",label:"全部"}),e.createVNode(u,{name:"SELL_ON",label:"已上架"}),e.createVNode(u,{name:"SELL_OFF",label:"已下架"}),e.createVNode(u,{name:"PLATFORM_SELL_OFF",label:"违规下架"})]),_:1},8,["model-value","onUpdate:modelValue"]),e.createVNode(e.unref(A),{checkedItem:e.unref(y),"onUpdate:checkedItem":N[0]||(N[0]=d=>e.isRef(y)?y.value=d:null),data:e.unref(c),"no-border":"",style:{overflowY:"auto"},selection:!0,class:"table"},{default:e.withCtx(()=>[e.createVNode(S,{label:"商品",width:"350"},{default:e.withCtx(({row:d})=>{var k,I;return[e.createElementVNode("div",Qe,[e.createElementVNode("img",{src:(I=(k=d.pic)==null?void 0:k.split(","))==null?void 0:I.shift()},null,8,ve),e.createElementVNode("div",et,[e.createElementVNode("span",null,e.toDisplayString(d.name),1)])])]}),_:1}),e.createVNode(S,{label:"供货价",width:"170"},{default:e.withCtx(({row:d})=>[e.createElementVNode("span",null,"￥"+e.toDisplayString(e.unref(r)(d)),1)]),_:1}),e.createVNode(S,{label:"供应商库存",width:"100"},{default:e.withCtx(({row:d})=>[e.createTextVNode(e.toDisplayString(e.unref(_)(d==null?void 0:d.storageSkus)),1)]),_:1}),e.createVNode(S,{label:"销售价",width:"170"},{default:e.withCtx(({row:d})=>[e.createElementVNode("span",tt,"￥"+e.toDisplayString(e.unref(o)(d)),1)]),_:1}),e.createVNode(S,{label:"状态",width:"100"},{default:e.withCtx(({row:d})=>[e.createTextVNode(e.toDisplayString(e.unref(h)[d==null?void 0:d.status]),1)]),_:1}),e.createVNode(S,{label:"所属供应商",width:"140",prop:"supplierName"},{default:e.withCtx(({row:d})=>[e.createElementVNode("div",nt,[e.createElementVNode("div",null,[e.createElementVNode("span",ot,e.toDisplayString(d.supplierName),1),e.createVNode(H,{name:"icon-xiaoxi-copy",size:"18px",style:{cursor:"pointer"},svg:"",onClick:k=>e.unref(g)(d,"supplierId")},null,8,["onClick"])]),e.createElementVNode("span",null,e.toDisplayString(d.supplierContractNumber),1)])]),_:1}),e.createVNode(S,{label:"操作",fixed:"right",align:"right",width:"160"},{default:e.withCtx(({row:d})=>[e.createElementVNode("div",null,[(d==null?void 0:d.status)==="PLATFORM_SELL_OFF"?(e.openBlock(),e.createBlock(P,{key:0,link:"",type:"primary",size:"small",onClick:k=>{var I;return e.unref(V)((I=d==null?void 0:d.extra)==null?void 0:I.productViolation)}},{default:e.withCtx(()=>N[3]||(N[3]=[e.createTextVNode("违规原因")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),e.createVNode(P,{link:"",type:"primary",size:"small",onClick:k=>e.unref(T)(d)},{default:e.withCtx(()=>N[4]||(N[4]=[e.createTextVNode("查看 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["checkedItem","data"]),e.createVNode(O,{"page-size":e.unref(m).page.size,"page-num":e.unref(m).page.current,total:e.unref(m).total,onHandleSizeChange:e.unref(s),onHandleCurrentChange:e.unref(l)},null,8,["page-size","page-num","total","onHandleSizeChange","onHandleCurrentChange"]),e.createVNode(D,{modelValue:e.unref(C),"onUpdate:modelValue":N[1]||(N[1]=d=>e.isRef(C)?C.value=d:null),title:"查看",width:"1000px","destroy-on-close":"","close-on-click-modal":!1},{default:e.withCtx(()=>[e.createVNode(Ze,{currentProduct:e.unref(b)},null,8,["currentProduct"])]),_:1},8,["modelValue"]),e.createVNode(D,{modelValue:e.unref(x),"onUpdate:modelValue":N[2]||(N[2]=d=>e.isRef(x)?x.value=d:null),title:"违规原因",width:"600px","destroy-on-close":"","close-on-click-modal":!1},{default:e.withCtx(()=>[e.createVNode(He,{"product-violation":e.unref(p)},null,8,["product-violation"])]),_:1},8,["modelValue"])],64)}}}),Et="",lt=Object.freeze(Object.defineProperty({__proto__:null,default:$(at,[["__scopeId","data-v-25b478af"]])},Symbol.toStringTag,{value:"Module"})),{divTenThousand:ee,mulTenThousand:te}=L(),it=()=>{const a=e.reactive({type:"RATE",sale:0,scribe:0}),c=()=>{a.sale=0,a.scribe=0},t=e.ref(),r={type:{required:!0,message:"请选择代销类型",trigger:"change"},scribe:{validator:(m,n,y)=>{a.type==="RATE"&&(n>100&&y(new Error("划线价比率不能大于100%")),y()),y()},trigger:"blur"},sale:{validator:(m,n,y)=>{a.type==="RATE"&&(n>100&&y(new Error("销售价比率不能大于100%")),y()),y()},trigger:"blur"}},o=()=>{var m;(m=t.value)==null||m.validate(async n=>{if(n){const y=z.cloneDeep(a);y.sale=te(a.sale).toNumber(),y.scribe=te(a.scribe).toNumber();const{code:_,success:i,msg:h}=await ie(y);_===200&&i?R.ElMessage.success({message:h||"更新代销设置信息成功"}):R.ElMessage.error({message:h||"更新代销设置信息失败"})}})};return(async()=>{const{data:m,code:n}=await J();n===200&&m&&(a.sale=ee(m==null?void 0:m.sale).toNumber(),a.scribe=ee(m==null?void 0:m.scribe).toNumber(),a.type=m==null?void 0:m.type)})(),{formRef:t,rules:r,formModel:a,handleChangeType:c,handleSubmitSettingData:o}},rt={class:"settings"},st={class:"settings__form"},ct={class:"settings__footer"},dt=e.defineComponent({__name:"index",setup(a){const{rules:c,formModel:t,formRef:r,handleChangeType:o,handleSubmitSettingData:f}=it();return(m,n)=>{const y=e.resolveComponent("el-radio"),_=e.resolveComponent("el-radio-group"),i=e.resolveComponent("el-form-item"),h=e.resolveComponent("el-input-number"),s=e.resolveComponent("el-form"),l=e.resolveComponent("el-button");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",rt,[n[16]||(n[16]=e.createStaticVNode('<div class="settings__explain" data-v-ac5f4ef8><div class="settings__title" data-v-ac5f4ef8>代销设置说明</div><div class="settings__container" data-v-ac5f4ef8><p class="settings__container--line" data-v-ac5f4ef8> 1、设价方式： 统一设价 、自定义设价 ； 价格优先级：<span class="text-red" data-v-ac5f4ef8>自定义设价 &gt; 统一设价</span></p><p class="settings__container--line" data-v-ac5f4ef8>2、自定义设价：在上架(铺货) 或 编辑 时可对具体的某个商品进行自定义价格设定</p><p class="settings__container--line" data-v-ac5f4ef8>3、统一设价：统一设价为默认方案，其优先级低于自定义设价；即有自定义价格则以自定义价格为准</p><p class="settings__container--line" data-v-ac5f4ef8> 4、无论何种设价方式，系统均可实现随供货价的调整而<span class="text-red" data-v-ac5f4ef8>自动调整</span>代销商品的划线价、销售价 (划线价 &gt;= 销售价) ，避免亏损 </p></div></div>',1)),e.createElementVNode("div",st,[n[15]||(n[15]=e.createElementVNode("span",{class:"setting_form--title"},"统一设价",-1)),e.createVNode(s,{ref_key:"formRef",ref:r,model:e.unref(t),rules:e.unref(c)},{default:e.withCtx(()=>[e.createVNode(i,null,{default:e.withCtx(()=>[e.createVNode(_,{modelValue:e.unref(t).type,"onUpdate:modelValue":n[0]||(n[0]=g=>e.unref(t).type=g),onChange:e.unref(o)},{default:e.withCtx(()=>[e.createVNode(y,{value:"RATE"},{default:e.withCtx(()=>n[5]||(n[5]=[e.createTextVNode("按比例设价")])),_:1}),e.createVNode(y,{value:"REGULAR"},{default:e.withCtx(()=>n[6]||(n[6]=[e.createTextVNode("固定金额设价")])),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e.unref(t).type==="RATE"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(i,{prop:"sale"},{default:e.withCtx(()=>[n[7]||(n[7]=e.createElementVNode("span",null,"销售价 = 供货价 + （供货价 *  ",-1)),e.createVNode(h,{modelValue:e.unref(t).sale,"onUpdate:modelValue":n[1]||(n[1]=g=>e.unref(t).sale=g),controls:!1,precision:2},null,8,["modelValue"]),n[8]||(n[8]=e.createElementVNode("span",null," % ）",-1))]),_:1}),e.createVNode(i,{prop:"scribe"},{default:e.withCtx(()=>[n[9]||(n[9]=e.createElementVNode("span",null,"划线价 = 销售价 + （销售价 *  ",-1)),e.createVNode(h,{modelValue:e.unref(t).scribe,"onUpdate:modelValue":n[2]||(n[2]=g=>e.unref(t).scribe=g),controls:!1,precision:2},null,8,["modelValue"]),n[10]||(n[10]=e.createElementVNode("span",null," % ）",-1))]),_:1})],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(i,{prop:"sale"},{default:e.withCtx(()=>[n[11]||(n[11]=e.createElementVNode("span",null,"销售价 = 供货价 +  ",-1)),e.createVNode(h,{modelValue:e.unref(t).sale,"onUpdate:modelValue":n[3]||(n[3]=g=>e.unref(t).sale=g),controls:!1,precision:2},null,8,["modelValue"]),n[12]||(n[12]=e.createElementVNode("span",null," 元",-1))]),_:1}),e.createVNode(i,{prop:"scribe"},{default:e.withCtx(()=>[n[13]||(n[13]=e.createElementVNode("span",null,"划线价 = 销售价 +  ",-1)),e.createVNode(h,{modelValue:e.unref(t).scribe,"onUpdate:modelValue":n[4]||(n[4]=g=>e.unref(t).scribe=g),controls:!1,precision:2},null,8,["modelValue"]),n[14]||(n[14]=e.createElementVNode("span",null," 元",-1))]),_:1})],64))]),_:1},8,["model","rules"])])]),e.createElementVNode("div",ct,[e.createVNode(l,{type:"primary",onClick:e.unref(f)},{default:e.withCtx(()=>n[17]||(n[17]=[e.createTextVNode("保存")])),_:1},8,["onClick"])])],64)}}}),wt="",pt=Object.freeze(Object.defineProperty({__proto__:null,default:$(dt,[["__scopeId","data-v-ac5f4ef8"]])},Symbol.toStringTag,{value:"Module"}));return oe});
