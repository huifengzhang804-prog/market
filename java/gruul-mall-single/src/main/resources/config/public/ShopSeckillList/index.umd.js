(function(e,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue"),require("vue-router"),require("@vueuse/core"),require("@/components/SchemaForm.vue"),require("@/components/BetterPageManage/BetterPageManage.vue"),require("decimal.js"),require("@/apis/http"),require("element-plus")):typeof define=="function"&&define.amd?define(["vue","vue-router","@vueuse/core","@/components/SchemaForm.vue","@/components/BetterPageManage/BetterPageManage.vue","decimal.js","@/apis/http","element-plus"],m):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopSeckillList=m(e.ShopSeckillListContext.Vue,e.ShopSeckillListContext.VueRouter,e.ShopSeckillListContext.VueUse,e.ShopSeckillListContext.SchemaForms,e.ShopSeckillListContext.PageManage,e.ShopSeckillListContext.Decimal,e.ShopSeckillListContext.Request,e.ShopSeckillListContext.ElementPlus))})(this,function(e,m,V,N,L,W,S,p){"use strict";var C=document.createElement("style");C.textContent=`@charset "UTF-8";*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.fixed,[fixed=\"\"]{position:fixed}.container[data-v-c51086f4]{overflow-y:scroll}[data-v-c51086f4] .el-button.is-link{padding:0}[data-v-c51086f4] .el-button+.el-button{margin-left:10px}
`,document.head.appendChild(C);const B=a=>a&&typeof a=="object"&&"default"in a?a:{default:a},O=B(N),T=B(L),A=e.defineComponent({__name:"head-search",props:{modelValue:{type:Object,default(){return{}}}},emits:["update:modelValue","search"],setup(a,{emit:_}){const c=a,f=[{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name",valueType:"copy",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0"}},{label:"\u6D3B\u52A8\u72B6\u6001",prop:"status",valueType:"select",options:[{value:"",label:"\u5168\u90E8\u72B6\u6001"},{value:"NOT_START",label:"\u672A\u5F00\u59CB"},{value:"IN_PROGRESS",label:"\u8FDB\u884C\u4E2D"},{value:"FINISHED",label:"\u5DF2\u7ED3\u675F"},{value:"OFF_SHELF",label:"\u5DF2\u4E0B\u67B6"},{value:"VIOLATION_OFF_SHELF",label:"\u8FDD\u89C4\u4E0B\u67B6"}],fieldProps:{placeholder:"\u8BF7\u9009\u62E9"}}],l=_,g=V.useVModel(c,"modelValue",l),b=u=>{u&&Object.keys(u).forEach(r=>c.modelValue[r]=u[r])},h=()=>{Object.keys(c.modelValue).forEach(u=>c.modelValue[u]=""),l("search")};return(u,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(O.default,{"v-model":e.unref(g),columns:f,onSearchHandle:r[0]||(r[0]=k=>l("search")),onChangeFormItem:b,onHandleReset:h},null,8,["v-model"]),r[1]||(r[1]=e.createElementVNode("div",{class:"grey_bar"},null,-1))],64))}});var d=(a=>(a.NOT_START="NOT_START",a.IN_PROGRESS="IN_PROGRESS",a.FINISHED="FINISHED",a.OFF_SHELF="OFF_SHELF",a.VIOLATION_OFF_SHELF="VIOLATION_OFF_SHELF",a))(d||{});const w={NOT_START:"\u672A\u5F00\u59CB",IN_PROGRESS:"\u8FDB\u884C\u4E2D",FINISHED:"\u5DF2\u7ED3\u675F",OFF_SHELF:"\u5DF2\u4E0B\u67B6",VIOLATION_OFF_SHELF:"\u8FDD\u89C4\u4E0B\u67B6"},F="addon-seckill/seckill/activity",I=a=>S.post({url:F+"/delete",data:a}),R=a=>S.post({url:`${F}/page`,data:a}),z=a=>S.post({url:`${F}/off/shelf`,data:a}),X="",H={class:"q_plugin_container"},M={class:"handle_container",style:{"padding-top":"16px"}},P={class:"table_container"},q=e.defineComponent({__name:"ShopSeckillList",setup(a){const _=m.useRouter(),c=m.useRoute(),f=e.ref(""),l=e.ref([]),g=e.ref(!1),b=e.ref(),h=e.reactive({name:"",status:null}),u=e.reactive({size:10,current:1,total:0});e.watch(()=>c.query.flag,o=>{o&&r()});async function r(){const{code:o,data:t}=await R({...h,...u});if(o!==200)return p.ElMessage.error("\u83B7\u53D6\u6D3B\u52A8\u5217\u8868\u5931\u8D25");l.value=t.records,u.current=t.current,u.size=t.size,u.total=t.total}r();const k=o=>{!(o!=null&&o.length)||p.ElMessageBox.confirm("\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684\u6D3B\u52A8?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:async t=>{if(t==="cancel")return;const{code:s}=await I(o);if(s!==200){p.ElMessage.error("\u5220\u9664\u5931\u8D25");return}const i=new Set(o);l.value=l.value.filter(E=>!i.has(E.activityId)),u.total-=i.size,p.ElMessage.success("\u5220\u9664\u6210\u529F")}})},y=e.ref([]),G=o=>{y.value=o},$=o=>{u.size=o,r()},j=o=>{u.current=o,r()},U=o=>{p.ElMessageBox.confirm("\u786E\u5B9A\u4E0B\u67B6\u9009\u4E2D\u6D3B\u52A8?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:async t=>{if(t==="cancel")return;const{code:s}=await z({activityId:o.activityId});if(s!==200){p.ElMessage.error("\u4E0B\u67B6\u5931\u8D25");return}p.ElMessage.success("\u4E0B\u67B6\u6210\u529F"),o.status=d.OFF_SHELF}})},K=async o=>{f.value=o,g.value=!0},D=(o,t)=>{_.push({name:"seckillCreate",query:{shopId:o,secKillId:t}})};return(o,t)=>{const s=e.resolveComponent("el-button"),i=e.resolveComponent("el-table-column"),E=e.resolveComponent("el-table"),J=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock("div",H,[e.createVNode(A,{modelValue:h,"onUpdate:modelValue":t[0]||(t[0]=n=>h=n),onSearch:r},null,8,["modelValue"]),e.createElementVNode("div",M,[e.createVNode(s,{round:"",type:"primary",onClick:t[1]||(t[1]=()=>D())},{default:e.withCtx(()=>t[5]||(t[5]=[e.createTextVNode("\u65B0\u589E\u79D2\u6740")])),_:1}),e.createVNode(s,{disabled:!y.value.length,round:"",onClick:t[2]||(t[2]=()=>k(y.value.filter(n=>n.status!=e.unref(d).IN_PROGRESS).map(n=>n.activityId)))},{default:e.withCtx(()=>t[6]||(t[6]=[e.createTextVNode("\u6279\u91CF\u5220\u9664 ")])),_:1},8,["disabled"])]),e.createElementVNode("div",P,[e.createVNode(E,{ref_key:"multipleTableRef",ref:b,"header-cell-style":{background:"#f6f8fa",height:"48px"},"header-row-style":{color:"#333"},data:l.value,onSelectionChange:G},{default:e.withCtx(()=>[e.createVNode(i,{selectable:n=>n.status!==e.unref(d).IN_PROGRESS,align:"center",fixed:"",type:"selection",width:"30"},null,8,["selectable"]),e.createVNode(i,{label:"\u6D3B\u52A8\u540D\u79F0",width:"220"},{default:e.withCtx(({row:n})=>[e.createTextVNode(e.toDisplayString(n.name),1)]),_:1}),e.createVNode(i,{label:"\u72B6\u6001",width:"160"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",{style:e.normalizeStyle(`color:${n.status===e.unref(d).VIOLATION_OFF_SHELF?"rgb(241, 47, 34)":"inherit"}`)},e.toDisplayString(e.unref(w)[n.status]),5)]),_:1}),e.createVNode(i,{label:"\u6D3B\u52A8\u65F6\u95F4",width:"300"},{default:e.withCtx(({row:n})=>[e.createElementVNode("div",null,"\u8D77\uFF1A"+e.toDisplayString(n.startTime),1),e.createElementVNode("div",null,"\u6B62\uFF1A"+e.toDisplayString(n.endTime),1)]),_:1}),e.createVNode(i,{label:"\u6D3B\u52A8\u5546\u54C1",width:"140"},{default:e.withCtx(({row:n})=>[e.createTextVNode(e.toDisplayString(n.product),1)]),_:1}),e.createVNode(i,{label:"\u652F\u4ED8\u5355\u6570",width:"140"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",null,e.toDisplayString(n.payOrder||0),1)]),_:1}),e.createVNode(i,{fixed:"right",label:"\u64CD\u4F5C",align:"right"},{default:e.withCtx(({row:n})=>[e.createVNode(s,{link:"",type:"primary",onClick:x=>D(n.shopId,n.activityId)},{default:e.withCtx(()=>t[7]||(t[7]=[e.createTextVNode("\u67E5\u770B ")])),_:2},1032,["onClick"]),n.status===e.unref(d).IN_PROGRESS?(e.openBlock(),e.createBlock(s,{key:0,link:"",type:"primary",onClick:x=>U(n)},{default:e.withCtx(()=>t[8]||(t[8]=[e.createTextVNode("\u4E0B\u67B6 ")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),n.status===e.unref(d).VIOLATION_OFF_SHELF?(e.openBlock(),e.createBlock(s,{key:1,link:"",type:"primary",onClick:x=>K(n==null?void 0:n.violation)},{default:e.withCtx(()=>t[9]||(t[9]=[e.createTextVNode("\u8FDD\u89C4\u539F\u56E0 ")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),n.status!==e.unref(d).IN_PROGRESS?(e.openBlock(),e.createBlock(s,{key:2,link:"",type:"danger",onClick:x=>k([n.activityId])},{default:e.withCtx(()=>t[10]||(t[10]=[e.createTextVNode("\u5220\u9664 ")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0)]),_:1})]),_:1},8,["data"])]),e.createVNode(T.default,{"page-size":u.size,total:u.total,"page-num":u.current,onHandleSizeChange:$,onHandleCurrentChange:j},null,8,["page-size","total","page-num"]),e.createVNode(J,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=n=>g.value=n),center:"",title:"\u8FDD\u89C4\u539F\u56E0",width:"500",onClose:t[4]||(t[4]=()=>f.value="")},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(f.value),1)]),_:1},8,["modelValue"])])}}}),Y="";return((a,_)=>{const c=a.__vccOpts||a;for(const[f,l]of _)c[f]=l;return c})(q,[["__scopeId","data-v-c51086f4"]])});
