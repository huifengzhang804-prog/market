(function(e,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("vue"),require("@/components/q-address"),require("@/apis/http"),require("element-china-area-data"),require("element-plus")):typeof define=="function"&&define.amd?define(["vue","@/components/q-address","@/apis/http","element-china-area-data","element-plus"],a):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopDeliveryListSelect=a(e.ShopDeliveryListSelectContext.Vue,e.ShopDeliveryListSelectContext.QAddressIndex,e.ShopDeliveryListSelectContext.Request,e.ShopDeliveryListSelectContext.ElementChinaAreaData,e.ShopDeliveryListSelectContext.ElementPlus))})(this,function(e,a,c,C,m){"use strict";const f=n=>c.get({url:"gruul-mall-shop/shop/logistics/address/list",params:n}),h=n=>c.get({url:"gruul-mall-freight/logistics/express/usable/list",params:n});return e.defineComponent({__name:"ShopDeliveryListSelect",props:{properties:{type:Object,default:{}}},setup(n){const s=n,o=e.reactive(s.properties.deliverDialogFormData||{deliverType:"WITHOUT",printId:"",receiver:{name:"",mobile:"",address:""},expressCompany:{logisticsCompanyCode:"",logisticsCompanyName:"",expressNo:""},addressaddress:""}),y=e.ref([]),d=e.ref([]);D(),g();async function g(){const{data:l,code:r}=await f({});r!==200?m.ElMessage({message:"请刷新重试...",type:"warning"}):d.value=l.records;const i=d.value.find(p=>p.defSend==="YES");i&&(o.addressaddress=i.id,s.properties.loadDeliverDialogFormData(o),s.properties.loadDeliveryAddressData(d.value))}async function D(){const{code:l,data:r}=await h({size:1e3,current:1});if(l!==200){m.ElMessage.error("获取物流公司失败");return}r.records.length&&s.properties.loadDeliverDialogFormData(o),y.value=r.records,s.properties.loadCompanySelectListData(r.records)}const x=l=>{s.properties.loadexpressCompanyMapData(l)},S=()=>{s.properties.loadDeliverDialogFormData(o)};return(l,r)=>{const i=e.resolveComponent("el-option"),p=e.resolveComponent("el-select"),u=e.resolveComponent("el-form-item");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createVNode(u,{label:"物流服务",prop:"logisticsCompanyCode","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(p,{modelValue:o.expressCompany,"onUpdate:modelValue":r[0]||(r[0]=t=>o.expressCompany=t),placeholder:"请选择物流服务",style:{width:"444px"},clearable:"",onChange:x,"value-key":"id"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,t=>(e.openBlock(),e.createBlock(i,{key:t.id,label:t.logisticsCompanyName,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[e.vShow,o.deliverType!=="WITHOUT"]]),o.deliverType==="PRINT_EXPRESS"?(e.openBlock(),e.createBlock(u,{key:0,label:"发货地址",prop:"addressaddress","label-width":"100px"},{default:e.withCtx(()=>[e.createVNode(p,{modelValue:o.addressaddress,"onUpdate:modelValue":r[1]||(r[1]=t=>o.addressaddress=t),placeholder:"请选择发货地址",style:{width:"444px"},onChange:S},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,t=>(e.openBlock(),e.createBlock(i,{key:t.id,value:t.id,label:`${e.unref(a.AddressFn)(e.unref(C.regionData),[t.provinceCode,t.cityCode,t.regionCode])}${t.address}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("",!0)],64)}}})});
