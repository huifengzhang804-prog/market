(function(e,f){typeof exports=="object"&&typeof module<"u"?module.exports=f(require("vue"),require("@/components/PageManage.vue"),require("element-plus"),require("@/apis/http"),require("@/composables/useConvert"),require("@/store/modules/shopInfo")):typeof define=="function"&&define.amd?define(["vue","@/components/PageManage.vue","element-plus","@/apis/http","@/composables/useConvert","@/store/modules/shopInfo"],f):(e=typeof globalThis<"u"?globalThis:e||self,e.ShopDecorationSeckillSelectGood=f(e.ShopDecorationSeckillSelectGoodContext.Vue,e.ShopDecorationSeckillSelectGoodContext.PageManageTwo,e.ShopDecorationSeckillSelectGoodContext.ElementPlus,e.ShopDecorationSeckillSelectGoodContext.Request,e.ShopDecorationSeckillSelectGoodContext.UseConvert,e.ShopDecorationSeckillSelectGoodContext.ShopInfoStore))})(this,function(e,f,h,y,w,D){"use strict";var b=document.createElement("style");b.textContent=`@charset "UTF-8";.title[data-v-d119704e]{font-size:15px;font-weight:700;display:flex;margin-bottom:20px;margin-top:-20px}.digGoods[data-v-d119704e]{border-top:1px solid #d7d7d7;padding-top:10px}.digGoods__box[data-v-d119704e]{background-color:#f2f2f2;padding:10px}.digGoods__box--top[data-v-d119704e]{display:flex;justify-content:space-between}.digGoods__box--content[data-v-d119704e]{margin-top:10px;background-color:#fff;border-radius:5px;display:flex;flex-wrap:wrap;padding:5px}.digGoods__box--content--good[data-v-d119704e]{width:33%;margin-left:2px;margin-bottom:4px;height:80px;border-radius:5px;padding:5px;display:flex}.digGoods__box--content--good--img[data-v-d119704e]{width:65px;height:65px;position:relative}.digGoods__box--content--good--imgShadow[data-v-d119704e]{width:65px;height:65px;position:absolute;background-color:#0009;display:flex;justify-content:center;align-items:center}.digGoods__box--content--good--shopName[data-v-d119704e]{margin-left:10px;font-size:12px;display:flex;flex-direction:column;justify-content:space-between}.digGoods__box--bottom[data-v-d119704e]{display:flex;justify-content:space-between;align-items:center}.serachBtn[data-v-d119704e]{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border:1px solid #dcdfe6;background-color:#fff;cursor:pointer;border-left:none;border-radius:4px}
`,document.head.appendChild(b);const G=c=>c&&typeof c=="object"&&"default"in c?c:{default:c},I=G(f),F=G(w),z=c=>y.get({url:`addon-seckill/seckillPromotion/notStartedAndProcessing?size=1000&shopId=${c}`}),T=c=>y.get({url:"addon-seckill/seckillPromotion/secKillProduct",params:c}),A={class:"digGoods"},j={class:"digGoods__box"},M={class:"digGoods__box--top"},P={key:0,class:"digGoods__box--content"},v=["onClick"],L=["src"],q={key:0,class:"digGoods__box--content--good--imgShadow"},O={class:"digGoods__box--content--good--shopName"},$={key:1,class:"digGoods__box--content",style:{display:"flex","justify-content":"center","align-items":"center",height:"250px"}},U={class:"digGoods__box--bottom"},H=e.defineComponent({__name:"ShopDecorationSeckillSelectGood",props:{properties:{type:Object,default:{}}},setup(c,{expose:C}){const g=c,m=D.useShopInfoStore(),{divTenThousand:x}=F.default(),p=e.ref([]),_=e.ref([]),E=e.ref([]),a=e.ref(!1),s=e.shallowReactive({current:1,size:10,total:0,choosedSession:""});e.watch(g.properties,async o=>{o.goodsVisible&&(X(),_.value=JSON.parse(JSON.stringify(o.pointGoodsList)),Y(),await Z(),S())},{immediate:!0}),C({tempGoods:_,search:s,goodsList:p,allChecked:a});const V={borderGet:"2px solid #2D8CF0",borderNoGet:"2px solid #f2f2f2"},J=o=>{s.choosedSession=o,S()},K=o=>{o.isCheck=!o.isCheck;const t=_.value;if(t.length>=16)return h.ElMessage.error("\u6700\u591A\u9009\u62E916\u4E2A\u5546\u54C1"),!1;if(o.isCheck)t.push(o);else{const d=t.findIndex(i=>i.productId===o.productId);d!==-1&&t.splice(d,1)}},R=()=>{let o=!1;const t=p.value,d=_.value,i=a.value;if(t.map(l=>{if(i){if(d.length>=16)return o=!0;d.find(r=>r.productId===l.productId)||d.push(l)}return l.isCheck=i}),o)return h.ElMessage.error("\u81EA\u591A\u9009\u62E916\u4E2A\u5546\u54C1");i||t.forEach(l=>{const r=d.findIndex(u=>u.productId===l.productId);r!==-1&&d.splice(r,1)})},Q=o=>{s.size=o,S()},W=o=>{s.current=o,a.value=!1,S()};async function X(){s.current=1,s.size=10,a.value=!1}async function Y(){let o=!0;p.value.forEach(t=>{const d=B(t.productId);t.isCheck=d,o=o&&d}),a.value=o}async function Z(){const{code:o,data:t}=await z(m.getterShopInfo.id);o===200?t.records.length&&(E.value=t.records,s.choosedSession=t.records[0].startTime):h.ElMessage.error("\u83B7\u53D6\u573A\u6B21\u5931\u8D25")}async function S(){const{current:o,size:t,choosedSession:d}=s;if(!s.choosedSession)return h.ElMessage.warning("\u8BF7\u5148\u9009\u4E2D\u573A\u6B21");const{code:i,data:l}=await T({current:o,size:t,startTime:d,shopId:m.getterShopInfo.id});if(i!==200)return h.ElMessage.error("\u83B7\u53D6\u5546\u54C1\u5931\u8D25");if(l.records.length){let r=!0;l.records.forEach(u=>{const k=B(u.productId);u.isCheck=k,r=r&&k}),a.value=r,p.value=l.records,s.total=l.total}}function B(o){return _.value.findIndex(t=>t.productId===o)!==-1}return(o,t)=>{const d=e.resolveComponent("el-option"),i=e.resolveComponent("el-option-group"),l=e.resolveComponent("el-select"),r=e.resolveComponent("i-ep-check"),u=e.resolveComponent("el-icon"),k=e.resolveComponent("el-checkbox");return e.openBlock(),e.createElementBlock("div",null,[t[3]||(t[3]=e.createElementVNode("div",{class:"title"},"\u9009\u62E9\u5546\u54C1",-1)),e.createElementVNode("div",A,[e.createElementVNode("div",j,[e.createElementVNode("div",M,[e.createVNode(l,{modelValue:e.unref(s).choosedSession,"onUpdate:modelValue":t[0]||(t[0]=n=>e.unref(s).choosedSession=n),style:{width:"190px"},placeholder:"\u5168\u90E8\u5206\u7C7B"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,n=>(e.openBlock(),e.createBlock(i,{key:n.startTime},{default:e.withCtx(()=>[e.createVNode(d,{label:n.startTime,value:n.startTime,onClick:N=>J(n.startTime)},null,8,["label","value","onClick"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),p.value.length>0?(e.openBlock(),e.createElementBlock("div",P,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,(n,N)=>(e.openBlock(),e.createElementBlock("div",{key:N,class:"digGoods__box--content--good",style:e.normalizeStyle({border:n.isCheck?V.borderGet:V.borderNoGet}),onClick:ne=>K(n)},[e.createElementVNode("img",{src:n.productPic,class:"digGoods__box--content--good--img"},null,8,L),n.isCheck?(e.openBlock(),e.createElementBlock("div",q,[e.createVNode(u,{color:"#fff",size:"40px"},{default:e.withCtx(()=>[e.createVNode(r)]),_:1})])):e.createCommentVNode("",!0),e.createElementVNode("div",O,[e.createElementVNode("div",null,e.toDisplayString(n.productName),1),e.createElementVNode("div",null," \uFFE5"+e.toDisplayString(e.unref(x)(n.minPrice))+"-\uFFE5"+e.toDisplayString(e.unref(x)(n.maxPrice)),1)])],12,v))),128))])):e.createCommentVNode("",!0),p.value.length===0?(e.openBlock(),e.createElementBlock("div",$," \u6682\u65E0\u76F8\u5173\u5546\u54C1\u4FE1\u606F\uFF0C\u8BF7\u9009\u62E9\u5176\u4ED6\u65F6\u6BB5 ")):e.createCommentVNode("",!0),e.createElementVNode("div",U,[e.createVNode(k,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value=n),style:{"margin-top":"40px"},onChange:R},{default:e.withCtx(()=>t[2]||(t[2]=[e.createTextVNode("\u5168\u9009")])),_:1},8,["modelValue"]),e.createVNode(I.default,{"page-size":e.unref(s).size,"page-num":e.unref(s).current,total:e.unref(s).total,onHandleSizeChange:Q,onHandleCurrentChange:W},null,8,["page-size","page-num","total"])])])])])}}}),ee="";return((c,C)=>{const g=c.__vccOpts||c;for(const[m,x]of C)g[m]=x;return g})(H,[["__scopeId","data-v-d119704e"]])});
