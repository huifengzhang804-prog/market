(function(e,_){typeof exports=="object"&&typeof module<"u"?module.exports=_(require("vue"),require("vue-router"),require("@/components/BetterPageManage/BetterPageManage.vue"),require("@/components/schema-form/index.vue"),require("decimal.js"),require("@/apis/http"),require("element-plus"),require("@/components/element-plus/el-table/ElTableEmpty/index.vue")):typeof define=="function"&&define.amd?define(["vue","vue-router","@/components/BetterPageManage/BetterPageManage.vue","@/components/schema-form/index.vue","decimal.js","@/apis/http","element-plus","@/components/element-plus/el-table/ElTableEmpty/index.vue"],_):(e=typeof globalThis<"u"?globalThis:e||self,e.PlatformSeckillList=_(e.PlatformSeckillListContext.Vue,e.PlatformSeckillListContext.VueRouter,e.PlatformSeckillListContext.PageManage,e.PlatformSeckillListContext.SchemaForm,e.PlatformSeckillListContext.Decimal,e.PlatformSeckillListContext.Request,e.PlatformSeckillListContext.ElementPlus,e.PlatformSeckillListContext.ElTableEmpty))})(this,function(e,_,D,B,pe,b,f,S){"use strict";var C=document.createElement("style");C.textContent=`@charset "UTF-8";*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.absolute{position:absolute}.fixed{position:fixed}.flex{display:flex}.resize{resize:both}[resize~=none]{resize:none}.blur{--un-blur:blur(8px);filter:var(--un-blur) var(--un-brightness) var(--un-contrast) var(--un-drop-shadow) var(--un-grayscale) var(--un-hue-rotate) var(--un-invert) var(--un-saturate) var(--un-sepia)}.name[data-v-5394f40e]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-5394f40e] .el-button.is-link{padding:0}[data-v-5394f40e] .el-button+.el-button{margin-left:10px}.submit-btn[data-v-5394f40e]{position:absolute;width:100%;text-align:center;padding:10px;bottom:0;left:0;background:#fff;z-index:999;box-shadow:0 0 10px #d5d5d5}.el-dialog__body{padding:20px 20px 0}[data-v-5394f40e] .el-table__body-wrapper .el-table__body .el-table__row .cell .el-button{padding:0}
`,document.head.appendChild(C);const h=a=>a&&typeof a=="object"&&"default"in a?a:{default:a},L=h(D),T=h(B),A=h(S);var s=(a=>(a.NOT_START="NOT_START",a.IN_PROGRESS="IN_PROGRESS",a.FINISHED="FINISHED",a.OFF_SHELF="OFF_SHELF",a.VIOLATION_OFF_SHELF="VIOLATION_OFF_SHELF",a))(s||{});const k={NOT_START:"\u672A\u5F00\u59CB",IN_PROGRESS:"\u8FDB\u884C\u4E2D",FINISHED:"\u5DF2\u7ED3\u675F",OFF_SHELF:"\u5DF2\u4E0B\u67B6",VIOLATION_OFF_SHELF:"\u8FDD\u89C4\u4E0B\u67B6"},E="addon-seckill/seckill/activity",O=a=>b.post({url:`${E}/page`,data:a}),I=a=>b.post({url:`${E}/off/shelf`,data:a}),z=a=>b.post({url:"addon-seckill/common/config/seckill",data:{duration:a}}),P=a=>b.get({url:"addon-seckill/common/config/seckill"}),me="",R={class:"tab_container"},H={key:0,class:"fdc1 overh"},q={class:"table_container"},M={class:"name"},U={class:"name"},j={class:"dialog-footer"},G={key:1},K={style:{padding:"16px",display:"flex","align-items":"center"}},$={class:"submit-btn"},W=e.defineComponent({__name:"PlatformSeckillList",setup(a){const y=_.useRouter(),c=e.ref("activity"),d=e.ref(""),x=[1,2,3,4,6,8,12,24],l=e.reactive({showDialog:!1,row:void 0,violation:"",edit:!1}),V=e.ref([]),g=e.reactive({name:"",status:null}),r=e.reactive({size:10,current:1,total:0}),N=e.ref(),J=[{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name",valueType:"copy",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0"}},{label:"\u6D3B\u52A8\u72B6\u6001",labelWidth:75,prop:"status",valueType:"select",options:Object.entries(k).map(([o,t])=>({label:t,value:o})),fieldProps:{placeholder:"\u8BF7\u9009\u62E9"}}];async function p(){const{code:o,data:t}=await O({...g,...r});if(o!==200)return f.ElMessage.error("\u83B7\u53D6\u6D3B\u52A8\u5217\u8868\u5931\u8D25");V.value=t.records,r.current=t.current,r.size=t.size,r.total=t.total}p();const X=o=>{o&&Object.keys(o).forEach(t=>g[t]=o[t])},Y=()=>{Object.keys(g).forEach(o=>g[o]=""),p()},Z=o=>{r.size=o,p()},Q=o=>{r.current=o,p()},v=(o,t)=>{y.push({name:"secondsKillEdit",query:{shopId:o,secKillId:t}})},ee=async o=>{l.showDialog=!0,l.row=o,l.edit=o.status!=s.VIOLATION_OFF_SHELF},te=()=>{N.value.validate(async(o,t)=>{if(o){const i=l.row,{code:F}=await I({shopId:i.shopId,activityId:i.activityId,reason:l.violation});if(F!==200){f.ElMessage.error("\u4E0B\u67B6\u5931\u8D25");return}f.ElMessage.success("\u4E0B\u67B6\u6210\u529F"),l.showDialog=!1,i.violation=l.violation,i.status=s.VIOLATION_OFF_SHELF}else console.log("error submit!",t)})},w=()=>{l.showDialog=!1,l.row=void 0,l.violation="",l.edit=!1};(async()=>{const{code:o,data:t}=await P();console.log(o,t),o===200&&(d.value=t.duration)})();const ne=async()=>{const{code:o,msg:t}=await z(d.value);o===200?(f.ElMessage.success("\u6D3B\u52A8\u8BBE\u7F6E\u6210\u529F"),p()):f.ElMessage.error(t||"\u6D3B\u52A8\u8BBE\u7F6E\u5931\u8D25")};return(o,t)=>{const i=e.resolveComponent("el-tab-pane"),F=e.resolveComponent("el-tabs"),u=e.resolveComponent("el-table-column"),m=e.resolveComponent("el-button"),oe=e.resolveComponent("el-tooltip"),ae=e.resolveComponent("el-table"),le=e.resolveComponent("el-input"),re=e.resolveComponent("el-form-item"),se=e.resolveComponent("el-form"),ie=e.resolveComponent("el-dialog"),ue=e.resolveComponent("el-option"),ce=e.resolveComponent("el-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",R,[e.createVNode(F,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n),class:"head__top--tabs"},{default:e.withCtx(()=>[e.createVNode(i,{label:"\u79D2\u6740\u6D3B\u52A8",name:"activity"}),e.createVNode(i,{label:"\u6D3B\u52A8\u8BBE\u7F6E",name:"setUp"})]),_:1},8,["modelValue"])]),c.value==="activity"?(e.openBlock(),e.createElementBlock("div",H,[e.createVNode(T.default,{"v-model":g,columns:J,onChangeFormItem:X,onSearchHandle:p,onHandleReset:Y},null,8,["v-model"]),e.createElementVNode("div",q,[e.createVNode(ae,{ref:"multipleTableRef",data:V.value,"header-row-style":{fontSize:"14px",color:"#333"},"header-cell-style":{background:"#f6f8fa",height:"50px"}},{empty:e.withCtx(()=>[e.createVNode(A.default,{imageIndex:"7"})]),default:e.withCtx(()=>[e.createVNode(u,{label:"\u5E97\u94FA\u540D\u79F0",width:"200"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",M,e.toDisplayString(n.shopName),1)]),_:1}),e.createVNode(u,{label:"\u6D3B\u52A8\u540D\u79F0",width:"200"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",U,e.toDisplayString(n.name),1)]),_:1}),e.createVNode(u,{label:"\u72B6\u6001",width:"140"},{default:e.withCtx(({row:n})=>[e.createElementVNode("span",{style:e.normalizeStyle(`color:${n.status===e.unref(s).VIOLATION_OFF_SHELF?"rgb(241, 47, 34)":"inherit"}`)},e.toDisplayString(e.unref(k)[n.status]),5)]),_:1}),e.createVNode(u,{label:"\u6D3B\u52A8\u65F6\u95F4",width:"230"},{default:e.withCtx(({row:n})=>[e.createElementVNode("div",null,e.toDisplayString(n.startTime),1),e.createElementVNode("div",null,e.toDisplayString(n.endTime),1)]),_:1}),e.createVNode(u,{label:"\u6D3B\u52A8\u5546\u54C1",width:"140"},{default:e.withCtx(({row:n})=>[e.createTextVNode(e.toDisplayString(n.product),1)]),_:1}),e.createVNode(u,{label:"\u652F\u4ED8\u5355\u6570",width:"140"},{default:e.withCtx(({row:n})=>[e.createTextVNode(e.toDisplayString(n.payOrder),1)]),_:1}),e.createVNode(u,{fixed:"right",align:"right",label:"\u64CD\u4F5C"},{default:e.withCtx(({row:n})=>[e.createVNode(m,{link:"",type:"primary",onClick:de=>v(n.shopId,n.activityId)},{default:e.withCtx(()=>t[4]||(t[4]=[e.createTextVNode("\u67E5\u770B ")])),_:2},1032,["onClick"]),n.status===e.unref(s).NOT_START||n.status===e.unref(s).IN_PROGRESS?(e.openBlock(),e.createBlock(m,{key:0,link:"",type:"danger",onClick:de=>ee(n)},{default:e.withCtx(()=>t[5]||(t[5]=[e.createTextVNode(" \u8FDD\u89C4\u4E0B\u67B6 ")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),n.status===e.unref(s).VIOLATION_OFF_SHELF?(e.openBlock(),e.createBlock(oe,{key:1,class:"box-item",effect:"dark",content:n.violation,placement:"bottom-end"},{default:e.withCtx(()=>[e.createVNode(m,{link:"",type:"primary"},{default:e.withCtx(()=>t[6]||(t[6]=[e.createTextVNode("\u8FDD\u89C4\u539F\u56E0 ")])),_:1})]),_:2},1032,["content"])):e.createCommentVNode("",!0)]),_:1})]),_:1},8,["data"])]),e.createVNode(L.default,{"page-size":r.size,total:r.total,"page-num":r.current,onHandleSizeChange:Z,onHandleCurrentChange:Q},null,8,["page-size","total","page-num"]),e.createVNode(ie,{modelValue:l.showDialog,"onUpdate:modelValue":t[2]||(t[2]=n=>l.showDialog=n),center:"",title:"\u8FDD\u89C4\u4E0B\u67B6",width:"500",onClose:w},e.createSlots({default:e.withCtx(()=>[l.edit?(e.openBlock(),e.createBlock(se,{key:0,ref_key:"illegalReasonFormRef",ref:N,model:l,rules:{violation:[{required:!0,message:"\u8BF7\u8F93\u5165\u8FDD\u89C4\u539F\u56E0",trigger:"blur"}]},"status-icon":""},{default:e.withCtx(()=>[e.createVNode(re,{label:"",prop:"violation"},{default:e.withCtx(()=>[e.createVNode(le,{modelValue:l.violation,"onUpdate:modelValue":t[1]||(t[1]=n=>l.violation=n),maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u8FDD\u89C4\u539F\u56E0\uFF0C\u5FC5\u586B",resize:"none","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):e.createCommentVNode("",!0)]),_:2},[l.edit?{name:"footer",fn:e.withCtx(()=>[e.createElementVNode("div",j,[e.createVNode(m,{onClick:w},{default:e.withCtx(()=>t[7]||(t[7]=[e.createTextVNode("\u53D6\u6D88")])),_:1}),e.createVNode(m,{type:"primary",onClick:te},{default:e.withCtx(()=>t[8]||(t[8]=[e.createTextVNode("\u786E\u5B9A ")])),_:1})])]),key:"0"}:void 0]),1032,["modelValue"])])):(e.openBlock(),e.createElementBlock("div",G,[e.createElementVNode("div",K,[t[9]||(t[9]=e.createElementVNode("label",{style:{"margin-right":"10px"}},"\u6D3B\u52A8\u65F6\u957F",-1)),e.createVNode(ce,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=n=>d.value=n),placeholder:"",style:{width:"220px"}},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(x,n=>e.createVNode(ue,{key:n,label:n,value:n},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t[10]||(t[10]=e.createElementVNode("span",{style:{"margin-left":"10px"}},"\u5C0F\u65F6",-1)),t[11]||(t[11]=e.createElementVNode("div",{style:{"margin-left":"40px",color:"#999"}},"\u6BCF\u573A\u6D3B\u52A8\u7684\u6301\u7EED\u65F6\u95F4",-1))]),e.createElementVNode("div",$,[e.createVNode(m,{type:"primary",onClick:ne},{default:e.withCtx(()=>t[12]||(t[12]=[e.createTextVNode("\u4FDD\u5B58")])),_:1})])]))],64)}}}),_e="",fe="",ge="";return((a,y)=>{const c=a.__vccOpts||a;for(const[d,x]of y)c[d]=x;return c})(W,[["__scopeId","data-v-5394f40e"]])});
